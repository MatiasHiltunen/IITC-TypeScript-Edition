// ==UserScript==
// @author         Matias Hiltunen
// @name           IITC: Ingress intel map total conversion - TypeScript Edition
// @version        0.0.1
// @description    Total conversion for the ingress intel map.
// @run-at         document-end
// @id             total-conversion-build
// @namespace      https://github.com/IITC-CE/ingress-intel-total-conversion
// @updateURL      https://iitc.app/build/release/total-conversion-build.meta.js
// @downloadURL    https://iitc.app/build/release/total-conversion-build.user.js
// @match          https://intel.ingress.com/*
// @grant          none
// ==/UserScript==

function wrapper(plugin_info) {
// ensure plugin framework is there, even if iitc is not yet loaded

if (typeof window.plugin !== 'function') window.plugin = function() {};

//PLUGIN AUTHORS: writing a plugin outside of the IITC build environment? if so, delete these lines!!
//(leaving them in place might break the 'About IITC' page or break update checks)
plugin_info.buildName = 'release';
plugin_info.dateTimeVersion = '2021-07-16-195801';
plugin_info.pluginId = 'total-conversion-build';
//END PLUGIN AUTHORS NOTE

window.script_info = plugin_info;
(()=>{var Vl=Object.create;var Bo=Object.defineProperty;var Ql=Object.getOwnPropertyDescriptor;var Xl=Object.getOwnPropertyNames,us=Object.getOwnPropertySymbols,Kl=Object.getPrototypeOf,cs=Object.prototype.hasOwnProperty,Jl=Object.prototype.propertyIsEnumerable;var hs=(a,n,s)=>n in a?Bo(a,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[n]=s,An=(a,n)=>{for(var s in n||(n={}))cs.call(n,s)&&hs(a,s,n[s]);if(us)for(var s of us(n))Jl.call(n,s)&&hs(a,s,n[s]);return a};var $l=a=>Bo(a,"__esModule",{value:!0});var Fo=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var tu=(a,n,s)=>{if(n&&typeof n=="object"||typeof n=="function")for(let f of Xl(n))!cs.call(a,f)&&f!=="default"&&Bo(a,f,{get:()=>n[f],enumerable:!(s=Ql(n,f))||s.enumerable});return a},Mt=a=>tu($l(Bo(a!=null?Vl(Kl(a)):{},"default",a&&a.__esModule&&"default"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var fs=(a,n,s)=>new Promise((f,p)=>{var g=T=>{try{R(s.next(T))}catch(E){p(E)}},x=T=>{try{R(s.throw(T))}catch(E){p(E)}},R=T=>T.done?f(T.value):Promise.resolve(T.value).then(g,x);R((s=s.apply(a,n)).next())});var oe=Fo((Ts,Wo)=>{(function(a,n){"use strict";typeof Wo=="object"&&typeof Wo.exports=="object"?Wo.exports=a.document?n(a,!0):function(s){if(!s.document)throw new Error("jQuery requires a window with a document");return n(s)}:n(a)})(typeof window!="undefined"?window:Ts,function(a,n){"use strict";var s=[],f=Object.getPrototypeOf,p=s.slice,g=s.flat?function(i){return s.flat.call(i)}:function(i){return s.concat.apply([],i)},x=s.push,R=s.indexOf,T={},E=T.toString,A=T.hasOwnProperty,N=A.toString,H=N.call(Object),Z={},M=function(o){return typeof o=="function"&&typeof o.nodeType!="number"&&typeof o.item!="function"},I=function(o){return o!=null&&o===o.window},D=a.document,B={type:!0,src:!0,nonce:!0,noModule:!0};function U(i,o,u){u=u||D;var c,m,_=u.createElement("script");if(_.text=i,o)for(c in B)m=o[c]||o.getAttribute&&o.getAttribute(c),m&&_.setAttribute(c,m);u.head.appendChild(_).parentNode.removeChild(_)}function Y(i){return i==null?i+"":typeof i=="object"||typeof i=="function"?T[E.call(i)]||"object":typeof i}var tt="3.6.0",h=function(i,o){return new h.fn.init(i,o)};h.fn=h.prototype={jquery:tt,constructor:h,length:0,toArray:function(){return p.call(this)},get:function(i){return i==null?p.call(this):i<0?this[i+this.length]:this[i]},pushStack:function(i){var o=h.merge(this.constructor(),i);return o.prevObject=this,o},each:function(i){return h.each(this,i)},map:function(i){return this.pushStack(h.map(this,function(o,u){return i.call(o,u,o)}))},slice:function(){return this.pushStack(p.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(h.grep(this,function(i,o){return(o+1)%2}))},odd:function(){return this.pushStack(h.grep(this,function(i,o){return o%2}))},eq:function(i){var o=this.length,u=+i+(i<0?o:0);return this.pushStack(u>=0&&u<o?[this[u]]:[])},end:function(){return this.prevObject||this.constructor()},push:x,sort:s.sort,splice:s.splice},h.extend=h.fn.extend=function(){var i,o,u,c,m,_,v=arguments[0]||{},P=1,S=arguments.length,z=!1;for(typeof v=="boolean"&&(z=v,v=arguments[P]||{},P++),typeof v!="object"&&!M(v)&&(v={}),P===S&&(v=this,P--);P<S;P++)if((i=arguments[P])!=null)for(o in i)c=i[o],!(o==="__proto__"||v===c)&&(z&&c&&(h.isPlainObject(c)||(m=Array.isArray(c)))?(u=v[o],m&&!Array.isArray(u)?_=[]:!m&&!h.isPlainObject(u)?_={}:_=u,m=!1,v[o]=h.extend(z,_,c)):c!==void 0&&(v[o]=c));return v},h.extend({expando:"jQuery"+(tt+Math.random()).replace(/\D/g,""),isReady:!0,error:function(i){throw new Error(i)},noop:function(){},isPlainObject:function(i){var o,u;return!i||E.call(i)!=="[object Object]"?!1:(o=f(i),o?(u=A.call(o,"constructor")&&o.constructor,typeof u=="function"&&N.call(u)===H):!0)},isEmptyObject:function(i){var o;for(o in i)return!1;return!0},globalEval:function(i,o,u){U(i,{nonce:o&&o.nonce},u)},each:function(i,o){var u,c=0;if(_t(i))for(u=i.length;c<u&&o.call(i[c],c,i[c])!==!1;c++);else for(c in i)if(o.call(i[c],c,i[c])===!1)break;return i},makeArray:function(i,o){var u=o||[];return i!=null&&(_t(Object(i))?h.merge(u,typeof i=="string"?[i]:i):x.call(u,i)),u},inArray:function(i,o,u){return o==null?-1:R.call(o,i,u)},merge:function(i,o){for(var u=+o.length,c=0,m=i.length;c<u;c++)i[m++]=o[c];return i.length=m,i},grep:function(i,o,u){for(var c,m=[],_=0,v=i.length,P=!u;_<v;_++)c=!o(i[_],_),c!==P&&m.push(i[_]);return m},map:function(i,o,u){var c,m,_=0,v=[];if(_t(i))for(c=i.length;_<c;_++)m=o(i[_],_,u),m!=null&&v.push(m);else for(_ in i)m=o(i[_],_,u),m!=null&&v.push(m);return g(v)},guid:1,support:Z}),typeof Symbol=="function"&&(h.fn[Symbol.iterator]=s[Symbol.iterator]),h.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(i,o){T["[object "+o+"]"]=o.toLowerCase()});function _t(i){var o=!!i&&"length"in i&&i.length,u=Y(i);return M(i)||I(i)?!1:u==="array"||o===0||typeof o=="number"&&o>0&&o-1 in i}var at=function(i){var o,u,c,m,_,v,P,S,z,j,K,G,V,ot,Tt,ut,_e,pe,Ae,Kt="sizzle"+1*new Date,yt=i.document,Re=0,Dt=0,jt=an(),Zn=an(),Fi=an(),le=an(),Hi=function(b,k){return b===k&&(K=!0),0},en={}.hasOwnProperty,Me=[],Zi=Me.pop,Ne=Me.push,gi=Me.push,Co=Me.slice,nn=function(b,k){for(var O=0,Q=b.length;O<Q;O++)if(b[O]===k)return O;return-1},mr="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Bt="[\\x20\\t\\r\\n\\f]",Te="(?:\\\\[\\da-fA-F]{1,6}"+Bt+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",rn="\\["+Bt+"*("+Te+")(?:"+Bt+"*([*^$|!~]?=)"+Bt+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+Te+"))|)"+Bt+"*\\]",Kr=":("+Te+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+rn+")*)|.*)\\)|)",En=new RegExp(Bt+"+","g"),gr=new RegExp("^"+Bt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+Bt+"+$","g"),Pn=new RegExp("^"+Bt+"*,"+Bt+"*"),Ao=new RegExp("^"+Bt+"*([>+~]|"+Bt+")"+Bt+"*"),qn=new RegExp(Bt+"|>"),Ro=new RegExp(Kr),_r=new RegExp("^"+Te+"$"),vr={ID:new RegExp("^#("+Te+")"),CLASS:new RegExp("^\\.("+Te+")"),TAG:new RegExp("^("+Te+"|[*])"),ATTR:new RegExp("^"+rn),PSEUDO:new RegExp("^"+Kr),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+Bt+"*(even|odd|(([+-]|)(\\d*)n|)"+Bt+"*(?:([+-]|)"+Bt+"*(\\d+)|))"+Bt+"*\\)|)","i"),bool:new RegExp("^(?:"+mr+")$","i"),needsContext:new RegExp("^"+Bt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+Bt+"*((?:-\\d)?\\d*)"+Bt+"*\\)|)(?=[^-]|$)","i")},qi=/HTML$/i,yr=/^(?:input|select|textarea|button)$/i,ma=/^h\d$/i,on=/^[^{]+\{\s*\[native \w/,ga=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ui=/[+~]/,wi=new RegExp("\\\\[\\da-fA-F]{1,6}"+Bt+"?|\\\\([^\\r\\n\\f])","g"),ze=function(b,k){var O="0x"+b.slice(1)-65536;return k||(O<0?String.fromCharCode(O+65536):String.fromCharCode(O>>10|55296,O&1023|56320))},Mo=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,_i=function(b,k){return k?b==="\0"?"\uFFFD":b.slice(0,-1)+"\\"+b.charCodeAt(b.length-1).toString(16)+" ":"\\"+b},br=function(){G()},Do=Gn(function(b){return b.disabled===!0&&b.nodeName.toLowerCase()==="fieldset"},{dir:"parentNode",next:"legend"});try{gi.apply(Me=Co.call(yt.childNodes),yt.childNodes),Me[yt.childNodes.length].nodeType}catch(b){gi={apply:Me.length?function(k,O){Ne.apply(k,Co.call(O))}:function(k,O){for(var Q=k.length,F=0;k[Q++]=O[F++];);k.length=Q-1}}}function Wt(b,k,O,Q){var F,X,J,it,et,gt,dt,pt=k&&k.ownerDocument,Rt=k?k.nodeType:9;if(O=O||[],typeof b!="string"||!b||Rt!==1&&Rt!==9&&Rt!==11)return O;if(!Q&&(G(k),k=k||V,Tt)){if(Rt!==11&&(et=ga.exec(b)))if(F=et[1]){if(Rt===9)if(J=k.getElementById(F)){if(J.id===F)return O.push(J),O}else return O;else if(pt&&(J=pt.getElementById(F))&&Ae(k,J)&&J.id===F)return O.push(J),O}else{if(et[2])return gi.apply(O,k.getElementsByTagName(b)),O;if((F=et[3])&&u.getElementsByClassName&&k.getElementsByClassName)return gi.apply(O,k.getElementsByClassName(F)),O}if(u.qsa&&!le[b+" "]&&(!ut||!ut.test(b))&&(Rt!==1||k.nodeName.toLowerCase()!=="object")){if(dt=b,pt=k,Rt===1&&(qn.test(b)||Ao.test(b))){for(pt=ui.test(b)&&$r(k.parentNode)||k,(pt!==k||!u.scope)&&((it=k.getAttribute("id"))?it=it.replace(Mo,_i):k.setAttribute("id",it=Kt)),gt=v(b),X=gt.length;X--;)gt[X]=(it?"#"+it:":scope")+" "+xr(gt[X]);dt=gt.join(",")}try{return gi.apply(O,pt.querySelectorAll(dt)),O}catch(Ft){le(b,!0)}finally{it===Kt&&k.removeAttribute("id")}}}return S(b.replace(gr,"$1"),k,O,Q)}function an(){var b=[];function k(O,Q){return b.push(O+" ")>c.cacheLength&&delete k[b.shift()],k[O+" "]=Q}return k}function je(b){return b[Kt]=!0,b}function Be(b){var k=V.createElement("fieldset");try{return!!b(k)}catch(O){return!1}finally{k.parentNode&&k.parentNode.removeChild(k),k=null}}function Ui(b,k){for(var O=b.split("|"),Q=O.length;Q--;)c.attrHandle[O[Q]]=k}function Un(b,k){var O=k&&b,Q=O&&b.nodeType===1&&k.nodeType===1&&b.sourceIndex-k.sourceIndex;if(Q)return Q;if(O){for(;O=O.nextSibling;)if(O===k)return-1}return b?1:-1}function Jr(b){return function(k){var O=k.nodeName.toLowerCase();return O==="input"&&k.type===b}}function Io(b){return function(k){var O=k.nodeName.toLowerCase();return(O==="input"||O==="button")&&k.type===b}}function Oo(b){return function(k){return"form"in k?k.parentNode&&k.disabled===!1?"label"in k?"label"in k.parentNode?k.parentNode.disabled===b:k.disabled===b:k.isDisabled===b||k.isDisabled!==!b&&Do(k)===b:k.disabled===b:"label"in k?k.disabled===b:!1}}function vi(b){return je(function(k){return k=+k,je(function(O,Q){for(var F,X=b([],O.length,k),J=X.length;J--;)O[F=X[J]]&&(O[F]=!(Q[F]=O[F]))})})}function $r(b){return b&&typeof b.getElementsByTagName!="undefined"&&b}u=Wt.support={},_=Wt.isXML=function(b){var k=b&&b.namespaceURI,O=b&&(b.ownerDocument||b).documentElement;return!qi.test(k||O&&O.nodeName||"HTML")},G=Wt.setDocument=function(b){var k,O,Q=b?b.ownerDocument||b:yt;return Q==V||Q.nodeType!==9||!Q.documentElement||(V=Q,ot=V.documentElement,Tt=!_(V),yt!=V&&(O=V.defaultView)&&O.top!==O&&(O.addEventListener?O.addEventListener("unload",br,!1):O.attachEvent&&O.attachEvent("onunload",br)),u.scope=Be(function(F){return ot.appendChild(F).appendChild(V.createElement("div")),typeof F.querySelectorAll!="undefined"&&!F.querySelectorAll(":scope fieldset div").length}),u.attributes=Be(function(F){return F.className="i",!F.getAttribute("className")}),u.getElementsByTagName=Be(function(F){return F.appendChild(V.createComment("")),!F.getElementsByTagName("*").length}),u.getElementsByClassName=on.test(V.getElementsByClassName),u.getById=Be(function(F){return ot.appendChild(F).id=Kt,!V.getElementsByName||!V.getElementsByName(Kt).length}),u.getById?(c.filter.ID=function(F){var X=F.replace(wi,ze);return function(J){return J.getAttribute("id")===X}},c.find.ID=function(F,X){if(typeof X.getElementById!="undefined"&&Tt){var J=X.getElementById(F);return J?[J]:[]}}):(c.filter.ID=function(F){var X=F.replace(wi,ze);return function(J){var it=typeof J.getAttributeNode!="undefined"&&J.getAttributeNode("id");return it&&it.value===X}},c.find.ID=function(F,X){if(typeof X.getElementById!="undefined"&&Tt){var J,it,et,gt=X.getElementById(F);if(gt){if(J=gt.getAttributeNode("id"),J&&J.value===F)return[gt];for(et=X.getElementsByName(F),it=0;gt=et[it++];)if(J=gt.getAttributeNode("id"),J&&J.value===F)return[gt]}return[]}}),c.find.TAG=u.getElementsByTagName?function(F,X){if(typeof X.getElementsByTagName!="undefined")return X.getElementsByTagName(F);if(u.qsa)return X.querySelectorAll(F)}:function(F,X){var J,it=[],et=0,gt=X.getElementsByTagName(F);if(F==="*"){for(;J=gt[et++];)J.nodeType===1&&it.push(J);return it}return gt},c.find.CLASS=u.getElementsByClassName&&function(F,X){if(typeof X.getElementsByClassName!="undefined"&&Tt)return X.getElementsByClassName(F)},_e=[],ut=[],(u.qsa=on.test(V.querySelectorAll))&&(Be(function(F){var X;ot.appendChild(F).innerHTML="<a id='"+Kt+"'></a><select id='"+Kt+"-\r\\' msallowcapture=''><option selected=''></option></select>",F.querySelectorAll("[msallowcapture^='']").length&&ut.push("[*^$]="+Bt+`*(?:''|"")`),F.querySelectorAll("[selected]").length||ut.push("\\["+Bt+"*(?:value|"+mr+")"),F.querySelectorAll("[id~="+Kt+"-]").length||ut.push("~="),X=V.createElement("input"),X.setAttribute("name",""),F.appendChild(X),F.querySelectorAll("[name='']").length||ut.push("\\["+Bt+"*name"+Bt+"*="+Bt+`*(?:''|"")`),F.querySelectorAll(":checked").length||ut.push(":checked"),F.querySelectorAll("a#"+Kt+"+*").length||ut.push(".#.+[+~]"),F.querySelectorAll("\\\f"),ut.push("[\\r\\n\\f]")}),Be(function(F){F.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var X=V.createElement("input");X.setAttribute("type","hidden"),F.appendChild(X).setAttribute("name","D"),F.querySelectorAll("[name=d]").length&&ut.push("name"+Bt+"*[*^$|!~]?="),F.querySelectorAll(":enabled").length!==2&&ut.push(":enabled",":disabled"),ot.appendChild(F).disabled=!0,F.querySelectorAll(":disabled").length!==2&&ut.push(":enabled",":disabled"),F.querySelectorAll("*,:x"),ut.push(",.*:")})),(u.matchesSelector=on.test(pe=ot.matches||ot.webkitMatchesSelector||ot.mozMatchesSelector||ot.oMatchesSelector||ot.msMatchesSelector))&&Be(function(F){u.disconnectedMatch=pe.call(F,"*"),pe.call(F,"[s!='']:x"),_e.push("!=",Kr)}),ut=ut.length&&new RegExp(ut.join("|")),_e=_e.length&&new RegExp(_e.join("|")),k=on.test(ot.compareDocumentPosition),Ae=k||on.test(ot.contains)?function(F,X){var J=F.nodeType===9?F.documentElement:F,it=X&&X.parentNode;return F===it||!!(it&&it.nodeType===1&&(J.contains?J.contains(it):F.compareDocumentPosition&&F.compareDocumentPosition(it)&16))}:function(F,X){if(X){for(;X=X.parentNode;)if(X===F)return!0}return!1},Hi=k?function(F,X){if(F===X)return K=!0,0;var J=!F.compareDocumentPosition-!X.compareDocumentPosition;return J||(J=(F.ownerDocument||F)==(X.ownerDocument||X)?F.compareDocumentPosition(X):1,J&1||!u.sortDetached&&X.compareDocumentPosition(F)===J?F==V||F.ownerDocument==yt&&Ae(yt,F)?-1:X==V||X.ownerDocument==yt&&Ae(yt,X)?1:j?nn(j,F)-nn(j,X):0:J&4?-1:1)}:function(F,X){if(F===X)return K=!0,0;var J,it=0,et=F.parentNode,gt=X.parentNode,dt=[F],pt=[X];if(!et||!gt)return F==V?-1:X==V?1:et?-1:gt?1:j?nn(j,F)-nn(j,X):0;if(et===gt)return Un(F,X);for(J=F;J=J.parentNode;)dt.unshift(J);for(J=X;J=J.parentNode;)pt.unshift(J);for(;dt[it]===pt[it];)it++;return it?Un(dt[it],pt[it]):dt[it]==yt?-1:pt[it]==yt?1:0}),V},Wt.matches=function(b,k){return Wt(b,null,null,k)},Wt.matchesSelector=function(b,k){if(G(b),u.matchesSelector&&Tt&&!le[k+" "]&&(!_e||!_e.test(k))&&(!ut||!ut.test(k)))try{var O=pe.call(b,k);if(O||u.disconnectedMatch||b.document&&b.document.nodeType!==11)return O}catch(Q){le(k,!0)}return Wt(k,V,null,[b]).length>0},Wt.contains=function(b,k){return(b.ownerDocument||b)!=V&&G(b),Ae(b,k)},Wt.attr=function(b,k){(b.ownerDocument||b)!=V&&G(b);var O=c.attrHandle[k.toLowerCase()],Q=O&&en.call(c.attrHandle,k.toLowerCase())?O(b,k,!Tt):void 0;return Q!==void 0?Q:u.attributes||!Tt?b.getAttribute(k):(Q=b.getAttributeNode(k))&&Q.specified?Q.value:null},Wt.escape=function(b){return(b+"").replace(Mo,_i)},Wt.error=function(b){throw new Error("Syntax error, unrecognized expression: "+b)},Wt.uniqueSort=function(b){var k,O=[],Q=0,F=0;if(K=!u.detectDuplicates,j=!u.sortStable&&b.slice(0),b.sort(Hi),K){for(;k=b[F++];)k===b[F]&&(Q=O.push(F));for(;Q--;)b.splice(O[Q],1)}return j=null,b},m=Wt.getText=function(b){var k,O="",Q=0,F=b.nodeType;if(F){if(F===1||F===9||F===11){if(typeof b.textContent=="string")return b.textContent;for(b=b.firstChild;b;b=b.nextSibling)O+=m(b)}else if(F===3||F===4)return b.nodeValue}else for(;k=b[Q++];)O+=m(k);return O},c=Wt.selectors={cacheLength:50,createPseudo:je,match:vr,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(b){return b[1]=b[1].replace(wi,ze),b[3]=(b[3]||b[4]||b[5]||"").replace(wi,ze),b[2]==="~="&&(b[3]=" "+b[3]+" "),b.slice(0,4)},CHILD:function(b){return b[1]=b[1].toLowerCase(),b[1].slice(0,3)==="nth"?(b[3]||Wt.error(b[0]),b[4]=+(b[4]?b[5]+(b[6]||1):2*(b[3]==="even"||b[3]==="odd")),b[5]=+(b[7]+b[8]||b[3]==="odd")):b[3]&&Wt.error(b[0]),b},PSEUDO:function(b){var k,O=!b[6]&&b[2];return vr.CHILD.test(b[0])?null:(b[3]?b[2]=b[4]||b[5]||"":O&&Ro.test(O)&&(k=v(O,!0))&&(k=O.indexOf(")",O.length-k)-O.length)&&(b[0]=b[0].slice(0,k),b[2]=O.slice(0,k)),b.slice(0,3))}},filter:{TAG:function(b){var k=b.replace(wi,ze).toLowerCase();return b==="*"?function(){return!0}:function(O){return O.nodeName&&O.nodeName.toLowerCase()===k}},CLASS:function(b){var k=jt[b+" "];return k||(k=new RegExp("(^|"+Bt+")"+b+"("+Bt+"|$)"))&&jt(b,function(O){return k.test(typeof O.className=="string"&&O.className||typeof O.getAttribute!="undefined"&&O.getAttribute("class")||"")})},ATTR:function(b,k,O){return function(Q){var F=Wt.attr(Q,b);return F==null?k==="!=":k?(F+="",k==="="?F===O:k==="!="?F!==O:k==="^="?O&&F.indexOf(O)===0:k==="*="?O&&F.indexOf(O)>-1:k==="$="?O&&F.slice(-O.length)===O:k==="~="?(" "+F.replace(En," ")+" ").indexOf(O)>-1:k==="|="?F===O||F.slice(0,O.length+1)===O+"-":!1):!0}},CHILD:function(b,k,O,Q,F){var X=b.slice(0,3)!=="nth",J=b.slice(-4)!=="last",it=k==="of-type";return Q===1&&F===0?function(et){return!!et.parentNode}:function(et,gt,dt){var pt,Rt,Ft,ft,me,Le,We=X!==J?"nextSibling":"previousSibling",ee=et.parentNode,kn=it&&et.nodeName.toLowerCase(),Sn=!dt&&!it,Fe=!1;if(ee){if(X){for(;We;){for(ft=et;ft=ft[We];)if(it?ft.nodeName.toLowerCase()===kn:ft.nodeType===1)return!1;Le=We=b==="only"&&!Le&&"nextSibling"}return!0}if(Le=[J?ee.firstChild:ee.lastChild],J&&Sn){for(ft=ee,Ft=ft[Kt]||(ft[Kt]={}),Rt=Ft[ft.uniqueID]||(Ft[ft.uniqueID]={}),pt=Rt[b]||[],me=pt[0]===Re&&pt[1],Fe=me&&pt[2],ft=me&&ee.childNodes[me];ft=++me&&ft&&ft[We]||(Fe=me=0)||Le.pop();)if(ft.nodeType===1&&++Fe&&ft===et){Rt[b]=[Re,me,Fe];break}}else if(Sn&&(ft=et,Ft=ft[Kt]||(ft[Kt]={}),Rt=Ft[ft.uniqueID]||(Ft[ft.uniqueID]={}),pt=Rt[b]||[],me=pt[0]===Re&&pt[1],Fe=me),Fe===!1)for(;(ft=++me&&ft&&ft[We]||(Fe=me=0)||Le.pop())&&!((it?ft.nodeName.toLowerCase()===kn:ft.nodeType===1)&&++Fe&&(Sn&&(Ft=ft[Kt]||(ft[Kt]={}),Rt=Ft[ft.uniqueID]||(Ft[ft.uniqueID]={}),Rt[b]=[Re,Fe]),ft===et)););return Fe-=F,Fe===Q||Fe%Q==0&&Fe/Q>=0}}},PSEUDO:function(b,k){var O,Q=c.pseudos[b]||c.setFilters[b.toLowerCase()]||Wt.error("unsupported pseudo: "+b);return Q[Kt]?Q(k):Q.length>1?(O=[b,b,"",k],c.setFilters.hasOwnProperty(b.toLowerCase())?je(function(F,X){for(var J,it=Q(F,k),et=it.length;et--;)J=nn(F,it[et]),F[J]=!(X[J]=it[et])}):function(F){return Q(F,0,O)}):Q}},pseudos:{not:je(function(b){var k=[],O=[],Q=P(b.replace(gr,"$1"));return Q[Kt]?je(function(F,X,J,it){for(var et,gt=Q(F,null,it,[]),dt=F.length;dt--;)(et=gt[dt])&&(F[dt]=!(X[dt]=et))}):function(F,X,J){return k[0]=F,Q(k,null,J,O),k[0]=null,!O.pop()}}),has:je(function(b){return function(k){return Wt(b,k).length>0}}),contains:je(function(b){return b=b.replace(wi,ze),function(k){return(k.textContent||m(k)).indexOf(b)>-1}}),lang:je(function(b){return _r.test(b||"")||Wt.error("unsupported lang: "+b),b=b.replace(wi,ze).toLowerCase(),function(k){var O;do if(O=Tt?k.lang:k.getAttribute("xml:lang")||k.getAttribute("lang"))return O=O.toLowerCase(),O===b||O.indexOf(b+"-")===0;while((k=k.parentNode)&&k.nodeType===1);return!1}}),target:function(b){var k=i.location&&i.location.hash;return k&&k.slice(1)===b.id},root:function(b){return b===ot},focus:function(b){return b===V.activeElement&&(!V.hasFocus||V.hasFocus())&&!!(b.type||b.href||~b.tabIndex)},enabled:Oo(!1),disabled:Oo(!0),checked:function(b){var k=b.nodeName.toLowerCase();return k==="input"&&!!b.checked||k==="option"&&!!b.selected},selected:function(b){return b.parentNode&&b.parentNode.selectedIndex,b.selected===!0},empty:function(b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType<6)return!1;return!0},parent:function(b){return!c.pseudos.empty(b)},header:function(b){return ma.test(b.nodeName)},input:function(b){return yr.test(b.nodeName)},button:function(b){var k=b.nodeName.toLowerCase();return k==="input"&&b.type==="button"||k==="button"},text:function(b){var k;return b.nodeName.toLowerCase()==="input"&&b.type==="text"&&((k=b.getAttribute("type"))==null||k.toLowerCase()==="text")},first:vi(function(){return[0]}),last:vi(function(b,k){return[k-1]}),eq:vi(function(b,k,O){return[O<0?O+k:O]}),even:vi(function(b,k){for(var O=0;O<k;O+=2)b.push(O);return b}),odd:vi(function(b,k){for(var O=1;O<k;O+=2)b.push(O);return b}),lt:vi(function(b,k,O){for(var Q=O<0?O+k:O>k?k:O;--Q>=0;)b.push(Q);return b}),gt:vi(function(b,k,O){for(var Q=O<0?O+k:O;++Q<k;)b.push(Q);return b})}},c.pseudos.nth=c.pseudos.eq;for(o in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})c.pseudos[o]=Jr(o);for(o in{submit:!0,reset:!0})c.pseudos[o]=Io(o);function to(){}to.prototype=c.filters=c.pseudos,c.setFilters=new to,v=Wt.tokenize=function(b,k){var O,Q,F,X,J,it,et,gt=Zn[b+" "];if(gt)return k?0:gt.slice(0);for(J=b,it=[],et=c.preFilter;J;){(!O||(Q=Pn.exec(J)))&&(Q&&(J=J.slice(Q[0].length)||J),it.push(F=[])),O=!1,(Q=Ao.exec(J))&&(O=Q.shift(),F.push({value:O,type:Q[0].replace(gr," ")}),J=J.slice(O.length));for(X in c.filter)(Q=vr[X].exec(J))&&(!et[X]||(Q=et[X](Q)))&&(O=Q.shift(),F.push({value:O,type:X,matches:Q}),J=J.slice(O.length));if(!O)break}return k?J.length:J?Wt.error(b):Zn(b,it).slice(0)};function xr(b){for(var k=0,O=b.length,Q="";k<O;k++)Q+=b[k].value;return Q}function Gn(b,k,O){var Q=k.dir,F=k.next,X=F||Q,J=O&&X==="parentNode",it=Dt++;return k.first?function(et,gt,dt){for(;et=et[Q];)if(et.nodeType===1||J)return b(et,gt,dt);return!1}:function(et,gt,dt){var pt,Rt,Ft,ft=[Re,it];if(dt){for(;et=et[Q];)if((et.nodeType===1||J)&&b(et,gt,dt))return!0}else for(;et=et[Q];)if(et.nodeType===1||J)if(Ft=et[Kt]||(et[Kt]={}),Rt=Ft[et.uniqueID]||(Ft[et.uniqueID]={}),F&&F===et.nodeName.toLowerCase())et=et[Q]||et;else{if((pt=Rt[X])&&pt[0]===Re&&pt[1]===it)return ft[2]=pt[2];if(Rt[X]=ft,ft[2]=b(et,gt,dt))return!0}return!1}}function eo(b){return b.length>1?function(k,O,Q){for(var F=b.length;F--;)if(!b[F](k,O,Q))return!1;return!0}:b[0]}function Ti(b,k,O){for(var Q=0,F=k.length;Q<F;Q++)Wt(b,k[Q],O);return O}function Li(b,k,O,Q,F){for(var X,J=[],it=0,et=b.length,gt=k!=null;it<et;it++)(X=b[it])&&(!O||O(X,Q,F))&&(J.push(X),gt&&k.push(it));return J}function io(b,k,O,Q,F,X){return Q&&!Q[Kt]&&(Q=io(Q)),F&&!F[Kt]&&(F=io(F,X)),je(function(J,it,et,gt){var dt,pt,Rt,Ft=[],ft=[],me=it.length,Le=J||Ti(k||"*",et.nodeType?[et]:et,[]),We=b&&(J||!k)?Li(Le,Ft,b,et,gt):Le,ee=O?F||(J?b:me||Q)?[]:it:We;if(O&&O(We,ee,et,gt),Q)for(dt=Li(ee,ft),Q(dt,[],et,gt),pt=dt.length;pt--;)(Rt=dt[pt])&&(ee[ft[pt]]=!(We[ft[pt]]=Rt));if(J){if(F||b){if(F){for(dt=[],pt=ee.length;pt--;)(Rt=ee[pt])&&dt.push(We[pt]=Rt);F(null,ee=[],dt,gt)}for(pt=ee.length;pt--;)(Rt=ee[pt])&&(dt=F?nn(J,Rt):Ft[pt])>-1&&(J[dt]=!(it[dt]=Rt))}}else ee=Li(ee===it?ee.splice(me,ee.length):ee),F?F(null,it,ee,gt):gi.apply(it,ee)})}function Gi(b){for(var k,O,Q,F=b.length,X=c.relative[b[0].type],J=X||c.relative[" "],it=X?1:0,et=Gn(function(pt){return pt===k},J,!0),gt=Gn(function(pt){return nn(k,pt)>-1},J,!0),dt=[function(pt,Rt,Ft){var ft=!X&&(Ft||Rt!==z)||((k=Rt).nodeType?et(pt,Rt,Ft):gt(pt,Rt,Ft));return k=null,ft}];it<F;it++)if(O=c.relative[b[it].type])dt=[Gn(eo(dt),O)];else{if(O=c.filter[b[it].type].apply(null,b[it].matches),O[Kt]){for(Q=++it;Q<F&&!c.relative[b[Q].type];Q++);return io(it>1&&eo(dt),it>1&&xr(b.slice(0,it-1).concat({value:b[it-2].type===" "?"*":""})).replace(gr,"$1"),O,it<Q&&Gi(b.slice(it,Q)),Q<F&&Gi(b=b.slice(Q)),Q<F&&xr(b))}dt.push(O)}return eo(dt)}function _a(b,k){var O=k.length>0,Q=b.length>0,F=function(X,J,it,et,gt){var dt,pt,Rt,Ft=0,ft="0",me=X&&[],Le=[],We=z,ee=X||Q&&c.find.TAG("*",gt),kn=Re+=We==null?1:Math.random()||.1,Sn=ee.length;for(gt&&(z=J==V||J||gt);ft!==Sn&&(dt=ee[ft])!=null;ft++){if(Q&&dt){for(pt=0,!J&&dt.ownerDocument!=V&&(G(dt),it=!Tt);Rt=b[pt++];)if(Rt(dt,J||V,it)){et.push(dt);break}gt&&(Re=kn)}O&&((dt=!Rt&&dt)&&Ft--,X&&me.push(dt))}if(Ft+=ft,O&&ft!==Ft){for(pt=0;Rt=k[pt++];)Rt(me,Le,J,it);if(X){if(Ft>0)for(;ft--;)me[ft]||Le[ft]||(Le[ft]=Zi.call(et));Le=Li(Le)}gi.apply(et,Le),gt&&!X&&Le.length>0&&Ft+k.length>1&&Wt.uniqueSort(et)}return gt&&(Re=kn,z=We),me};return O?je(F):F}return P=Wt.compile=function(b,k){var O,Q=[],F=[],X=Fi[b+" "];if(!X){for(k||(k=v(b)),O=k.length;O--;)X=Gi(k[O]),X[Kt]?Q.push(X):F.push(X);X=Fi(b,_a(F,Q)),X.selector=b}return X},S=Wt.select=function(b,k,O,Q){var F,X,J,it,et,gt=typeof b=="function"&&b,dt=!Q&&v(b=gt.selector||b);if(O=O||[],dt.length===1){if(X=dt[0]=dt[0].slice(0),X.length>2&&(J=X[0]).type==="ID"&&k.nodeType===9&&Tt&&c.relative[X[1].type]){if(k=(c.find.ID(J.matches[0].replace(wi,ze),k)||[])[0],k)gt&&(k=k.parentNode);else return O;b=b.slice(X.shift().value.length)}for(F=vr.needsContext.test(b)?0:X.length;F--&&(J=X[F],!c.relative[it=J.type]);)if((et=c.find[it])&&(Q=et(J.matches[0].replace(wi,ze),ui.test(X[0].type)&&$r(k.parentNode)||k))){if(X.splice(F,1),b=Q.length&&xr(X),!b)return gi.apply(O,Q),O;break}}return(gt||P(b,dt))(Q,k,!Tt,O,!k||ui.test(b)&&$r(k.parentNode)||k),O},u.sortStable=Kt.split("").sort(Hi).join("")===Kt,u.detectDuplicates=!!K,G(),u.sortDetached=Be(function(b){return b.compareDocumentPosition(V.createElement("fieldset"))&1}),Be(function(b){return b.innerHTML="<a href='#'></a>",b.firstChild.getAttribute("href")==="#"})||Ui("type|href|height|width",function(b,k,O){if(!O)return b.getAttribute(k,k.toLowerCase()==="type"?1:2)}),(!u.attributes||!Be(function(b){return b.innerHTML="<input/>",b.firstChild.setAttribute("value",""),b.firstChild.getAttribute("value")===""}))&&Ui("value",function(b,k,O){if(!O&&b.nodeName.toLowerCase()==="input")return b.defaultValue}),Be(function(b){return b.getAttribute("disabled")==null})||Ui(mr,function(b,k,O){var Q;if(!O)return b[k]===!0?k.toLowerCase():(Q=b.getAttributeNode(k))&&Q.specified?Q.value:null}),Wt}(a);h.find=at,h.expr=at.selectors,h.expr[":"]=h.expr.pseudos,h.uniqueSort=h.unique=at.uniqueSort,h.text=at.getText,h.isXMLDoc=at.isXML,h.contains=at.contains,h.escapeSelector=at.escape;var Lt=function(i,o,u){for(var c=[],m=u!==void 0;(i=i[o])&&i.nodeType!==9;)if(i.nodeType===1){if(m&&h(i).is(u))break;c.push(i)}return c},ct=function(i,o){for(var u=[];i;i=i.nextSibling)i.nodeType===1&&i!==o&&u.push(i);return u},xt=h.expr.match.needsContext;function It(i,o){return i.nodeName&&i.nodeName.toLowerCase()===o.toLowerCase()}var Ut=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function Ot(i,o,u){return M(o)?h.grep(i,function(c,m){return!!o.call(c,m,c)!==u}):o.nodeType?h.grep(i,function(c){return c===o!==u}):typeof o!="string"?h.grep(i,function(c){return R.call(o,c)>-1!==u}):h.filter(o,i,u)}h.filter=function(i,o,u){var c=o[0];return u&&(i=":not("+i+")"),o.length===1&&c.nodeType===1?h.find.matchesSelector(c,i)?[c]:[]:h.find.matches(i,h.grep(o,function(m){return m.nodeType===1}))},h.fn.extend({find:function(i){var o,u,c=this.length,m=this;if(typeof i!="string")return this.pushStack(h(i).filter(function(){for(o=0;o<c;o++)if(h.contains(m[o],this))return!0}));for(u=this.pushStack([]),o=0;o<c;o++)h.find(i,m[o],u);return c>1?h.uniqueSort(u):u},filter:function(i){return this.pushStack(Ot(this,i||[],!1))},not:function(i){return this.pushStack(Ot(this,i||[],!0))},is:function(i){return!!Ot(this,typeof i=="string"&&xt.test(i)?h(i):i||[],!1).length}});var Ct,re=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,st=h.fn.init=function(i,o,u){var c,m;if(!i)return this;if(u=u||Ct,typeof i=="string")if(i[0]==="<"&&i[i.length-1]===">"&&i.length>=3?c=[null,i,null]:c=re.exec(i),c&&(c[1]||!o))if(c[1]){if(o=o instanceof h?o[0]:o,h.merge(this,h.parseHTML(c[1],o&&o.nodeType?o.ownerDocument||o:D,!0)),Ut.test(c[1])&&h.isPlainObject(o))for(c in o)M(this[c])?this[c](o[c]):this.attr(c,o[c]);return this}else return m=D.getElementById(c[2]),m&&(this[0]=m,this.length=1),this;else return!o||o.jquery?(o||u).find(i):this.constructor(o).find(i);else{if(i.nodeType)return this[0]=i,this.length=1,this;if(M(i))return u.ready!==void 0?u.ready(i):i(h)}return h.makeArray(i,this)};st.prototype=h.fn,Ct=h(D);var ge=/^(?:parents|prev(?:Until|All))/,lt={children:!0,contents:!0,next:!0,prev:!0};h.fn.extend({has:function(i){var o=h(i,this),u=o.length;return this.filter(function(){for(var c=0;c<u;c++)if(h.contains(this,o[c]))return!0})},closest:function(i,o){var u,c=0,m=this.length,_=[],v=typeof i!="string"&&h(i);if(!xt.test(i)){for(;c<m;c++)for(u=this[c];u&&u!==o;u=u.parentNode)if(u.nodeType<11&&(v?v.index(u)>-1:u.nodeType===1&&h.find.matchesSelector(u,i))){_.push(u);break}}return this.pushStack(_.length>1?h.uniqueSort(_):_)},index:function(i){return i?typeof i=="string"?R.call(h(i),this[0]):R.call(this,i.jquery?i[0]:i):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(i,o){return this.pushStack(h.uniqueSort(h.merge(this.get(),h(i,o))))},addBack:function(i){return this.add(i==null?this.prevObject:this.prevObject.filter(i))}});function kt(i,o){for(;(i=i[o])&&i.nodeType!==1;);return i}h.each({parent:function(i){var o=i.parentNode;return o&&o.nodeType!==11?o:null},parents:function(i){return Lt(i,"parentNode")},parentsUntil:function(i,o,u){return Lt(i,"parentNode",u)},next:function(i){return kt(i,"nextSibling")},prev:function(i){return kt(i,"previousSibling")},nextAll:function(i){return Lt(i,"nextSibling")},prevAll:function(i){return Lt(i,"previousSibling")},nextUntil:function(i,o,u){return Lt(i,"nextSibling",u)},prevUntil:function(i,o,u){return Lt(i,"previousSibling",u)},siblings:function(i){return ct((i.parentNode||{}).firstChild,i)},children:function(i){return ct(i.firstChild)},contents:function(i){return i.contentDocument!=null&&f(i.contentDocument)?i.contentDocument:(It(i,"template")&&(i=i.content||i),h.merge([],i.childNodes))}},function(i,o){h.fn[i]=function(u,c){var m=h.map(this,o,u);return i.slice(-5)!=="Until"&&(c=u),c&&typeof c=="string"&&(m=h.filter(c,m)),this.length>1&&(lt[i]||h.uniqueSort(m),ge.test(i)&&m.reverse()),this.pushStack(m)}});var Et=/[^\x20\t\r\n\f]+/g;function Gt(i){var o={};return h.each(i.match(Et)||[],function(u,c){o[c]=!0}),o}h.Callbacks=function(i){i=typeof i=="string"?Gt(i):h.extend({},i);var o,u,c,m,_=[],v=[],P=-1,S=function(){for(m=m||i.once,c=o=!0;v.length;P=-1)for(u=v.shift();++P<_.length;)_[P].apply(u[0],u[1])===!1&&i.stopOnFalse&&(P=_.length,u=!1);i.memory||(u=!1),o=!1,m&&(u?_=[]:_="")},z={add:function(){return _&&(u&&!o&&(P=_.length-1,v.push(u)),function j(K){h.each(K,function(G,V){M(V)?(!i.unique||!z.has(V))&&_.push(V):V&&V.length&&Y(V)!=="string"&&j(V)})}(arguments),u&&!o&&S()),this},remove:function(){return h.each(arguments,function(j,K){for(var G;(G=h.inArray(K,_,G))>-1;)_.splice(G,1),G<=P&&P--}),this},has:function(j){return j?h.inArray(j,_)>-1:_.length>0},empty:function(){return _&&(_=[]),this},disable:function(){return m=v=[],_=u="",this},disabled:function(){return!_},lock:function(){return m=v=[],!u&&!o&&(_=u=""),this},locked:function(){return!!m},fireWith:function(j,K){return m||(K=K||[],K=[j,K.slice?K.slice():K],v.push(K),o||S()),this},fire:function(){return z.fireWith(this,arguments),this},fired:function(){return!!c}};return z};function Nt(i){return i}function vt(i){throw i}function At(i,o,u,c){var m;try{i&&M(m=i.promise)?m.call(i).done(o).fail(u):i&&M(m=i.then)?m.call(i,o,u):o.apply(void 0,[i].slice(c))}catch(_){u.apply(void 0,[_])}}h.extend({Deferred:function(i){var o=[["notify","progress",h.Callbacks("memory"),h.Callbacks("memory"),2],["resolve","done",h.Callbacks("once memory"),h.Callbacks("once memory"),0,"resolved"],["reject","fail",h.Callbacks("once memory"),h.Callbacks("once memory"),1,"rejected"]],u="pending",c={state:function(){return u},always:function(){return m.done(arguments).fail(arguments),this},catch:function(_){return c.then(null,_)},pipe:function(){var _=arguments;return h.Deferred(function(v){h.each(o,function(P,S){var z=M(_[S[4]])&&_[S[4]];m[S[1]](function(){var j=z&&z.apply(this,arguments);j&&M(j.promise)?j.promise().progress(v.notify).done(v.resolve).fail(v.reject):v[S[0]+"With"](this,z?[j]:arguments)})}),_=null}).promise()},then:function(_,v,P){var S=0;function z(j,K,G,V){return function(){var ot=this,Tt=arguments,ut=function(){var pe,Ae;if(!(j<S)){if(pe=G.apply(ot,Tt),pe===K.promise())throw new TypeError("Thenable self-resolution");Ae=pe&&(typeof pe=="object"||typeof pe=="function")&&pe.then,M(Ae)?V?Ae.call(pe,z(S,K,Nt,V),z(S,K,vt,V)):(S++,Ae.call(pe,z(S,K,Nt,V),z(S,K,vt,V),z(S,K,Nt,K.notifyWith))):(G!==Nt&&(ot=void 0,Tt=[pe]),(V||K.resolveWith)(ot,Tt))}},_e=V?ut:function(){try{ut()}catch(pe){h.Deferred.exceptionHook&&h.Deferred.exceptionHook(pe,_e.stackTrace),j+1>=S&&(G!==vt&&(ot=void 0,Tt=[pe]),K.rejectWith(ot,Tt))}};j?_e():(h.Deferred.getStackHook&&(_e.stackTrace=h.Deferred.getStackHook()),a.setTimeout(_e))}}return h.Deferred(function(j){o[0][3].add(z(0,j,M(P)?P:Nt,j.notifyWith)),o[1][3].add(z(0,j,M(_)?_:Nt)),o[2][3].add(z(0,j,M(v)?v:vt))}).promise()},promise:function(_){return _!=null?h.extend(_,c):c}},m={};return h.each(o,function(_,v){var P=v[2],S=v[5];c[v[1]]=P.add,S&&P.add(function(){u=S},o[3-_][2].disable,o[3-_][3].disable,o[0][2].lock,o[0][3].lock),P.add(v[3].fire),m[v[0]]=function(){return m[v[0]+"With"](this===m?void 0:this,arguments),this},m[v[0]+"With"]=P.fireWith}),c.promise(m),i&&i.call(m,m),m},when:function(i){var o=arguments.length,u=o,c=Array(u),m=p.call(arguments),_=h.Deferred(),v=function(P){return function(S){c[P]=this,m[P]=arguments.length>1?p.call(arguments):S,--o||_.resolveWith(c,m)}};if(o<=1&&(At(i,_.done(v(u)).resolve,_.reject,!o),_.state()==="pending"||M(m[u]&&m[u].then)))return _.then();for(;u--;)At(m[u],v(u),_.reject);return _.promise()}});var ae=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;h.Deferred.exceptionHook=function(i,o){a.console&&a.console.warn&&i&&ae.test(i.name)&&a.console.warn("jQuery.Deferred exception: "+i.message,i.stack,o)},h.readyException=function(i){a.setTimeout(function(){throw i})};var ne=h.Deferred();h.fn.ready=function(i){return ne.then(i).catch(function(o){h.readyException(o)}),this},h.extend({isReady:!1,readyWait:1,ready:function(i){(i===!0?--h.readyWait:h.isReady)||(h.isReady=!0,!(i!==!0&&--h.readyWait>0)&&ne.resolveWith(D,[h]))}}),h.ready.then=ne.then;function Ce(){D.removeEventListener("DOMContentLoaded",Ce),a.removeEventListener("load",Ce),h.ready()}D.readyState==="complete"||D.readyState!=="loading"&&!D.documentElement.doScroll?a.setTimeout(h.ready):(D.addEventListener("DOMContentLoaded",Ce),a.addEventListener("load",Ce));var fe=function(i,o,u,c,m,_,v){var P=0,S=i.length,z=u==null;if(Y(u)==="object"){m=!0;for(P in u)fe(i,o,P,u[P],!0,_,v)}else if(c!==void 0&&(m=!0,M(c)||(v=!0),z&&(v?(o.call(i,c),o=null):(z=o,o=function(j,K,G){return z.call(h(j),G)})),o))for(;P<S;P++)o(i[P],u,v?c:c.call(i[P],P,o(i[P],u)));return m?i:z?o.call(i):S?o(i[0],u):_},qe=/^-ms-/,xe=/-([a-z])/g;function $e(i,o){return o.toUpperCase()}function ye(i){return i.replace(qe,"ms-").replace(xe,$e)}var Qe=function(i){return i.nodeType===1||i.nodeType===9||!+i.nodeType};function bi(){this.expando=h.expando+bi.uid++}bi.uid=1,bi.prototype={cache:function(i){var o=i[this.expando];return o||(o={},Qe(i)&&(i.nodeType?i[this.expando]=o:Object.defineProperty(i,this.expando,{value:o,configurable:!0}))),o},set:function(i,o,u){var c,m=this.cache(i);if(typeof o=="string")m[ye(o)]=u;else for(c in o)m[ye(c)]=o[c];return m},get:function(i,o){return o===void 0?this.cache(i):i[this.expando]&&i[this.expando][ye(o)]},access:function(i,o,u){return o===void 0||o&&typeof o=="string"&&u===void 0?this.get(i,o):(this.set(i,o,u),u!==void 0?u:o)},remove:function(i,o){var u,c=i[this.expando];if(c!==void 0){if(o!==void 0)for(Array.isArray(o)?o=o.map(ye):(o=ye(o),o=o in c?[o]:o.match(Et)||[]),u=o.length;u--;)delete c[o[u]];(o===void 0||h.isEmptyObject(c))&&(i.nodeType?i[this.expando]=void 0:delete i[this.expando])}},hasData:function(i){var o=i[this.expando];return o!==void 0&&!h.isEmptyObject(o)}};var ht=new bi,$t=new bi,di=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ci=/[A-Z]/g;function Dn(i){return i==="true"?!0:i==="false"?!1:i==="null"?null:i===+i+""?+i:di.test(i)?JSON.parse(i):i}function Ai(i,o,u){var c;if(u===void 0&&i.nodeType===1)if(c="data-"+o.replace(Ci,"-$&").toLowerCase(),u=i.getAttribute(c),typeof u=="string"){try{u=Dn(u)}catch(m){}$t.set(i,o,u)}else u=void 0;return u}h.extend({hasData:function(i){return $t.hasData(i)||ht.hasData(i)},data:function(i,o,u){return $t.access(i,o,u)},removeData:function(i,o){$t.remove(i,o)},_data:function(i,o,u){return ht.access(i,o,u)},_removeData:function(i,o){ht.remove(i,o)}}),h.fn.extend({data:function(i,o){var u,c,m,_=this[0],v=_&&_.attributes;if(i===void 0){if(this.length&&(m=$t.get(_),_.nodeType===1&&!ht.get(_,"hasDataAttrs"))){for(u=v.length;u--;)v[u]&&(c=v[u].name,c.indexOf("data-")===0&&(c=ye(c.slice(5)),Ai(_,c,m[c])));ht.set(_,"hasDataAttrs",!0)}return m}return typeof i=="object"?this.each(function(){$t.set(this,i)}):fe(this,function(P){var S;if(_&&P===void 0)return S=$t.get(_,i),S!==void 0||(S=Ai(_,i),S!==void 0)?S:void 0;this.each(function(){$t.set(this,i,P)})},null,o,arguments.length>1,null,!0)},removeData:function(i){return this.each(function(){$t.remove(this,i)})}}),h.extend({queue:function(i,o,u){var c;if(i)return o=(o||"fx")+"queue",c=ht.get(i,o),u&&(!c||Array.isArray(u)?c=ht.access(i,o,h.makeArray(u)):c.push(u)),c||[]},dequeue:function(i,o){o=o||"fx";var u=h.queue(i,o),c=u.length,m=u.shift(),_=h._queueHooks(i,o),v=function(){h.dequeue(i,o)};m==="inprogress"&&(m=u.shift(),c--),m&&(o==="fx"&&u.unshift("inprogress"),delete _.stop,m.call(i,v,_)),!c&&_&&_.empty.fire()},_queueHooks:function(i,o){var u=o+"queueHooks";return ht.get(i,u)||ht.access(i,u,{empty:h.Callbacks("once memory").add(function(){ht.remove(i,[o+"queue",u])})})}}),h.fn.extend({queue:function(i,o){var u=2;return typeof i!="string"&&(o=i,i="fx",u--),arguments.length<u?h.queue(this[0],i):o===void 0?this:this.each(function(){var c=h.queue(this,i,o);h._queueHooks(this,i),i==="fx"&&c[0]!=="inprogress"&&h.dequeue(this,i)})},dequeue:function(i){return this.each(function(){h.dequeue(this,i)})},clearQueue:function(i){return this.queue(i||"fx",[])},promise:function(i,o){var u,c=1,m=h.Deferred(),_=this,v=this.length,P=function(){--c||m.resolveWith(_,[_])};for(typeof i!="string"&&(o=i,i=void 0),i=i||"fx";v--;)u=ht.get(_[v],i+"queueHooks"),u&&u.empty&&(c++,u.empty.add(P));return P(),m.promise(o)}});var gn=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,In=new RegExp("^(?:([+-])=|)("+gn+")([a-z%]*)$","i"),pi=["Top","Right","Bottom","Left"],xi=D.documentElement,Ri=function(i){return h.contains(i.ownerDocument,i)},Dr={composed:!0};xi.getRootNode&&(Ri=function(i){return h.contains(i.ownerDocument,i)||i.getRootNode(Dr)===i.ownerDocument});var Yi=function(i,o){return i=o||i,i.style.display==="none"||i.style.display===""&&Ri(i)&&h.css(i,"display")==="none"};function Ir(i,o,u,c){var m,_,v=20,P=c?function(){return c.cur()}:function(){return h.css(i,o,"")},S=P(),z=u&&u[3]||(h.cssNumber[o]?"":"px"),j=i.nodeType&&(h.cssNumber[o]||z!=="px"&&+S)&&In.exec(h.css(i,o));if(j&&j[3]!==z){for(S=S/2,z=z||j[3],j=+S||1;v--;)h.style(i,o,j+z),(1-_)*(1-(_=P()/S||.5))<=0&&(v=0),j=j/_;j=j*2,h.style(i,o,j+z),u=u||[]}return u&&(j=+j||+S||0,m=u[1]?j+(u[1]+1)*u[2]:+u[2],c&&(c.unit=z,c.start=j,c.end=m)),m}var Or={};function bo(i){var o,u=i.ownerDocument,c=i.nodeName,m=Or[c];return m||(o=u.body.appendChild(u.createElement(c)),m=h.css(o,"display"),o.parentNode.removeChild(o),m==="none"&&(m="block"),Or[c]=m,m)}function Mi(i,o){for(var u,c,m=[],_=0,v=i.length;_<v;_++)c=i[_],!!c.style&&(u=c.style.display,o?(u==="none"&&(m[_]=ht.get(c,"display")||null,m[_]||(c.style.display="")),c.style.display===""&&Yi(c)&&(m[_]=bo(c))):u!=="none"&&(m[_]="none",ht.set(c,"display",u)));for(_=0;_<v;_++)m[_]!=null&&(i[_].style.display=m[_]);return i}h.fn.extend({show:function(){return Mi(this,!0)},hide:function(){return Mi(this)},toggle:function(i){return typeof i=="boolean"?i?this.show():this.hide():this.each(function(){Yi(this)?h(this).show():h(this).hide()})}});var Vi=/^(?:checkbox|radio)$/i,Nr=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ue=/^$|^module$|\/(?:java|ecma)script/i;(function(){var i=D.createDocumentFragment(),o=i.appendChild(D.createElement("div")),u=D.createElement("input");u.setAttribute("type","radio"),u.setAttribute("checked","checked"),u.setAttribute("name","t"),o.appendChild(u),Z.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,o.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!o.cloneNode(!0).lastChild.defaultValue,o.innerHTML="<option></option>",Z.option=!!o.lastChild})();var we={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};we.tbody=we.tfoot=we.colgroup=we.caption=we.thead,we.th=we.td,Z.option||(we.optgroup=we.option=[1,"<select multiple='multiple'>","</select>"]);function Oe(i,o){var u;return typeof i.getElementsByTagName!="undefined"?u=i.getElementsByTagName(o||"*"):typeof i.querySelectorAll!="undefined"?u=i.querySelectorAll(o||"*"):u=[],o===void 0||o&&It(i,o)?h.merge([i],u):u}function zr(i,o){for(var u=0,c=i.length;u<c;u++)ht.set(i[u],"globalEval",!o||ht.get(o[u],"globalEval"))}var Di=/<|&#?\w+;/;function ti(i,o,u,c,m){for(var _,v,P,S,z,j,K=o.createDocumentFragment(),G=[],V=0,ot=i.length;V<ot;V++)if(_=i[V],_||_===0)if(Y(_)==="object")h.merge(G,_.nodeType?[_]:_);else if(!Di.test(_))G.push(o.createTextNode(_));else{for(v=v||K.appendChild(o.createElement("div")),P=(Nr.exec(_)||["",""])[1].toLowerCase(),S=we[P]||we._default,v.innerHTML=S[1]+h.htmlPrefilter(_)+S[2],j=S[0];j--;)v=v.lastChild;h.merge(G,v.childNodes),v=K.firstChild,v.textContent=""}for(K.textContent="",V=0;_=G[V++];){if(c&&h.inArray(_,c)>-1){m&&m.push(_);continue}if(z=Ri(_),v=Oe(K.appendChild(_),"script"),z&&zr(v),u)for(j=0;_=v[j++];)Ue.test(_.type||"")&&u.push(_)}return K}var ei=/^([^.]*)(?:\.(.+)|)/;function Qi(){return!0}function _n(){return!1}function Ii(i,o){return i===vn()==(o==="focus")}function vn(){try{return D.activeElement}catch(i){}}function Kn(i,o,u,c,m,_){var v,P;if(typeof o=="object"){typeof u!="string"&&(c=c||u,u=void 0);for(P in o)Kn(i,P,u,c,o[P],_);return i}if(c==null&&m==null?(m=u,c=u=void 0):m==null&&(typeof u=="string"?(m=c,c=void 0):(m=c,c=u,u=void 0)),m===!1)m=_n;else if(!m)return i;return _===1&&(v=m,m=function(S){return h().off(S),v.apply(this,arguments)},m.guid=v.guid||(v.guid=h.guid++)),i.each(function(){h.event.add(this,o,m,c,u)})}h.event={global:{},add:function(i,o,u,c,m){var _,v,P,S,z,j,K,G,V,ot,Tt,ut=ht.get(i);if(!!Qe(i))for(u.handler&&(_=u,u=_.handler,m=_.selector),m&&h.find.matchesSelector(xi,m),u.guid||(u.guid=h.guid++),(S=ut.events)||(S=ut.events=Object.create(null)),(v=ut.handle)||(v=ut.handle=function(_e){return typeof h!="undefined"&&h.event.triggered!==_e.type?h.event.dispatch.apply(i,arguments):void 0}),o=(o||"").match(Et)||[""],z=o.length;z--;)P=ei.exec(o[z])||[],V=Tt=P[1],ot=(P[2]||"").split(".").sort(),!!V&&(K=h.event.special[V]||{},V=(m?K.delegateType:K.bindType)||V,K=h.event.special[V]||{},j=h.extend({type:V,origType:Tt,data:c,handler:u,guid:u.guid,selector:m,needsContext:m&&h.expr.match.needsContext.test(m),namespace:ot.join(".")},_),(G=S[V])||(G=S[V]=[],G.delegateCount=0,(!K.setup||K.setup.call(i,c,ot,v)===!1)&&i.addEventListener&&i.addEventListener(V,v)),K.add&&(K.add.call(i,j),j.handler.guid||(j.handler.guid=u.guid)),m?G.splice(G.delegateCount++,0,j):G.push(j),h.event.global[V]=!0)},remove:function(i,o,u,c,m){var _,v,P,S,z,j,K,G,V,ot,Tt,ut=ht.hasData(i)&&ht.get(i);if(!(!ut||!(S=ut.events))){for(o=(o||"").match(Et)||[""],z=o.length;z--;){if(P=ei.exec(o[z])||[],V=Tt=P[1],ot=(P[2]||"").split(".").sort(),!V){for(V in S)h.event.remove(i,V+o[z],u,c,!0);continue}for(K=h.event.special[V]||{},V=(c?K.delegateType:K.bindType)||V,G=S[V]||[],P=P[2]&&new RegExp("(^|\\.)"+ot.join("\\.(?:.*\\.|)")+"(\\.|$)"),v=_=G.length;_--;)j=G[_],(m||Tt===j.origType)&&(!u||u.guid===j.guid)&&(!P||P.test(j.namespace))&&(!c||c===j.selector||c==="**"&&j.selector)&&(G.splice(_,1),j.selector&&G.delegateCount--,K.remove&&K.remove.call(i,j));v&&!G.length&&((!K.teardown||K.teardown.call(i,ot,ut.handle)===!1)&&h.removeEvent(i,V,ut.handle),delete S[V])}h.isEmptyObject(S)&&ht.remove(i,"handle events")}},dispatch:function(i){var o,u,c,m,_,v,P=new Array(arguments.length),S=h.event.fix(i),z=(ht.get(this,"events")||Object.create(null))[S.type]||[],j=h.event.special[S.type]||{};for(P[0]=S,o=1;o<arguments.length;o++)P[o]=arguments[o];if(S.delegateTarget=this,!(j.preDispatch&&j.preDispatch.call(this,S)===!1)){for(v=h.event.handlers.call(this,S,z),o=0;(m=v[o++])&&!S.isPropagationStopped();)for(S.currentTarget=m.elem,u=0;(_=m.handlers[u++])&&!S.isImmediatePropagationStopped();)(!S.rnamespace||_.namespace===!1||S.rnamespace.test(_.namespace))&&(S.handleObj=_,S.data=_.data,c=((h.event.special[_.origType]||{}).handle||_.handler).apply(m.elem,P),c!==void 0&&(S.result=c)===!1&&(S.preventDefault(),S.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,S),S.result}},handlers:function(i,o){var u,c,m,_,v,P=[],S=o.delegateCount,z=i.target;if(S&&z.nodeType&&!(i.type==="click"&&i.button>=1)){for(;z!==this;z=z.parentNode||this)if(z.nodeType===1&&!(i.type==="click"&&z.disabled===!0)){for(_=[],v={},u=0;u<S;u++)c=o[u],m=c.selector+" ",v[m]===void 0&&(v[m]=c.needsContext?h(m,this).index(z)>-1:h.find(m,this,null,[z]).length),v[m]&&_.push(c);_.length&&P.push({elem:z,handlers:_})}}return z=this,S<o.length&&P.push({elem:z,handlers:o.slice(S)}),P},addProp:function(i,o){Object.defineProperty(h.Event.prototype,i,{enumerable:!0,configurable:!0,get:M(o)?function(){if(this.originalEvent)return o(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[i]},set:function(u){Object.defineProperty(this,i,{enumerable:!0,configurable:!0,writable:!0,value:u})}})},fix:function(i){return i[h.expando]?i:new h.Event(i)},special:{load:{noBubble:!0},click:{setup:function(i){var o=this||i;return Vi.test(o.type)&&o.click&&It(o,"input")&&Xi(o,"click",Qi),!1},trigger:function(i){var o=this||i;return Vi.test(o.type)&&o.click&&It(o,"input")&&Xi(o,"click"),!0},_default:function(i){var o=i.target;return Vi.test(o.type)&&o.click&&It(o,"input")&&ht.get(o,"click")||It(o,"a")}},beforeunload:{postDispatch:function(i){i.result!==void 0&&i.originalEvent&&(i.originalEvent.returnValue=i.result)}}}};function Xi(i,o,u){if(!u){ht.get(i,o)===void 0&&h.event.add(i,o,Qi);return}ht.set(i,o,!1),h.event.add(i,o,{namespace:!1,handler:function(c){var m,_,v=ht.get(this,o);if(c.isTrigger&1&&this[o]){if(v.length)(h.event.special[o]||{}).delegateType&&c.stopPropagation();else if(v=p.call(arguments),ht.set(this,o,v),m=u(this,o),this[o](),_=ht.get(this,o),v!==_||m?ht.set(this,o,!1):_={},v!==_)return c.stopImmediatePropagation(),c.preventDefault(),_&&_.value}else v.length&&(ht.set(this,o,{value:h.event.trigger(h.extend(v[0],h.Event.prototype),v.slice(1),this)}),c.stopImmediatePropagation())}})}h.removeEvent=function(i,o,u){i.removeEventListener&&i.removeEventListener(o,u)},h.Event=function(i,o){if(!(this instanceof h.Event))return new h.Event(i,o);i&&i.type?(this.originalEvent=i,this.type=i.type,this.isDefaultPrevented=i.defaultPrevented||i.defaultPrevented===void 0&&i.returnValue===!1?Qi:_n,this.target=i.target&&i.target.nodeType===3?i.target.parentNode:i.target,this.currentTarget=i.currentTarget,this.relatedTarget=i.relatedTarget):this.type=i,o&&h.extend(this,o),this.timeStamp=i&&i.timeStamp||Date.now(),this[h.expando]=!0},h.Event.prototype={constructor:h.Event,isDefaultPrevented:_n,isPropagationStopped:_n,isImmediatePropagationStopped:_n,isSimulated:!1,preventDefault:function(){var i=this.originalEvent;this.isDefaultPrevented=Qi,i&&!this.isSimulated&&i.preventDefault()},stopPropagation:function(){var i=this.originalEvent;this.isPropagationStopped=Qi,i&&!this.isSimulated&&i.stopPropagation()},stopImmediatePropagation:function(){var i=this.originalEvent;this.isImmediatePropagationStopped=Qi,i&&!this.isSimulated&&i.stopImmediatePropagation(),this.stopPropagation()}},h.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},h.event.addProp),h.each({focus:"focusin",blur:"focusout"},function(i,o){h.event.special[i]={setup:function(){return Xi(this,i,Ii),!1},trigger:function(){return Xi(this,i),!0},_default:function(){return!0},delegateType:o}}),h.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(i,o){h.event.special[i]={delegateType:o,bindType:o,handle:function(u){var c,m=this,_=u.relatedTarget,v=u.handleObj;return(!_||_!==m&&!h.contains(m,_))&&(u.type=v.origType,c=v.handler.apply(this,arguments),u.type=o),c}}}),h.fn.extend({on:function(i,o,u,c){return Kn(this,i,o,u,c)},one:function(i,o,u,c){return Kn(this,i,o,u,c,1)},off:function(i,o,u){var c,m;if(i&&i.preventDefault&&i.handleObj)return c=i.handleObj,h(i.delegateTarget).off(c.namespace?c.origType+"."+c.namespace:c.origType,c.selector,c.handler),this;if(typeof i=="object"){for(m in i)this.off(m,o,i[m]);return this}return(o===!1||typeof o=="function")&&(u=o,o=void 0),u===!1&&(u=_n),this.each(function(){h.event.remove(this,i,u,o)})}});var Jn=/<script|<style|<link/i,mi=/checked\s*(?:[^=]|=\s*.checked.)/i,ca=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function $n(i,o){return It(i,"table")&&It(o.nodeType!==11?o:o.firstChild,"tr")&&h(i).children("tbody")[0]||i}function Br(i){return i.type=(i.getAttribute("type")!==null)+"/"+i.type,i}function Fr(i){return(i.type||"").slice(0,5)==="true/"?i.type=i.type.slice(5):i.removeAttribute("type"),i}function tr(i,o){var u,c,m,_,v,P,S;if(o.nodeType===1){if(ht.hasData(i)&&(_=ht.get(i),S=_.events,S)){ht.remove(o,"handle events");for(m in S)for(u=0,c=S[m].length;u<c;u++)h.event.add(o,m,S[m][u])}$t.hasData(i)&&(v=$t.access(i),P=h.extend({},v),$t.set(o,P))}}function yn(i,o){var u=o.nodeName.toLowerCase();u==="input"&&Vi.test(i.type)?o.checked=i.checked:(u==="input"||u==="textarea")&&(o.defaultValue=i.defaultValue)}function Ki(i,o,u,c){o=g(o);var m,_,v,P,S,z,j=0,K=i.length,G=K-1,V=o[0],ot=M(V);if(ot||K>1&&typeof V=="string"&&!Z.checkClone&&mi.test(V))return i.each(function(Tt){var ut=i.eq(Tt);ot&&(o[0]=V.call(this,Tt,ut.html())),Ki(ut,o,u,c)});if(K&&(m=ti(o,i[0].ownerDocument,!1,i,c),_=m.firstChild,m.childNodes.length===1&&(m=_),_||c)){for(v=h.map(Oe(m,"script"),Br),P=v.length;j<K;j++)S=m,j!==G&&(S=h.clone(S,!0,!0),P&&h.merge(v,Oe(S,"script"))),u.call(i[j],S,j);if(P)for(z=v[v.length-1].ownerDocument,h.map(v,Fr),j=0;j<P;j++)S=v[j],Ue.test(S.type||"")&&!ht.access(S,"globalEval")&&h.contains(z,S)&&(S.src&&(S.type||"").toLowerCase()!=="module"?h._evalUrl&&!S.noModule&&h._evalUrl(S.src,{nonce:S.nonce||S.getAttribute("nonce")},z):U(S.textContent.replace(ca,""),S,z))}return i}function xo(i,o,u){for(var c,m=o?h.filter(o,i):i,_=0;(c=m[_])!=null;_++)!u&&c.nodeType===1&&h.cleanData(Oe(c)),c.parentNode&&(u&&Ri(c)&&zr(Oe(c,"script")),c.parentNode.removeChild(c));return i}h.extend({htmlPrefilter:function(i){return i},clone:function(i,o,u){var c,m,_,v,P=i.cloneNode(!0),S=Ri(i);if(!Z.noCloneChecked&&(i.nodeType===1||i.nodeType===11)&&!h.isXMLDoc(i))for(v=Oe(P),_=Oe(i),c=0,m=_.length;c<m;c++)yn(_[c],v[c]);if(o)if(u)for(_=_||Oe(i),v=v||Oe(P),c=0,m=_.length;c<m;c++)tr(_[c],v[c]);else tr(i,P);return v=Oe(P,"script"),v.length>0&&zr(v,!S&&Oe(i,"script")),P},cleanData:function(i){for(var o,u,c,m=h.event.special,_=0;(u=i[_])!==void 0;_++)if(Qe(u)){if(o=u[ht.expando]){if(o.events)for(c in o.events)m[c]?h.event.remove(u,c):h.removeEvent(u,c,o.handle);u[ht.expando]=void 0}u[$t.expando]&&(u[$t.expando]=void 0)}}}),h.fn.extend({detach:function(i){return xo(this,i,!0)},remove:function(i){return xo(this,i)},text:function(i){return fe(this,function(o){return o===void 0?h.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=o)})},null,i,arguments.length)},append:function(){return Ki(this,arguments,function(i){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=$n(this,i);o.appendChild(i)}})},prepend:function(){return Ki(this,arguments,function(i){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var o=$n(this,i);o.insertBefore(i,o.firstChild)}})},before:function(){return Ki(this,arguments,function(i){this.parentNode&&this.parentNode.insertBefore(i,this)})},after:function(){return Ki(this,arguments,function(i){this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling)})},empty:function(){for(var i,o=0;(i=this[o])!=null;o++)i.nodeType===1&&(h.cleanData(Oe(i,!1)),i.textContent="");return this},clone:function(i,o){return i=i==null?!1:i,o=o==null?i:o,this.map(function(){return h.clone(this,i,o)})},html:function(i){return fe(this,function(o){var u=this[0]||{},c=0,m=this.length;if(o===void 0&&u.nodeType===1)return u.innerHTML;if(typeof o=="string"&&!Jn.test(o)&&!we[(Nr.exec(o)||["",""])[1].toLowerCase()]){o=h.htmlPrefilter(o);try{for(;c<m;c++)u=this[c]||{},u.nodeType===1&&(h.cleanData(Oe(u,!1)),u.innerHTML=o);u=0}catch(_){}}u&&this.empty().append(o)},null,i,arguments.length)},replaceWith:function(){var i=[];return Ki(this,arguments,function(o){var u=this.parentNode;h.inArray(this,i)<0&&(h.cleanData(Oe(this)),u&&u.replaceChild(o,this))},i)}}),h.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(i,o){h.fn[i]=function(u){for(var c,m=[],_=h(u),v=_.length-1,P=0;P<=v;P++)c=P===v?this:this.clone(!0),h(_[P])[o](c),x.apply(m,c.get());return this.pushStack(m)}});var Hr=new RegExp("^("+gn+")(?!px)[a-z%]+$","i"),er=function(i){var o=i.ownerDocument.defaultView;return(!o||!o.opener)&&(o=a),o.getComputedStyle(i)},wo=function(i,o,u){var c,m,_={};for(m in o)_[m]=i.style[m],i.style[m]=o[m];c=u.call(i);for(m in o)i.style[m]=_[m];return c},ha=new RegExp(pi.join("|"),"i");(function(){function i(){if(!!z){S.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",z.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xi.appendChild(S).appendChild(z);var j=a.getComputedStyle(z);u=j.top!=="1%",P=o(j.marginLeft)===12,z.style.right="60%",_=o(j.right)===36,c=o(j.width)===36,z.style.position="absolute",m=o(z.offsetWidth/3)===12,xi.removeChild(S),z=null}}function o(j){return Math.round(parseFloat(j))}var u,c,m,_,v,P,S=D.createElement("div"),z=D.createElement("div");!z.style||(z.style.backgroundClip="content-box",z.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle=z.style.backgroundClip==="content-box",h.extend(Z,{boxSizingReliable:function(){return i(),c},pixelBoxStyles:function(){return i(),_},pixelPosition:function(){return i(),u},reliableMarginLeft:function(){return i(),P},scrollboxSize:function(){return i(),m},reliableTrDimensions:function(){var j,K,G,V;return v==null&&(j=D.createElement("table"),K=D.createElement("tr"),G=D.createElement("div"),j.style.cssText="position:absolute;left:-11111px;border-collapse:separate",K.style.cssText="border:1px solid",K.style.height="1px",G.style.height="9px",G.style.display="block",xi.appendChild(j).appendChild(K).appendChild(G),V=a.getComputedStyle(K),v=parseInt(V.height,10)+parseInt(V.borderTopWidth,10)+parseInt(V.borderBottomWidth,10)===K.offsetHeight,xi.removeChild(j)),v}}))})();function bn(i,o,u){var c,m,_,v,P=i.style;return u=u||er(i),u&&(v=u.getPropertyValue(o)||u[o],v===""&&!Ri(i)&&(v=h.style(i,o)),!Z.pixelBoxStyles()&&Hr.test(v)&&ha.test(o)&&(c=P.width,m=P.minWidth,_=P.maxWidth,P.minWidth=P.maxWidth=P.width=v,v=u.width,P.width=c,P.minWidth=m,P.maxWidth=_)),v!==void 0?v+"":v}function ir(i,o){return{get:function(){if(i()){delete this.get;return}return(this.get=o).apply(this,arguments)}}}var To=["Webkit","Moz","ms"],Lo=D.createElement("div").style,On={};function nr(i){for(var o=i[0].toUpperCase()+i.slice(1),u=To.length;u--;)if(i=To[u]+o,i in Lo)return i}function Oi(i){var o=h.cssProps[i]||On[i];return o||(i in Lo?i:On[i]=nr(i)||i)}var fa=/^(none|table(?!-c[ea]).+)/,Eo=/^--/,Zr={position:"absolute",visibility:"hidden",display:"block"},xn={letterSpacing:"0",fontWeight:"400"};function qr(i,o,u){var c=In.exec(o);return c?Math.max(0,c[2]-(u||0))+(c[3]||"px"):o}function rr(i,o,u,c,m,_){var v=o==="width"?1:0,P=0,S=0;if(u===(c?"border":"content"))return 0;for(;v<4;v+=2)u==="margin"&&(S+=h.css(i,u+pi[v],!0,m)),c?(u==="content"&&(S-=h.css(i,"padding"+pi[v],!0,m)),u!=="margin"&&(S-=h.css(i,"border"+pi[v]+"Width",!0,m))):(S+=h.css(i,"padding"+pi[v],!0,m),u!=="padding"?S+=h.css(i,"border"+pi[v]+"Width",!0,m):P+=h.css(i,"border"+pi[v]+"Width",!0,m));return!c&&_>=0&&(S+=Math.max(0,Math.ceil(i["offset"+o[0].toUpperCase()+o.slice(1)]-_-S-P-.5))||0),S}function wn(i,o,u){var c=er(i),m=!Z.boxSizingReliable()||u,_=m&&h.css(i,"boxSizing",!1,c)==="border-box",v=_,P=bn(i,o,c),S="offset"+o[0].toUpperCase()+o.slice(1);if(Hr.test(P)){if(!u)return P;P="auto"}return(!Z.boxSizingReliable()&&_||!Z.reliableTrDimensions()&&It(i,"tr")||P==="auto"||!parseFloat(P)&&h.css(i,"display",!1,c)==="inline")&&i.getClientRects().length&&(_=h.css(i,"boxSizing",!1,c)==="border-box",v=S in i,v&&(P=i[S])),P=parseFloat(P)||0,P+rr(i,o,u||(_?"border":"content"),v,c,P)+"px"}h.extend({cssHooks:{opacity:{get:function(i,o){if(o){var u=bn(i,"opacity");return u===""?"1":u}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(i,o,u,c){if(!(!i||i.nodeType===3||i.nodeType===8||!i.style)){var m,_,v,P=ye(o),S=Eo.test(o),z=i.style;if(S||(o=Oi(P)),v=h.cssHooks[o]||h.cssHooks[P],u!==void 0){if(_=typeof u,_==="string"&&(m=In.exec(u))&&m[1]&&(u=Ir(i,o,m),_="number"),u==null||u!==u)return;_==="number"&&!S&&(u+=m&&m[3]||(h.cssNumber[P]?"":"px")),!Z.clearCloneStyle&&u===""&&o.indexOf("background")===0&&(z[o]="inherit"),(!v||!("set"in v)||(u=v.set(i,u,c))!==void 0)&&(S?z.setProperty(o,u):z[o]=u)}else return v&&"get"in v&&(m=v.get(i,!1,c))!==void 0?m:z[o]}},css:function(i,o,u,c){var m,_,v,P=ye(o),S=Eo.test(o);return S||(o=Oi(P)),v=h.cssHooks[o]||h.cssHooks[P],v&&"get"in v&&(m=v.get(i,!0,u)),m===void 0&&(m=bn(i,o,c)),m==="normal"&&o in xn&&(m=xn[o]),u===""||u?(_=parseFloat(m),u===!0||isFinite(_)?_||0:m):m}}),h.each(["height","width"],function(i,o){h.cssHooks[o]={get:function(u,c,m){if(c)return fa.test(h.css(u,"display"))&&(!u.getClientRects().length||!u.getBoundingClientRect().width)?wo(u,Zr,function(){return wn(u,o,m)}):wn(u,o,m)},set:function(u,c,m){var _,v=er(u),P=!Z.scrollboxSize()&&v.position==="absolute",S=P||m,z=S&&h.css(u,"boxSizing",!1,v)==="border-box",j=m?rr(u,o,m,z,v):0;return z&&P&&(j-=Math.ceil(u["offset"+o[0].toUpperCase()+o.slice(1)]-parseFloat(v[o])-rr(u,o,"border",!1,v)-.5)),j&&(_=In.exec(c))&&(_[3]||"px")!=="px"&&(u.style[o]=c,c=h.css(u,o)),qr(u,c,j)}}}),h.cssHooks.marginLeft=ir(Z.reliableMarginLeft,function(i,o){if(o)return(parseFloat(bn(i,"marginLeft"))||i.getBoundingClientRect().left-wo(i,{marginLeft:0},function(){return i.getBoundingClientRect().left}))+"px"}),h.each({margin:"",padding:"",border:"Width"},function(i,o){h.cssHooks[i+o]={expand:function(u){for(var c=0,m={},_=typeof u=="string"?u.split(" "):[u];c<4;c++)m[i+pi[c]+o]=_[c]||_[c-2]||_[0];return m}},i!=="margin"&&(h.cssHooks[i+o].set=qr)}),h.fn.extend({css:function(i,o){return fe(this,function(u,c,m){var _,v,P={},S=0;if(Array.isArray(c)){for(_=er(u),v=c.length;S<v;S++)P[c[S]]=h.css(u,c[S],!1,_);return P}return m!==void 0?h.style(u,c,m):h.css(u,c)},i,o,arguments.length>1)}});function wt(i,o,u,c,m){return new wt.prototype.init(i,o,u,c,m)}h.Tween=wt,wt.prototype={constructor:wt,init:function(i,o,u,c,m,_){this.elem=i,this.prop=u,this.easing=m||h.easing._default,this.options=o,this.start=this.now=this.cur(),this.end=c,this.unit=_||(h.cssNumber[u]?"":"px")},cur:function(){var i=wt.propHooks[this.prop];return i&&i.get?i.get(this):wt.propHooks._default.get(this)},run:function(i){var o,u=wt.propHooks[this.prop];return this.options.duration?this.pos=o=h.easing[this.easing](i,this.options.duration*i,0,1,this.options.duration):this.pos=o=i,this.now=(this.end-this.start)*o+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),u&&u.set?u.set(this):wt.propHooks._default.set(this),this}},wt.prototype.init.prototype=wt.prototype,wt.propHooks={_default:{get:function(i){var o;return i.elem.nodeType!==1||i.elem[i.prop]!=null&&i.elem.style[i.prop]==null?i.elem[i.prop]:(o=h.css(i.elem,i.prop,""),!o||o==="auto"?0:o)},set:function(i){h.fx.step[i.prop]?h.fx.step[i.prop](i):i.elem.nodeType===1&&(h.cssHooks[i.prop]||i.elem.style[Oi(i.prop)]!=null)?h.style(i.elem,i.prop,i.now+i.unit):i.elem[i.prop]=i.now}}},wt.propHooks.scrollTop=wt.propHooks.scrollLeft={set:function(i){i.elem.nodeType&&i.elem.parentNode&&(i.elem[i.prop]=i.now)}},h.easing={linear:function(i){return i},swing:function(i){return .5-Math.cos(i*Math.PI)/2},_default:"swing"},h.fx=wt.prototype.init,h.fx.step={};var Xt,Ji,Tn=/^(?:toggle|show|hide)$/,Ln=/queueHooks$/;function Nn(){Ji&&(D.hidden===!1&&a.requestAnimationFrame?a.requestAnimationFrame(Nn):a.setTimeout(Nn,h.fx.interval),h.fx.tick())}function Pt(){return a.setTimeout(function(){Xt=void 0}),Xt=Date.now()}function te(i,o){var u,c=0,m={height:i};for(o=o?1:0;c<4;c+=2-o)u=pi[c],m["margin"+u]=m["padding"+u]=i;return o&&(m.opacity=m.width=i),m}function or(i,o,u){for(var c,m=(ii.tweeners[o]||[]).concat(ii.tweeners["*"]),_=0,v=m.length;_<v;_++)if(c=m[_].call(u,o,i))return c}function ar(i,o,u){var c,m,_,v,P,S,z,j,K="width"in o||"height"in o,G=this,V={},ot=i.style,Tt=i.nodeType&&Yi(i),ut=ht.get(i,"fxshow");u.queue||(v=h._queueHooks(i,"fx"),v.unqueued==null&&(v.unqueued=0,P=v.empty.fire,v.empty.fire=function(){v.unqueued||P()}),v.unqueued++,G.always(function(){G.always(function(){v.unqueued--,h.queue(i,"fx").length||v.empty.fire()})}));for(c in o)if(m=o[c],Tn.test(m)){if(delete o[c],_=_||m==="toggle",m===(Tt?"hide":"show"))if(m==="show"&&ut&&ut[c]!==void 0)Tt=!0;else continue;V[c]=ut&&ut[c]||h.style(i,c)}if(S=!h.isEmptyObject(o),!(!S&&h.isEmptyObject(V))){K&&i.nodeType===1&&(u.overflow=[ot.overflow,ot.overflowX,ot.overflowY],z=ut&&ut.display,z==null&&(z=ht.get(i,"display")),j=h.css(i,"display"),j==="none"&&(z?j=z:(Mi([i],!0),z=i.style.display||z,j=h.css(i,"display"),Mi([i]))),(j==="inline"||j==="inline-block"&&z!=null)&&h.css(i,"float")==="none"&&(S||(G.done(function(){ot.display=z}),z==null&&(j=ot.display,z=j==="none"?"":j)),ot.display="inline-block")),u.overflow&&(ot.overflow="hidden",G.always(function(){ot.overflow=u.overflow[0],ot.overflowX=u.overflow[1],ot.overflowY=u.overflow[2]})),S=!1;for(c in V)S||(ut?"hidden"in ut&&(Tt=ut.hidden):ut=ht.access(i,"fxshow",{display:z}),_&&(ut.hidden=!Tt),Tt&&Mi([i],!0),G.done(function(){Tt||Mi([i]),ht.remove(i,"fxshow");for(c in V)h.style(i,c,V[c])})),S=or(Tt?ut[c]:0,c,G),c in ut||(ut[c]=S.start,Tt&&(S.end=S.start,S.start=0))}}function Xe(i,o){var u,c,m,_,v;for(u in i)if(c=ye(u),m=o[c],_=i[u],Array.isArray(_)&&(m=_[1],_=i[u]=_[0]),u!==c&&(i[c]=_,delete i[u]),v=h.cssHooks[c],v&&"expand"in v){_=v.expand(_),delete i[c];for(u in _)u in i||(i[u]=_[u],o[u]=m)}else o[c]=m}function ii(i,o,u){var c,m,_=0,v=ii.prefilters.length,P=h.Deferred().always(function(){delete S.elem}),S=function(){if(m)return!1;for(var K=Xt||Pt(),G=Math.max(0,z.startTime+z.duration-K),V=G/z.duration||0,ot=1-V,Tt=0,ut=z.tweens.length;Tt<ut;Tt++)z.tweens[Tt].run(ot);return P.notifyWith(i,[z,ot,G]),ot<1&&ut?G:(ut||P.notifyWith(i,[z,1,0]),P.resolveWith(i,[z]),!1)},z=P.promise({elem:i,props:h.extend({},o),opts:h.extend(!0,{specialEasing:{},easing:h.easing._default},u),originalProperties:o,originalOptions:u,startTime:Xt||Pt(),duration:u.duration,tweens:[],createTween:function(K,G){var V=h.Tween(i,z.opts,K,G,z.opts.specialEasing[K]||z.opts.easing);return z.tweens.push(V),V},stop:function(K){var G=0,V=K?z.tweens.length:0;if(m)return this;for(m=!0;G<V;G++)z.tweens[G].run(1);return K?(P.notifyWith(i,[z,1,0]),P.resolveWith(i,[z,K])):P.rejectWith(i,[z,K]),this}}),j=z.props;for(Xe(j,z.opts.specialEasing);_<v;_++)if(c=ii.prefilters[_].call(z,i,j,z.opts),c)return M(c.stop)&&(h._queueHooks(z.elem,z.opts.queue).stop=c.stop.bind(c)),c;return h.map(j,or,z),M(z.opts.start)&&z.opts.start.call(i,z),z.progress(z.opts.progress).done(z.opts.done,z.opts.complete).fail(z.opts.fail).always(z.opts.always),h.fx.timer(h.extend(S,{elem:i,anim:z,queue:z.opts.queue})),z}h.Animation=h.extend(ii,{tweeners:{"*":[function(i,o){var u=this.createTween(i,o);return Ir(u.elem,i,In.exec(o),u),u}]},tweener:function(i,o){M(i)?(o=i,i=["*"]):i=i.match(Et);for(var u,c=0,m=i.length;c<m;c++)u=i[c],ii.tweeners[u]=ii.tweeners[u]||[],ii.tweeners[u].unshift(o)},prefilters:[ar],prefilter:function(i,o){o?ii.prefilters.unshift(i):ii.prefilters.push(i)}}),h.speed=function(i,o,u){var c=i&&typeof i=="object"?h.extend({},i):{complete:u||!u&&o||M(i)&&i,duration:i,easing:u&&o||o&&!M(o)&&o};return h.fx.off?c.duration=0:typeof c.duration!="number"&&(c.duration in h.fx.speeds?c.duration=h.fx.speeds[c.duration]:c.duration=h.fx.speeds._default),(c.queue==null||c.queue===!0)&&(c.queue="fx"),c.old=c.complete,c.complete=function(){M(c.old)&&c.old.call(this),c.queue&&h.dequeue(this,c.queue)},c},h.fn.extend({fadeTo:function(i,o,u,c){return this.filter(Yi).css("opacity",0).show().end().animate({opacity:o},i,u,c)},animate:function(i,o,u,c){var m=h.isEmptyObject(i),_=h.speed(o,u,c),v=function(){var P=ii(this,h.extend({},i),_);(m||ht.get(this,"finish"))&&P.stop(!0)};return v.finish=v,m||_.queue===!1?this.each(v):this.queue(_.queue,v)},stop:function(i,o,u){var c=function(m){var _=m.stop;delete m.stop,_(u)};return typeof i!="string"&&(u=o,o=i,i=void 0),o&&this.queue(i||"fx",[]),this.each(function(){var m=!0,_=i!=null&&i+"queueHooks",v=h.timers,P=ht.get(this);if(_)P[_]&&P[_].stop&&c(P[_]);else for(_ in P)P[_]&&P[_].stop&&Ln.test(_)&&c(P[_]);for(_=v.length;_--;)v[_].elem===this&&(i==null||v[_].queue===i)&&(v[_].anim.stop(u),m=!1,v.splice(_,1));(m||!u)&&h.dequeue(this,i)})},finish:function(i){return i!==!1&&(i=i||"fx"),this.each(function(){var o,u=ht.get(this),c=u[i+"queue"],m=u[i+"queueHooks"],_=h.timers,v=c?c.length:0;for(u.finish=!0,h.queue(this,i,[]),m&&m.stop&&m.stop.call(this,!0),o=_.length;o--;)_[o].elem===this&&_[o].queue===i&&(_[o].anim.stop(!0),_.splice(o,1));for(o=0;o<v;o++)c[o]&&c[o].finish&&c[o].finish.call(this);delete u.finish})}}),h.each(["toggle","show","hide"],function(i,o){var u=h.fn[o];h.fn[o]=function(c,m,_){return c==null||typeof c=="boolean"?u.apply(this,arguments):this.animate(te(o,!0),c,m,_)}}),h.each({slideDown:te("show"),slideUp:te("hide"),slideToggle:te("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(i,o){h.fn[i]=function(u,c,m){return this.animate(o,u,c,m)}}),h.timers=[],h.fx.tick=function(){var i,o=0,u=h.timers;for(Xt=Date.now();o<u.length;o++)i=u[o],!i()&&u[o]===i&&u.splice(o--,1);u.length||h.fx.stop(),Xt=void 0},h.fx.timer=function(i){h.timers.push(i),h.fx.start()},h.fx.interval=13,h.fx.start=function(){Ji||(Ji=!0,Nn())},h.fx.stop=function(){Ji=null},h.fx.speeds={slow:600,fast:200,_default:400},h.fn.delay=function(i,o){return i=h.fx&&h.fx.speeds[i]||i,o=o||"fx",this.queue(o,function(u,c){var m=a.setTimeout(u,i);c.stop=function(){a.clearTimeout(m)}})},function(){var i=D.createElement("input"),o=D.createElement("select"),u=o.appendChild(D.createElement("option"));i.type="checkbox",Z.checkOn=i.value!=="",Z.optSelected=u.selected,i=D.createElement("input"),i.value="t",i.type="radio",Z.radioValue=i.value==="t"}();var zn,ni=h.expr.attrHandle;h.fn.extend({attr:function(i,o){return fe(this,h.attr,i,o,arguments.length>1)},removeAttr:function(i){return this.each(function(){h.removeAttr(this,i)})}}),h.extend({attr:function(i,o,u){var c,m,_=i.nodeType;if(!(_===3||_===8||_===2)){if(typeof i.getAttribute=="undefined")return h.prop(i,o,u);if((_!==1||!h.isXMLDoc(i))&&(m=h.attrHooks[o.toLowerCase()]||(h.expr.match.bool.test(o)?zn:void 0)),u!==void 0){if(u===null){h.removeAttr(i,o);return}return m&&"set"in m&&(c=m.set(i,u,o))!==void 0?c:(i.setAttribute(o,u+""),u)}return m&&"get"in m&&(c=m.get(i,o))!==null?c:(c=h.find.attr(i,o),c==null?void 0:c)}},attrHooks:{type:{set:function(i,o){if(!Z.radioValue&&o==="radio"&&It(i,"input")){var u=i.value;return i.setAttribute("type",o),u&&(i.value=u),o}}}},removeAttr:function(i,o){var u,c=0,m=o&&o.match(Et);if(m&&i.nodeType===1)for(;u=m[c++];)i.removeAttribute(u)}}),zn={set:function(i,o,u){return o===!1?h.removeAttr(i,u):i.setAttribute(u,u),u}},h.each(h.expr.match.bool.source.match(/\w+/g),function(i,o){var u=ni[o]||h.find.attr;ni[o]=function(c,m,_){var v,P,S=m.toLowerCase();return _||(P=ni[S],ni[S]=v,v=u(c,m,_)!=null?S:null,ni[S]=P),v}});var de=/^(?:input|select|textarea|button)$/i,Ni=/^(?:a|area)$/i;h.fn.extend({prop:function(i,o){return fe(this,h.prop,i,o,arguments.length>1)},removeProp:function(i){return this.each(function(){delete this[h.propFix[i]||i]})}}),h.extend({prop:function(i,o,u){var c,m,_=i.nodeType;if(!(_===3||_===8||_===2))return(_!==1||!h.isXMLDoc(i))&&(o=h.propFix[o]||o,m=h.propHooks[o]),u!==void 0?m&&"set"in m&&(c=m.set(i,u,o))!==void 0?c:i[o]=u:m&&"get"in m&&(c=m.get(i,o))!==null?c:i[o]},propHooks:{tabIndex:{get:function(i){var o=h.find.attr(i,"tabindex");return o?parseInt(o,10):de.test(i.nodeName)||Ni.test(i.nodeName)&&i.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),Z.optSelected||(h.propHooks.selected={get:function(i){var o=i.parentNode;return o&&o.parentNode&&o.parentNode.selectedIndex,null},set:function(i){var o=i.parentNode;o&&(o.selectedIndex,o.parentNode&&o.parentNode.selectedIndex)}}),h.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){h.propFix[this.toLowerCase()]=this});function ri(i){var o=i.match(Et)||[];return o.join(" ")}function oi(i){return i.getAttribute&&i.getAttribute("class")||""}function Bn(i){return Array.isArray(i)?i:typeof i=="string"?i.match(Et)||[]:[]}h.fn.extend({addClass:function(i){var o,u,c,m,_,v,P,S=0;if(M(i))return this.each(function(z){h(this).addClass(i.call(this,z,oi(this)))});if(o=Bn(i),o.length){for(;u=this[S++];)if(m=oi(u),c=u.nodeType===1&&" "+ri(m)+" ",c){for(v=0;_=o[v++];)c.indexOf(" "+_+" ")<0&&(c+=_+" ");P=ri(c),m!==P&&u.setAttribute("class",P)}}return this},removeClass:function(i){var o,u,c,m,_,v,P,S=0;if(M(i))return this.each(function(z){h(this).removeClass(i.call(this,z,oi(this)))});if(!arguments.length)return this.attr("class","");if(o=Bn(i),o.length){for(;u=this[S++];)if(m=oi(u),c=u.nodeType===1&&" "+ri(m)+" ",c){for(v=0;_=o[v++];)for(;c.indexOf(" "+_+" ")>-1;)c=c.replace(" "+_+" "," ");P=ri(c),m!==P&&u.setAttribute("class",P)}}return this},toggleClass:function(i,o){var u=typeof i,c=u==="string"||Array.isArray(i);return typeof o=="boolean"&&c?o?this.addClass(i):this.removeClass(i):M(i)?this.each(function(m){h(this).toggleClass(i.call(this,m,oi(this),o),o)}):this.each(function(){var m,_,v,P;if(c)for(_=0,v=h(this),P=Bn(i);m=P[_++];)v.hasClass(m)?v.removeClass(m):v.addClass(m);else(i===void 0||u==="boolean")&&(m=oi(this),m&&ht.set(this,"__className__",m),this.setAttribute&&this.setAttribute("class",m||i===!1?"":ht.get(this,"__className__")||""))})},hasClass:function(i){var o,u,c=0;for(o=" "+i+" ";u=this[c++];)if(u.nodeType===1&&(" "+ri(oi(u))+" ").indexOf(o)>-1)return!0;return!1}});var Fn=/\r/g;h.fn.extend({val:function(i){var o,u,c,m=this[0];return arguments.length?(c=M(i),this.each(function(_){var v;this.nodeType===1&&(c?v=i.call(this,_,h(this).val()):v=i,v==null?v="":typeof v=="number"?v+="":Array.isArray(v)&&(v=h.map(v,function(P){return P==null?"":P+""})),o=h.valHooks[this.type]||h.valHooks[this.nodeName.toLowerCase()],(!o||!("set"in o)||o.set(this,v,"value")===void 0)&&(this.value=v))})):m?(o=h.valHooks[m.type]||h.valHooks[m.nodeName.toLowerCase()],o&&"get"in o&&(u=o.get(m,"value"))!==void 0?u:(u=m.value,typeof u=="string"?u.replace(Fn,""):u==null?"":u)):void 0}}),h.extend({valHooks:{option:{get:function(i){var o=h.find.attr(i,"value");return o!=null?o:ri(h.text(i))}},select:{get:function(i){var o,u,c,m=i.options,_=i.selectedIndex,v=i.type==="select-one",P=v?null:[],S=v?_+1:m.length;for(_<0?c=S:c=v?_:0;c<S;c++)if(u=m[c],(u.selected||c===_)&&!u.disabled&&(!u.parentNode.disabled||!It(u.parentNode,"optgroup"))){if(o=h(u).val(),v)return o;P.push(o)}return P},set:function(i,o){for(var u,c,m=i.options,_=h.makeArray(o),v=m.length;v--;)c=m[v],(c.selected=h.inArray(h.valHooks.option.get(c),_)>-1)&&(u=!0);return u||(i.selectedIndex=-1),_}}}}),h.each(["radio","checkbox"],function(){h.valHooks[this]={set:function(i,o){if(Array.isArray(o))return i.checked=h.inArray(h(i).val(),o)>-1}},Z.checkOn||(h.valHooks[this].get=function(i){return i.getAttribute("value")===null?"on":i.value})}),Z.focusin="onfocusin"in a;var sr=/^(?:focusinfocus|focusoutblur)$/,lr=function(i){i.stopPropagation()};h.extend(h.event,{trigger:function(i,o,u,c){var m,_,v,P,S,z,j,K,G=[u||D],V=A.call(i,"type")?i.type:i,ot=A.call(i,"namespace")?i.namespace.split("."):[];if(_=K=v=u=u||D,!(u.nodeType===3||u.nodeType===8)&&!sr.test(V+h.event.triggered)&&(V.indexOf(".")>-1&&(ot=V.split("."),V=ot.shift(),ot.sort()),S=V.indexOf(":")<0&&"on"+V,i=i[h.expando]?i:new h.Event(V,typeof i=="object"&&i),i.isTrigger=c?2:3,i.namespace=ot.join("."),i.rnamespace=i.namespace?new RegExp("(^|\\.)"+ot.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,i.result=void 0,i.target||(i.target=u),o=o==null?[i]:h.makeArray(o,[i]),j=h.event.special[V]||{},!(!c&&j.trigger&&j.trigger.apply(u,o)===!1))){if(!c&&!j.noBubble&&!I(u)){for(P=j.delegateType||V,sr.test(P+V)||(_=_.parentNode);_;_=_.parentNode)G.push(_),v=_;v===(u.ownerDocument||D)&&G.push(v.defaultView||v.parentWindow||a)}for(m=0;(_=G[m++])&&!i.isPropagationStopped();)K=_,i.type=m>1?P:j.bindType||V,z=(ht.get(_,"events")||Object.create(null))[i.type]&&ht.get(_,"handle"),z&&z.apply(_,o),z=S&&_[S],z&&z.apply&&Qe(_)&&(i.result=z.apply(_,o),i.result===!1&&i.preventDefault());return i.type=V,!c&&!i.isDefaultPrevented()&&(!j._default||j._default.apply(G.pop(),o)===!1)&&Qe(u)&&S&&M(u[V])&&!I(u)&&(v=u[S],v&&(u[S]=null),h.event.triggered=V,i.isPropagationStopped()&&K.addEventListener(V,lr),u[V](),i.isPropagationStopped()&&K.removeEventListener(V,lr),h.event.triggered=void 0,v&&(u[S]=v)),i.result}},simulate:function(i,o,u){var c=h.extend(new h.Event,u,{type:i,isSimulated:!0});h.event.trigger(c,null,o)}}),h.fn.extend({trigger:function(i,o){return this.each(function(){h.event.trigger(i,o,this)})},triggerHandler:function(i,o){var u=this[0];if(u)return h.event.trigger(i,o,u,!0)}}),Z.focusin||h.each({focus:"focusin",blur:"focusout"},function(i,o){var u=function(c){h.event.simulate(o,c.target,h.event.fix(c))};h.event.special[o]={setup:function(){var c=this.ownerDocument||this.document||this,m=ht.access(c,o);m||c.addEventListener(i,u,!0),ht.access(c,o,(m||0)+1)},teardown:function(){var c=this.ownerDocument||this.document||this,m=ht.access(c,o)-1;m?ht.access(c,o,m):(c.removeEventListener(i,u,!0),ht.remove(c,o))}}});var zi=a.location,ur={guid:Date.now()},Hn=/\?/;h.parseXML=function(i){var o,u;if(!i||typeof i!="string")return null;try{o=new a.DOMParser().parseFromString(i,"text/xml")}catch(c){}return u=o&&o.getElementsByTagName("parsererror")[0],(!o||u)&&h.error("Invalid XML: "+(u?h.map(u.childNodes,function(c){return c.textContent}).join(`
`):i)),o};var cr=/\[\]$/,Ur=/\r?\n/g,Gr=/^(?:submit|button|image|reset|file)$/i,da=/^(?:input|select|textarea|keygen)/i;function St(i,o,u,c){var m;if(Array.isArray(o))h.each(o,function(_,v){u||cr.test(i)?c(i,v):St(i+"["+(typeof v=="object"&&v!=null?_:"")+"]",v,u,c)});else if(!u&&Y(o)==="object")for(m in o)St(i+"["+m+"]",o[m],u,c);else c(i,o)}h.param=function(i,o){var u,c=[],m=function(_,v){var P=M(v)?v():v;c[c.length]=encodeURIComponent(_)+"="+encodeURIComponent(P==null?"":P)};if(i==null)return"";if(Array.isArray(i)||i.jquery&&!h.isPlainObject(i))h.each(i,function(){m(this.name,this.value)});else for(u in i)St(u,i[u],o,m);return c.join("&")},h.fn.extend({serialize:function(){return h.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var i=h.prop(this,"elements");return i?h.makeArray(i):this}).filter(function(){var i=this.type;return this.name&&!h(this).is(":disabled")&&da.test(this.nodeName)&&!Gr.test(i)&&(this.checked||!Vi.test(i))}).map(function(i,o){var u=h(this).val();return u==null?null:Array.isArray(u)?h.map(u,function(c){return{name:o.name,value:c.replace(Ur,`\r
`)}}):{name:o.name,value:u.replace(Ur,`\r
`)}}).get()}});var ai=/%20/g,se=/#.*$/,Po=/([?&])_=[^&]*/,jr=/^(.*?):[ \t]*([^\r\n]*)$/mg,hr=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Wr=/^(?:GET|HEAD)$/,$i=/^\/\//,fr={},tn={},Ge="*/".concat("*"),si=D.createElement("a");si.href=zi.href;function Yr(i){return function(o,u){typeof o!="string"&&(u=o,o="*");var c,m=0,_=o.toLowerCase().match(Et)||[];if(M(u))for(;c=_[m++];)c[0]==="+"?(c=c.slice(1)||"*",(i[c]=i[c]||[]).unshift(u)):(i[c]=i[c]||[]).push(u)}}function ko(i,o,u,c){var m={},_=i===tn;function v(P){var S;return m[P]=!0,h.each(i[P]||[],function(z,j){var K=j(o,u,c);if(typeof K=="string"&&!_&&!m[K])return o.dataTypes.unshift(K),v(K),!1;if(_)return!(S=K)}),S}return v(o.dataTypes[0])||!m["*"]&&v("*")}function dr(i,o){var u,c,m=h.ajaxSettings.flatOptions||{};for(u in o)o[u]!==void 0&&((m[u]?i:c||(c={}))[u]=o[u]);return c&&h.extend(!0,i,c),i}function Vr(i,o,u){for(var c,m,_,v,P=i.contents,S=i.dataTypes;S[0]==="*";)S.shift(),c===void 0&&(c=i.mimeType||o.getResponseHeader("Content-Type"));if(c){for(m in P)if(P[m]&&P[m].test(c)){S.unshift(m);break}}if(S[0]in u)_=S[0];else{for(m in u){if(!S[0]||i.converters[m+" "+S[0]]){_=m;break}v||(v=m)}_=_||v}if(_)return _!==S[0]&&S.unshift(_),u[_]}function Qr(i,o,u,c){var m,_,v,P,S,z={},j=i.dataTypes.slice();if(j[1])for(v in i.converters)z[v.toLowerCase()]=i.converters[v];for(_=j.shift();_;)if(i.responseFields[_]&&(u[i.responseFields[_]]=o),!S&&c&&i.dataFilter&&(o=i.dataFilter(o,i.dataType)),S=_,_=j.shift(),_){if(_==="*")_=S;else if(S!=="*"&&S!==_){if(v=z[S+" "+_]||z["* "+_],!v){for(m in z)if(P=m.split(" "),P[1]===_&&(v=z[S+" "+P[0]]||z["* "+P[0]],v)){v===!0?v=z[m]:z[m]!==!0&&(_=P[0],j.unshift(P[1]));break}}if(v!==!0)if(v&&i.throws)o=v(o);else try{o=v(o)}catch(K){return{state:"parsererror",error:v?K:"No conversion from "+S+" to "+_}}}}return{state:"success",data:o}}h.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zi.href,type:"GET",isLocal:hr.test(zi.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ge,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":h.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(i,o){return o?dr(dr(i,h.ajaxSettings),o):dr(h.ajaxSettings,i)},ajaxPrefilter:Yr(fr),ajaxTransport:Yr(tn),ajax:function(i,o){typeof i=="object"&&(o=i,i=void 0),o=o||{};var u,c,m,_,v,P,S,z,j,K,G=h.ajaxSetup({},o),V=G.context||G,ot=G.context&&(V.nodeType||V.jquery)?h(V):h.event,Tt=h.Deferred(),ut=h.Callbacks("once memory"),_e=G.statusCode||{},pe={},Ae={},Kt="canceled",yt={readyState:0,getResponseHeader:function(Dt){var jt;if(S){if(!_)for(_={};jt=jr.exec(m);)_[jt[1].toLowerCase()+" "]=(_[jt[1].toLowerCase()+" "]||[]).concat(jt[2]);jt=_[Dt.toLowerCase()+" "]}return jt==null?null:jt.join(", ")},getAllResponseHeaders:function(){return S?m:null},setRequestHeader:function(Dt,jt){return S==null&&(Dt=Ae[Dt.toLowerCase()]=Ae[Dt.toLowerCase()]||Dt,pe[Dt]=jt),this},overrideMimeType:function(Dt){return S==null&&(G.mimeType=Dt),this},statusCode:function(Dt){var jt;if(Dt)if(S)yt.always(Dt[yt.status]);else for(jt in Dt)_e[jt]=[_e[jt],Dt[jt]];return this},abort:function(Dt){var jt=Dt||Kt;return u&&u.abort(jt),Re(0,jt),this}};if(Tt.promise(yt),G.url=((i||G.url||zi.href)+"").replace($i,zi.protocol+"//"),G.type=o.method||o.type||G.method||G.type,G.dataTypes=(G.dataType||"*").toLowerCase().match(Et)||[""],G.crossDomain==null){P=D.createElement("a");try{P.href=G.url,P.href=P.href,G.crossDomain=si.protocol+"//"+si.host!=P.protocol+"//"+P.host}catch(Dt){G.crossDomain=!0}}if(G.data&&G.processData&&typeof G.data!="string"&&(G.data=h.param(G.data,G.traditional)),ko(fr,G,o,yt),S)return yt;z=h.event&&G.global,z&&h.active++==0&&h.event.trigger("ajaxStart"),G.type=G.type.toUpperCase(),G.hasContent=!Wr.test(G.type),c=G.url.replace(se,""),G.hasContent?G.data&&G.processData&&(G.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(G.data=G.data.replace(ai,"+")):(K=G.url.slice(c.length),G.data&&(G.processData||typeof G.data=="string")&&(c+=(Hn.test(c)?"&":"?")+G.data,delete G.data),G.cache===!1&&(c=c.replace(Po,"$1"),K=(Hn.test(c)?"&":"?")+"_="+ur.guid+++K),G.url=c+K),G.ifModified&&(h.lastModified[c]&&yt.setRequestHeader("If-Modified-Since",h.lastModified[c]),h.etag[c]&&yt.setRequestHeader("If-None-Match",h.etag[c])),(G.data&&G.hasContent&&G.contentType!==!1||o.contentType)&&yt.setRequestHeader("Content-Type",G.contentType),yt.setRequestHeader("Accept",G.dataTypes[0]&&G.accepts[G.dataTypes[0]]?G.accepts[G.dataTypes[0]]+(G.dataTypes[0]!=="*"?", "+Ge+"; q=0.01":""):G.accepts["*"]);for(j in G.headers)yt.setRequestHeader(j,G.headers[j]);if(G.beforeSend&&(G.beforeSend.call(V,yt,G)===!1||S))return yt.abort();if(Kt="abort",ut.add(G.complete),yt.done(G.success),yt.fail(G.error),u=ko(tn,G,o,yt),!u)Re(-1,"No Transport");else{if(yt.readyState=1,z&&ot.trigger("ajaxSend",[yt,G]),S)return yt;G.async&&G.timeout>0&&(v=a.setTimeout(function(){yt.abort("timeout")},G.timeout));try{S=!1,u.send(pe,Re)}catch(Dt){if(S)throw Dt;Re(-1,Dt)}}function Re(Dt,jt,Zn,Fi){var le,Hi,en,Me,Zi,Ne=jt;S||(S=!0,v&&a.clearTimeout(v),u=void 0,m=Fi||"",yt.readyState=Dt>0?4:0,le=Dt>=200&&Dt<300||Dt===304,Zn&&(Me=Vr(G,yt,Zn)),!le&&h.inArray("script",G.dataTypes)>-1&&h.inArray("json",G.dataTypes)<0&&(G.converters["text script"]=function(){}),Me=Qr(G,Me,yt,le),le?(G.ifModified&&(Zi=yt.getResponseHeader("Last-Modified"),Zi&&(h.lastModified[c]=Zi),Zi=yt.getResponseHeader("etag"),Zi&&(h.etag[c]=Zi)),Dt===204||G.type==="HEAD"?Ne="nocontent":Dt===304?Ne="notmodified":(Ne=Me.state,Hi=Me.data,en=Me.error,le=!en)):(en=Ne,(Dt||!Ne)&&(Ne="error",Dt<0&&(Dt=0))),yt.status=Dt,yt.statusText=(jt||Ne)+"",le?Tt.resolveWith(V,[Hi,Ne,yt]):Tt.rejectWith(V,[yt,Ne,en]),yt.statusCode(_e),_e=void 0,z&&ot.trigger(le?"ajaxSuccess":"ajaxError",[yt,G,le?Hi:en]),ut.fireWith(V,[yt,Ne]),z&&(ot.trigger("ajaxComplete",[yt,G]),--h.active||h.event.trigger("ajaxStop")))}return yt},getJSON:function(i,o,u){return h.get(i,o,u,"json")},getScript:function(i,o){return h.get(i,void 0,o,"script")}}),h.each(["get","post"],function(i,o){h[o]=function(u,c,m,_){return M(c)&&(_=_||m,m=c,c=void 0),h.ajax(h.extend({url:u,type:o,dataType:_,data:c,success:m},h.isPlainObject(u)&&u))}}),h.ajaxPrefilter(function(i){var o;for(o in i.headers)o.toLowerCase()==="content-type"&&(i.contentType=i.headers[o]||"")}),h._evalUrl=function(i,o,u){return h.ajax({url:i,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(c){h.globalEval(c,o,u)}})},h.fn.extend({wrapAll:function(i){var o;return this[0]&&(M(i)&&(i=i.call(this[0])),o=h(i,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&o.insertBefore(this[0]),o.map(function(){for(var u=this;u.firstElementChild;)u=u.firstElementChild;return u}).append(this)),this},wrapInner:function(i){return M(i)?this.each(function(o){h(this).wrapInner(i.call(this,o))}):this.each(function(){var o=h(this),u=o.contents();u.length?u.wrapAll(i):o.append(i)})},wrap:function(i){var o=M(i);return this.each(function(u){h(this).wrapAll(o?i.call(this,u):i)})},unwrap:function(i){return this.parent(i).not("body").each(function(){h(this).replaceWith(this.childNodes)}),this}}),h.expr.pseudos.hidden=function(i){return!h.expr.pseudos.visible(i)},h.expr.pseudos.visible=function(i){return!!(i.offsetWidth||i.offsetHeight||i.getClientRects().length)},h.ajaxSettings.xhr=function(){try{return new a.XMLHttpRequest}catch(i){}};var Xr={0:200,1223:204},Bi=h.ajaxSettings.xhr();Z.cors=!!Bi&&"withCredentials"in Bi,Z.ajax=Bi=!!Bi,h.ajaxTransport(function(i){var o,u;if(Z.cors||Bi&&!i.crossDomain)return{send:function(c,m){var _,v=i.xhr();if(v.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(_ in i.xhrFields)v[_]=i.xhrFields[_];i.mimeType&&v.overrideMimeType&&v.overrideMimeType(i.mimeType),!i.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(_ in c)v.setRequestHeader(_,c[_]);o=function(P){return function(){o&&(o=u=v.onload=v.onerror=v.onabort=v.ontimeout=v.onreadystatechange=null,P==="abort"?v.abort():P==="error"?typeof v.status!="number"?m(0,"error"):m(v.status,v.statusText):m(Xr[v.status]||v.status,v.statusText,(v.responseType||"text")!=="text"||typeof v.responseText!="string"?{binary:v.response}:{text:v.responseText},v.getAllResponseHeaders()))}},v.onload=o(),u=v.onerror=v.ontimeout=o("error"),v.onabort!==void 0?v.onabort=u:v.onreadystatechange=function(){v.readyState===4&&a.setTimeout(function(){o&&u()})},o=o("abort");try{v.send(i.hasContent&&i.data||null)}catch(P){if(o)throw P}},abort:function(){o&&o()}}}),h.ajaxPrefilter(function(i){i.crossDomain&&(i.contents.script=!1)}),h.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(i){return h.globalEval(i),i}}}),h.ajaxPrefilter("script",function(i){i.cache===void 0&&(i.cache=!1),i.crossDomain&&(i.type="GET")}),h.ajaxTransport("script",function(i){if(i.crossDomain||i.scriptAttrs){var o,u;return{send:function(c,m){o=h("<script>").attr(i.scriptAttrs||{}).prop({charset:i.scriptCharset,src:i.url}).on("load error",u=function(_){o.remove(),u=null,_&&m(_.type==="error"?404:200,_.type)}),D.head.appendChild(o[0])},abort:function(){u&&u()}}}});var So=[],pr=/(=)\?(?=&|$)|\?\?/;h.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var i=So.pop()||h.expando+"_"+ur.guid++;return this[i]=!0,i}}),h.ajaxPrefilter("json jsonp",function(i,o,u){var c,m,_,v=i.jsonp!==!1&&(pr.test(i.url)?"url":typeof i.data=="string"&&(i.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&pr.test(i.data)&&"data");if(v||i.dataTypes[0]==="jsonp")return c=i.jsonpCallback=M(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,v?i[v]=i[v].replace(pr,"$1"+c):i.jsonp!==!1&&(i.url+=(Hn.test(i.url)?"&":"?")+i.jsonp+"="+c),i.converters["script json"]=function(){return _||h.error(c+" was not called"),_[0]},i.dataTypes[0]="json",m=a[c],a[c]=function(){_=arguments},u.always(function(){m===void 0?h(a).removeProp(c):a[c]=m,i[c]&&(i.jsonpCallback=o.jsonpCallback,So.push(c)),_&&M(m)&&m(_[0]),_=m=void 0}),"script"}),Z.createHTMLDocument=function(){var i=D.implementation.createHTMLDocument("").body;return i.innerHTML="<form></form><form></form>",i.childNodes.length===2}(),h.parseHTML=function(i,o,u){if(typeof i!="string")return[];typeof o=="boolean"&&(u=o,o=!1);var c,m,_;return o||(Z.createHTMLDocument?(o=D.implementation.createHTMLDocument(""),c=o.createElement("base"),c.href=D.location.href,o.head.appendChild(c)):o=D),m=Ut.exec(i),_=!u&&[],m?[o.createElement(m[1])]:(m=ti([i],o,_),_&&_.length&&h(_).remove(),h.merge([],m.childNodes))},h.fn.load=function(i,o,u){var c,m,_,v=this,P=i.indexOf(" ");return P>-1&&(c=ri(i.slice(P)),i=i.slice(0,P)),M(o)?(u=o,o=void 0):o&&typeof o=="object"&&(m="POST"),v.length>0&&h.ajax({url:i,type:m||"GET",dataType:"html",data:o}).done(function(S){_=arguments,v.html(c?h("<div>").append(h.parseHTML(S)).find(c):S)}).always(u&&function(S,z){v.each(function(){u.apply(this,_||[S.responseText,z,S])})}),this},h.expr.pseudos.animated=function(i){return h.grep(h.timers,function(o){return i===o.elem}).length},h.offset={setOffset:function(i,o,u){var c,m,_,v,P,S,z,j=h.css(i,"position"),K=h(i),G={};j==="static"&&(i.style.position="relative"),P=K.offset(),_=h.css(i,"top"),S=h.css(i,"left"),z=(j==="absolute"||j==="fixed")&&(_+S).indexOf("auto")>-1,z?(c=K.position(),v=c.top,m=c.left):(v=parseFloat(_)||0,m=parseFloat(S)||0),M(o)&&(o=o.call(i,u,h.extend({},P))),o.top!=null&&(G.top=o.top-P.top+v),o.left!=null&&(G.left=o.left-P.left+m),"using"in o?o.using.call(i,G):K.css(G)}},h.fn.extend({offset:function(i){if(arguments.length)return i===void 0?this:this.each(function(m){h.offset.setOffset(this,i,m)});var o,u,c=this[0];if(!!c)return c.getClientRects().length?(o=c.getBoundingClientRect(),u=c.ownerDocument.defaultView,{top:o.top+u.pageYOffset,left:o.left+u.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var i,o,u,c=this[0],m={top:0,left:0};if(h.css(c,"position")==="fixed")o=c.getBoundingClientRect();else{for(o=this.offset(),u=c.ownerDocument,i=c.offsetParent||u.documentElement;i&&(i===u.body||i===u.documentElement)&&h.css(i,"position")==="static";)i=i.parentNode;i&&i!==c&&i.nodeType===1&&(m=h(i).offset(),m.top+=h.css(i,"borderTopWidth",!0),m.left+=h.css(i,"borderLeftWidth",!0))}return{top:o.top-m.top-h.css(c,"marginTop",!0),left:o.left-m.left-h.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var i=this.offsetParent;i&&h.css(i,"position")==="static";)i=i.offsetParent;return i||xi})}}),h.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(i,o){var u=o==="pageYOffset";h.fn[i]=function(c){return fe(this,function(m,_,v){var P;if(I(m)?P=m:m.nodeType===9&&(P=m.defaultView),v===void 0)return P?P[o]:m[_];P?P.scrollTo(u?P.pageXOffset:v,u?v:P.pageYOffset):m[_]=v},i,c,arguments.length)}}),h.each(["top","left"],function(i,o){h.cssHooks[o]=ir(Z.pixelPosition,function(u,c){if(c)return c=bn(u,o),Hr.test(c)?h(u).position()[o]+"px":c})}),h.each({Height:"height",Width:"width"},function(i,o){h.each({padding:"inner"+i,content:o,"":"outer"+i},function(u,c){h.fn[c]=function(m,_){var v=arguments.length&&(u||typeof m!="boolean"),P=u||(m===!0||_===!0?"margin":"border");return fe(this,function(S,z,j){var K;return I(S)?c.indexOf("outer")===0?S["inner"+i]:S.document.documentElement["client"+i]:S.nodeType===9?(K=S.documentElement,Math.max(S.body["scroll"+i],K["scroll"+i],S.body["offset"+i],K["offset"+i],K["client"+i])):j===void 0?h.css(S,z,P):h.style(S,z,j,P)},o,v?m:void 0,v)}})}),h.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(i,o){h.fn[o]=function(u){return this.on(o,u)}}),h.fn.extend({bind:function(i,o,u){return this.on(i,null,o,u)},unbind:function(i,o){return this.off(i,null,o)},delegate:function(i,o,u,c){return this.on(o,i,u,c)},undelegate:function(i,o,u){return arguments.length===1?this.off(i,"**"):this.off(o,i||"**",u)},hover:function(i,o){return this.mouseenter(i).mouseleave(o||i)}}),h.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(i,o){h.fn[o]=function(u,c){return arguments.length>0?this.on(o,null,u,c):this.trigger(o)}});var zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;h.proxy=function(i,o){var u,c,m;if(typeof o=="string"&&(u=i[o],o=i,i=u),!!M(i))return c=p.call(arguments,2),m=function(){return i.apply(o||this,c.concat(p.call(arguments)))},m.guid=i.guid=i.guid||h.guid++,m},h.holdReady=function(i){i?h.readyWait++:h.ready(!0)},h.isArray=Array.isArray,h.parseJSON=JSON.parse,h.nodeName=It,h.isFunction=M,h.isWindow=I,h.camelCase=ye,h.type=Y,h.now=Date.now,h.isNumeric=function(i){var o=h.type(i);return(o==="number"||o==="string")&&!isNaN(i-parseFloat(i))},h.trim=function(i){return i==null?"":(i+"").replace(zt,"")},typeof define=="function"&&define.amd&&define("jquery",[],function(){return h});var pa=a.jQuery,li=a.$;return h.noConflict=function(i){return a.$===h&&(a.$=li),i&&a.jQuery===h&&(a.jQuery=pa),h},typeof n=="undefined"&&(a.jQuery=a.$=h),h})});var Ze=Fo((Vo,Ns)=>{(function(a,n){typeof Vo=="object"&&typeof Ns!="undefined"?n(Vo):typeof define=="function"&&define.amd?define(["exports"],n):n(a.L={})})(Vo,function(a){"use strict";var n="1.7.1";function s(t){var e,r,l,d;for(r=1,l=arguments.length;r<l;r++){d=arguments[r];for(e in d)t[e]=d[e]}return t}var f=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function p(t,e){var r=Array.prototype.slice;if(t.bind)return t.bind.apply(t,r.call(arguments,1));var l=r.call(arguments,2);return function(){return t.apply(e,l.length?l.concat(r.call(arguments)):arguments)}}var g=0;function x(t){return t._leaflet_id=t._leaflet_id||++g,t._leaflet_id}function R(t,e,r){var l,d,y,C;return C=function(){l=!1,d&&(y.apply(r,d),d=!1)},y=function(){l?d=arguments:(t.apply(r,arguments),setTimeout(C,e),l=!0)},y}function T(t,e,r){var l=e[1],d=e[0],y=l-d;return t===l&&r?t:((t-d)%y+y)%y+d}function E(){return!1}function A(t,e){var r=Math.pow(10,e===void 0?6:e);return Math.round(t*r)/r}function N(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return N(t).split(/\s+/)}function Z(t,e){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?f(t.options):{});for(var r in e)t.options[r]=e[r];return t.options}function M(t,e,r){var l=[];for(var d in t)l.push(encodeURIComponent(r?d.toUpperCase():d)+"="+encodeURIComponent(t[d]));return(!e||e.indexOf("?")===-1?"?":"&")+l.join("&")}var I=/\{ *([\w_-]+) *\}/g;function D(t,e){return t.replace(I,function(r,l){var d=e[l];if(d===void 0)throw new Error("No value provided for variable "+r);return typeof d=="function"&&(d=d(e)),d})}var B=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function U(t,e){for(var r=0;r<t.length;r++)if(t[r]===e)return r;return-1}var Y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function tt(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var h=0;function _t(t){var e=+new Date,r=Math.max(0,16-(e-h));return h=e+r,window.setTimeout(t,r)}var at=window.requestAnimationFrame||tt("RequestAnimationFrame")||_t,Lt=window.cancelAnimationFrame||tt("CancelAnimationFrame")||tt("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function ct(t,e,r){if(r&&at===_t)t.call(e);else return at.call(window,p(t,e))}function xt(t){t&&Lt.call(window,t)}var It={extend:s,create:f,bind:p,lastId:g,stamp:x,throttle:R,wrapNum:T,falseFn:E,formatNum:A,trim:N,splitWords:H,setOptions:Z,getParamString:M,template:D,isArray:B,indexOf:U,emptyImageUrl:Y,requestFn:at,cancelFn:Lt,requestAnimFrame:ct,cancelAnimFrame:xt};function Ut(){}Ut.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,l=f(r);l.constructor=e,e.prototype=l;for(var d in this)Object.prototype.hasOwnProperty.call(this,d)&&d!=="prototype"&&d!=="__super__"&&(e[d]=this[d]);return t.statics&&(s(e,t.statics),delete t.statics),t.includes&&(Ot(t.includes),s.apply(null,[l].concat(t.includes)),delete t.includes),l.options&&(t.options=s(f(l.options),t.options)),s(l,t),l._initHooks=[],l.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,C=l._initHooks.length;y<C;y++)l._initHooks[y].call(this)}},e},Ut.include=function(t){return s(this.prototype,t),this},Ut.mergeOptions=function(t){return s(this.prototype.options,t),this},Ut.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),r=typeof t=="function"?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function Ot(t){if(!(typeof L=="undefined"||!L||!L.Mixin)){t=B(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ct={on:function(t,e,r){if(typeof t=="object")for(var l in t)this._on(l,t[l],e);else{t=H(t);for(var d=0,y=t.length;d<y;d++)this._on(t[d],e,r)}return this},off:function(t,e,r){if(!t)delete this._events;else if(typeof t=="object")for(var l in t)this._off(l,t[l],e);else{t=H(t);for(var d=0,y=t.length;d<y;d++)this._off(t[d],e,r)}return this},_on:function(t,e,r){this._events=this._events||{};var l=this._events[t];l||(l=[],this._events[t]=l),r===this&&(r=void 0);for(var d={fn:e,ctx:r},y=l,C=0,q=y.length;C<q;C++)if(y[C].fn===e&&y[C].ctx===r)return;y.push(d)},_off:function(t,e,r){var l,d,y;if(!!this._events&&(l=this._events[t],!!l)){if(!e){for(d=0,y=l.length;d<y;d++)l[d].fn=E;delete this._events[t];return}if(r===this&&(r=void 0),l)for(d=0,y=l.length;d<y;d++){var C=l[d];if(C.ctx===r&&C.fn===e){C.fn=E,this._firingCount&&(this._events[t]=l=l.slice()),l.splice(d,1);return}}}},fire:function(t,e,r){if(!this.listens(t,r))return this;var l=s({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var d=this._events[t];if(d){this._firingCount=this._firingCount+1||1;for(var y=0,C=d.length;y<C;y++){var q=d[y];q.fn.call(q.ctx||this,l)}this._firingCount--}}return r&&this._propagateEvent(l),this},listens:function(t,e){var r=this._events&&this._events[t];if(r&&r.length)return!0;if(e){for(var l in this._eventParents)if(this._eventParents[l].listens(t,e))return!0}return!1},once:function(t,e,r){if(typeof t=="object"){for(var l in t)this.once(l,t[l],e);return this}var d=p(function(){this.off(t,e,r).off(t,d,r)},this);return this.on(t,e,r).on(t,d,r)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[x(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[x(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,s({layer:t.target,propagatedFrom:t.target},t),!0)}};Ct.addEventListener=Ct.on,Ct.removeEventListener=Ct.clearAllEventListeners=Ct.off,Ct.addOneTimeEventListener=Ct.once,Ct.fireEvent=Ct.fire,Ct.hasEventListeners=Ct.listens;var re=Ut.extend(Ct);function st(t,e,r){this.x=r?Math.round(t):t,this.y=r?Math.round(e):e}var ge=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};st.prototype={clone:function(){return new st(this.x,this.y)},add:function(t){return this.clone()._add(lt(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(lt(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new st(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new st(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ge(this.x),this.y=ge(this.y),this},distanceTo:function(t){t=lt(t);var e=t.x-this.x,r=t.y-this.y;return Math.sqrt(e*e+r*r)},equals:function(t){return t=lt(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=lt(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function lt(t,e,r){return t instanceof st?t:B(t)?new st(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new st(t.x,t.y):new st(t,e,r)}function kt(t,e){if(!!t)for(var r=e?[t,e]:t,l=0,d=r.length;l<d;l++)this.extend(r[l])}kt.prototype={extend:function(t){return t=lt(t),!this.min&&!this.max?(this.min=t.clone(),this.max=t.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)),this},getCenter:function(t){return new st((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new st(this.min.x,this.max.y)},getTopRight:function(){return new st(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,r;return typeof t[0]=="number"||t instanceof st?t=lt(t):t=Et(t),t instanceof kt?(e=t.min,r=t.max):e=r=t,e.x>=this.min.x&&r.x<=this.max.x&&e.y>=this.min.y&&r.y<=this.max.y},intersects:function(t){t=Et(t);var e=this.min,r=this.max,l=t.min,d=t.max,y=d.x>=e.x&&l.x<=r.x,C=d.y>=e.y&&l.y<=r.y;return y&&C},overlaps:function(t){t=Et(t);var e=this.min,r=this.max,l=t.min,d=t.max,y=d.x>e.x&&l.x<r.x,C=d.y>e.y&&l.y<r.y;return y&&C},isValid:function(){return!!(this.min&&this.max)}};function Et(t,e){return!t||t instanceof kt?t:new kt(t,e)}function Gt(t,e){if(!!t)for(var r=e?[t,e]:t,l=0,d=r.length;l<d;l++)this.extend(r[l])}Gt.prototype={extend:function(t){var e=this._southWest,r=this._northEast,l,d;if(t instanceof vt)l=t,d=t;else if(t instanceof Gt){if(l=t._southWest,d=t._northEast,!l||!d)return this}else return t?this.extend(At(t)||Nt(t)):this;return!e&&!r?(this._southWest=new vt(l.lat,l.lng),this._northEast=new vt(d.lat,d.lng)):(e.lat=Math.min(l.lat,e.lat),e.lng=Math.min(l.lng,e.lng),r.lat=Math.max(d.lat,r.lat),r.lng=Math.max(d.lng,r.lng)),this},pad:function(t){var e=this._southWest,r=this._northEast,l=Math.abs(e.lat-r.lat)*t,d=Math.abs(e.lng-r.lng)*t;return new Gt(new vt(e.lat-l,e.lng-d),new vt(r.lat+l,r.lng+d))},getCenter:function(){return new vt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new vt(this.getNorth(),this.getWest())},getSouthEast:function(){return new vt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof vt||"lat"in t?t=At(t):t=Nt(t);var e=this._southWest,r=this._northEast,l,d;return t instanceof Gt?(l=t.getSouthWest(),d=t.getNorthEast()):l=d=t,l.lat>=e.lat&&d.lat<=r.lat&&l.lng>=e.lng&&d.lng<=r.lng},intersects:function(t){t=Nt(t);var e=this._southWest,r=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),y=d.lat>=e.lat&&l.lat<=r.lat,C=d.lng>=e.lng&&l.lng<=r.lng;return y&&C},overlaps:function(t){t=Nt(t);var e=this._southWest,r=this._northEast,l=t.getSouthWest(),d=t.getNorthEast(),y=d.lat>e.lat&&l.lat<r.lat,C=d.lng>e.lng&&l.lng<r.lng;return y&&C},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return t?(t=Nt(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Nt(t,e){return t instanceof Gt?t:new Gt(t,e)}function vt(t,e,r){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,r!==void 0&&(this.alt=+r)}vt.prototype={equals:function(t,e){if(!t)return!1;t=At(t);var r=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return r<=(e===void 0?1e-9:e)},toString:function(t){return"LatLng("+A(this.lat,t)+", "+A(this.lng,t)+")"},distanceTo:function(t){return ne.distance(this,At(t))},wrap:function(){return ne.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,r=e/Math.cos(Math.PI/180*this.lat);return Nt([this.lat-e,this.lng-r],[this.lat+e,this.lng+r])},clone:function(){return new vt(this.lat,this.lng,this.alt)}};function At(t,e,r){return t instanceof vt?t:B(t)&&typeof t[0]!="object"?t.length===3?new vt(t[0],t[1],t[2]):t.length===2?new vt(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new vt(t.lat,"lng"in t?t.lng:t.lon,t.alt):e===void 0?null:new vt(t,e,r)}var ae={latLngToPoint:function(t,e){var r=this.projection.project(t),l=this.scale(e);return this.transformation._transform(r,l)},pointToLatLng:function(t,e){var r=this.scale(e),l=this.transformation.untransform(t,r);return this.projection.unproject(l)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,r=this.scale(t),l=this.transformation.transform(e.min,r),d=this.transformation.transform(e.max,r);return new kt(l,d)},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?T(t.lng,this.wrapLng,!0):t.lng,r=this.wrapLat?T(t.lat,this.wrapLat,!0):t.lat,l=t.alt;return new vt(r,e,l)},wrapLatLngBounds:function(t){var e=t.getCenter(),r=this.wrapLatLng(e),l=e.lat-r.lat,d=e.lng-r.lng;if(l===0&&d===0)return t;var y=t.getSouthWest(),C=t.getNorthEast(),q=new vt(y.lat-l,y.lng-d),W=new vt(C.lat-l,C.lng-d);return new Gt(q,W)}},ne=s({},ae,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var r=Math.PI/180,l=t.lat*r,d=e.lat*r,y=Math.sin((e.lat-t.lat)*r/2),C=Math.sin((e.lng-t.lng)*r/2),q=y*y+Math.cos(l)*Math.cos(d)*C*C,W=2*Math.atan2(Math.sqrt(q),Math.sqrt(1-q));return this.R*W}}),Ce=6378137,fe={R:Ce,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,r=this.MAX_LATITUDE,l=Math.max(Math.min(r,t.lat),-r),d=Math.sin(l*e);return new st(this.R*t.lng*e,this.R*Math.log((1+d)/(1-d))/2)},unproject:function(t){var e=180/Math.PI;return new vt((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=Ce*Math.PI;return new kt([-t,-t],[t,t])}()};function qe(t,e,r,l){if(B(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=e,this._c=r,this._d=l}qe.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new st((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};function xe(t,e,r,l){return new qe(t,e,r,l)}var $e=s({},ne,{code:"EPSG:3857",projection:fe,transformation:function(){var t=.5/(Math.PI*fe.R);return xe(t,.5,-t,.5)}()}),ye=s({},$e,{code:"EPSG:900913"});function Qe(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function bi(t,e){var r="",l,d,y,C,q,W;for(l=0,y=t.length;l<y;l++){for(q=t[l],d=0,C=q.length;d<C;d++)W=q[d],r+=(d?"L":"M")+W.x+" "+W.y;r+=e?Xi?"z":"x":""}return r||"M0 0"}var ht=document.documentElement.style,$t="ActiveXObject"in window,di=$t&&!document.addEventListener,Ci="msLaunchUri"in navigator&&!("documentMode"in document),Dn=mi("webkit"),Ai=mi("android"),gn=mi("android 2")||mi("android 3"),In=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),pi=Ai&&mi("Google")&&In<537&&!("AudioNode"in window),xi=!!window.opera,Ri=!Ci&&mi("chrome"),Dr=mi("gecko")&&!Dn&&!xi&&!$t,Yi=!Ri&&mi("safari"),Ir=mi("phantom"),Or="OTransition"in ht,bo=navigator.platform.indexOf("Win")===0,Mi=$t&&"transition"in ht,Vi="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!gn,Nr="MozPerspective"in ht,Ue=!window.L_DISABLE_3D&&(Mi||Vi||Nr)&&!Or&&!Ir,we=typeof orientation!="undefined"||mi("mobile"),Oe=we&&Dn,zr=we&&Vi,Di=!window.PointerEvent&&window.MSPointerEvent,ti=!!(window.PointerEvent||Di),ei=!window.L_NO_TOUCH&&(ti||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Qi=we&&xi,_n=we&&Dr,Ii=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,vn=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",E,e),window.removeEventListener("testPassiveEventSupport",E,e)}catch(r){}return t}(),Kn=function(){return!!document.createElement("canvas").getContext}(),Xi=!!(document.createElementNS&&Qe("svg").createSVGRect),Jn=!Xi&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&typeof e.adj=="object"}catch(r){return!1}}();function mi(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ca={ie:$t,ielt9:di,edge:Ci,webkit:Dn,android:Ai,android23:gn,androidStock:pi,opera:xi,chrome:Ri,gecko:Dr,safari:Yi,phantom:Ir,opera12:Or,win:bo,ie3d:Mi,webkit3d:Vi,gecko3d:Nr,any3d:Ue,mobile:we,mobileWebkit:Oe,mobileWebkit3d:zr,msPointer:Di,pointer:ti,touch:ei,mobileOpera:Qi,mobileGecko:_n,retina:Ii,passiveEvents:vn,canvas:Kn,svg:Xi,vml:Jn},$n=Di?"MSPointerDown":"pointerdown",Br=Di?"MSPointerMove":"pointermove",Fr=Di?"MSPointerUp":"pointerup",tr=Di?"MSPointerCancel":"pointercancel",yn={},Ki=!1;function xo(t,e,r,l){return e==="touchstart"?er(t,r,l):e==="touchmove"?To(t,r,l):e==="touchend"&&Lo(t,r,l),this}function Hr(t,e,r){var l=t["_leaflet_"+e+r];return e==="touchstart"?t.removeEventListener($n,l,!1):e==="touchmove"?t.removeEventListener(Br,l,!1):e==="touchend"&&(t.removeEventListener(Fr,l,!1),t.removeEventListener(tr,l,!1)),this}function er(t,e,r){var l=p(function(d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Ge(d),ir(d,e)});t["_leaflet_touchstart"+r]=l,t.addEventListener($n,l,!1),Ki||(document.addEventListener($n,wo,!0),document.addEventListener(Br,ha,!0),document.addEventListener(Fr,bn,!0),document.addEventListener(tr,bn,!0),Ki=!0)}function wo(t){yn[t.pointerId]=t}function ha(t){yn[t.pointerId]&&(yn[t.pointerId]=t)}function bn(t){delete yn[t.pointerId]}function ir(t,e){t.touches=[];for(var r in yn)t.touches.push(yn[r]);t.changedTouches=[t],e(t)}function To(t,e,r){var l=function(d){d.pointerType===(d.MSPOINTER_TYPE_MOUSE||"mouse")&&d.buttons===0||ir(d,e)};t["_leaflet_touchmove"+r]=l,t.addEventListener(Br,l,!1)}function Lo(t,e,r){var l=function(d){ir(d,e)};t["_leaflet_touchend"+r]=l,t.addEventListener(Fr,l,!1),t.addEventListener(tr,l,!1)}var On=Di?"MSPointerDown":ti?"pointerdown":"touchstart",nr=Di?"MSPointerUp":ti?"pointerup":"touchend",Oi="_leaflet_";function fa(t,e,r){var l,d,y=!1,C=250;function q($){if(ti){if(!$.isPrimary||$.pointerType==="mouse")return}else if($.touches.length>1)return;var nt=Date.now(),mt=nt-(l||nt);d=$.touches?$.touches[0]:$,y=mt>0&&mt<=C,l=nt}function W($){if(y&&!d.cancelBubble){if(ti){if($.pointerType==="mouse")return;var nt={},mt,Ht;for(Ht in d)mt=d[Ht],nt[Ht]=mt&&mt.bind?mt.bind(d):mt;d=nt}d.type="dblclick",d.button=0,e(d),l=null}}return t[Oi+On+r]=q,t[Oi+nr+r]=W,t[Oi+"dblclick"+r]=e,t.addEventListener(On,q,vn?{passive:!1}:!1),t.addEventListener(nr,W,vn?{passive:!1}:!1),t.addEventListener("dblclick",e,!1),this}function Eo(t,e){var r=t[Oi+On+e],l=t[Oi+nr+e],d=t[Oi+"dblclick"+e];return t.removeEventListener(On,r,vn?{passive:!1}:!1),t.removeEventListener(nr,l,vn?{passive:!1}:!1),t.removeEventListener("dblclick",d,!1),this}var Zr=zn(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),xn=zn(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qr=xn==="webkitTransition"||xn==="OTransition"?xn+"End":"transitionend";function rr(t){return typeof t=="string"?document.getElementById(t):t}function wn(t,e){var r=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!r||r==="auto")&&document.defaultView){var l=document.defaultView.getComputedStyle(t,null);r=l?l[e]:null}return r==="auto"?null:r}function wt(t,e,r){var l=document.createElement(t);return l.className=e||"",r&&r.appendChild(l),l}function Xt(t){var e=t.parentNode;e&&e.removeChild(t)}function Ji(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function Tn(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function Ln(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function Nn(t,e){if(t.classList!==void 0)return t.classList.contains(e);var r=ar(t);return r.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(r)}function Pt(t,e){if(t.classList!==void 0)for(var r=H(e),l=0,d=r.length;l<d;l++)t.classList.add(r[l]);else if(!Nn(t,e)){var y=ar(t);or(t,(y?y+" ":"")+e)}}function te(t,e){t.classList!==void 0?t.classList.remove(e):or(t,N((" "+ar(t)+" ").replace(" "+e+" "," ")))}function or(t,e){t.className.baseVal===void 0?t.className=e:t.className.baseVal=e}function ar(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Xe(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&ii(t,e)}function ii(t,e){var r=!1,l="DXImageTransform.Microsoft.Alpha";try{r=t.filters.item(l)}catch(d){if(e===1)return}e=Math.round(e*100),r?(r.Enabled=e!==100,r.Opacity=e):t.style.filter+=" progid:"+l+"(opacity="+e+")"}function zn(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}function ni(t,e,r){var l=e||new st(0,0);t.style[Zr]=(Mi?"translate("+l.x+"px,"+l.y+"px)":"translate3d("+l.x+"px,"+l.y+"px,0)")+(r?" scale("+r+")":"")}function de(t,e){t._leaflet_pos=e,Ue?ni(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Ni(t){return t._leaflet_pos||new st(0,0)}var ri,oi,Bn;if("onselectstart"in document)ri=function(){St(window,"selectstart",Ge)},oi=function(){se(window,"selectstart",Ge)};else{var Fn=zn(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ri=function(){if(Fn){var t=document.documentElement.style;Bn=t[Fn],t[Fn]="none"}},oi=function(){Fn&&(document.documentElement.style[Fn]=Bn,Bn=void 0)}}function sr(){St(window,"dragstart",Ge)}function lr(){se(window,"dragstart",Ge)}var zi,ur;function Hn(t){for(;t.tabIndex===-1;)t=t.parentNode;!t.style||(cr(),zi=t,ur=t.style.outline,t.style.outline="none",St(window,"keydown",cr))}function cr(){!zi||(zi.style.outline=ur,zi=void 0,ur=void 0,se(window,"keydown",cr))}function Ur(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Gr(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var da={TRANSFORM:Zr,TRANSITION:xn,TRANSITION_END:qr,get:rr,getStyle:wn,create:wt,remove:Xt,empty:Ji,toFront:Tn,toBack:Ln,hasClass:Nn,addClass:Pt,removeClass:te,setClass:or,getClass:ar,setOpacity:Xe,testProp:zn,setTransform:ni,setPosition:de,getPosition:Ni,disableTextSelection:ri,enableTextSelection:oi,disableImageDrag:sr,enableImageDrag:lr,preventOutline:Hn,restoreOutline:cr,getSizedParentNode:Ur,getScale:Gr};function St(t,e,r,l){if(typeof e=="object")for(var d in e)hr(t,d,e[d],r);else{e=H(e);for(var y=0,C=e.length;y<C;y++)hr(t,e[y],r,l)}return this}var ai="_leaflet_events";function se(t,e,r,l){if(typeof e=="object")for(var d in e)Wr(t,d,e[d],r);else if(e){e=H(e);for(var y=0,C=e.length;y<C;y++)Wr(t,e[y],r,l)}else{for(var q in t[ai])Wr(t,q,t[ai][q]);delete t[ai]}return this}function Po(){if(ti)return!(Ci||Yi)}var jr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function hr(t,e,r,l){var d=e+x(r)+(l?"_"+x(l):"");if(t[ai]&&t[ai][d])return this;var y=function(q){return r.call(l||t,q||window.event)},C=y;ti&&e.indexOf("touch")===0?xo(t,e,y,d):ei&&e==="dblclick"&&!Po()?fa(t,y,d):"addEventListener"in t?e==="touchstart"||e==="touchmove"||e==="wheel"||e==="mousewheel"?t.addEventListener(jr[e]||e,y,vn?{passive:!1}:!1):e==="mouseenter"||e==="mouseleave"?(y=function(q){q=q||window.event,Bi(t,q)&&C(q)},t.addEventListener(jr[e],y,!1)):t.addEventListener(e,C,!1):"attachEvent"in t&&t.attachEvent("on"+e,y),t[ai]=t[ai]||{},t[ai][d]=y}function Wr(t,e,r,l){var d=e+x(r)+(l?"_"+x(l):""),y=t[ai]&&t[ai][d];if(!y)return this;ti&&e.indexOf("touch")===0?Hr(t,e,d):ei&&e==="dblclick"&&!Po()?Eo(t,d):"removeEventListener"in t?t.removeEventListener(jr[e]||e,y,!1):"detachEvent"in t&&t.detachEvent("on"+e,y),t[ai][d]=null}function $i(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Xr(t),this}function fr(t){return hr(t,"wheel",$i),this}function tn(t){return St(t,"mousedown touchstart dblclick",$i),hr(t,"click",Qr),this}function Ge(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function si(t){return Ge(t),$i(t),this}function Yr(t,e){if(!e)return new st(t.clientX,t.clientY);var r=Gr(e),l=r.boundingClientRect;return new st((t.clientX-l.left)/r.x-e.clientLeft,(t.clientY-l.top)/r.y-e.clientTop)}var ko=bo&&Ri?2*window.devicePixelRatio:Dr?window.devicePixelRatio:1;function dr(t){return Ci?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/ko:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}var Vr={};function Qr(t){Vr[t.type]=!0}function Xr(t){var e=Vr[t.type];return Vr[t.type]=!1,e}function Bi(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch(l){return!1}return r!==t}var So={on:St,off:se,stopPropagation:$i,disableScrollPropagation:fr,disableClickPropagation:tn,preventDefault:Ge,stop:si,getMousePosition:Yr,getWheelDelta:dr,fakeStop:Qr,skipped:Xr,isExternalTarget:Bi,addListener:St,removeListener:se},pr=re.extend({run:function(t,e,r,l){this.stop(),this._el=t,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(l||.5,.2),this._startPos=Ni(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){!this._inProgress||(this._step(!0),this._complete())},_animate:function(){this._animId=ct(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,r=this._duration*1e3;e<r?this._runFrame(this._easeOut(e/r),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var r=this._startPos.add(this._offset.multiplyBy(t));e&&r._round(),de(this._el,r),this.fire("step")},_complete:function(){xt(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),zt=re.extend({options:{crs:$e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=Z(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=p(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.zoom!==void 0&&(this._zoom=this._limitZoom(e.zoom)),e.center&&e.zoom!==void 0&&this.setView(At(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=xn&&Ue&&!Qi&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),St(this._proxy,qr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){if(e=e===void 0?this._zoom:this._limitZoom(e),t=this._limitCenter(At(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=s({animate:r.animate},r.zoom),r.pan=s({animate:r.animate,duration:r.duration},r.pan));var l=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan);if(l)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Ue?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Ue?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,r){var l=this.getZoomScale(e),d=this.getSize().divideBy(2),y=t instanceof st?t:this.latLngToContainerPoint(t),C=y.subtract(d).multiplyBy(1-1/l),q=this.containerPointToLatLng(d.add(C));return this.setView(q,e,{zoom:r})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():Nt(t);var r=lt(e.paddingTopLeft||e.padding||[0,0]),l=lt(e.paddingBottomRight||e.padding||[0,0]),d=this.getBoundsZoom(t,!1,r.add(l));if(d=typeof e.maxZoom=="number"?Math.min(e.maxZoom,d):d,d===1/0)return{center:t.getCenter(),zoom:d};var y=l.subtract(r).divideBy(2),C=this.project(t.getSouthWest(),d),q=this.project(t.getNorthEast(),d),W=this.unproject(C.add(q).divideBy(2).add(y),d);return{center:W,zoom:d}},fitBounds:function(t,e){if(t=Nt(t),!t.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(t,e);return this.setView(r.center,r.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=lt(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(e.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pr,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){Pt(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,r,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,r){if(r=r||{},r.animate===!1||!Ue)return this.setView(t,e,r);this._stop();var l=this.project(this.getCenter()),d=this.project(t),y=this.getSize(),C=this._zoom;t=At(t),e=e===void 0?C:e;var q=Math.max(y.x,y.y),W=q*this.getZoomScale(C,e),$=d.distanceTo(l)||1,nt=1.42,mt=nt*nt;function Ht(be){var zo=be?-1:1,Gl=be?W:q,jl=W*W-q*q+zo*mt*mt*$*$,Wl=2*Gl*mt*$,ya=jl/Wl,ls=Math.sqrt(ya*ya+1)-ya,Yl=ls<1e-9?-18:Math.log(ls);return Yl}function sn(be){return(Math.exp(be)-Math.exp(-be))/2}function jn(be){return(Math.exp(be)+Math.exp(-be))/2}function No(be){return sn(be)/jn(be)}var Cn=Ht(0);function va(be){return q*(jn(Cn)/jn(Cn+nt*be))}function Hl(be){return q*(jn(Cn)*No(Cn+nt*be)-sn(Cn))/mt}function Zl(be){return 1-Math.pow(1-be,1.5)}var ql=Date.now(),as=(Ht(1)-Cn)/nt,Ul=r.duration?1e3*r.duration:1e3*as*.8;function ss(){var be=(Date.now()-ql)/Ul,zo=Zl(be)*as;be<=1?(this._flyToFrame=ct(ss,this),this._move(this.unproject(l.add(d.subtract(l).multiplyBy(Hl(zo)/$)),C),this.getScaleZoom(q/va(zo),C),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),ss.call(this),this},flyToBounds:function(t,e){var r=this._getBoundsCenterZoom(t,e);return this.flyTo(r.center,r.zoom,e)},setMaxBounds:function(t){if(t=Nt(t),t.isValid())this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds);else return this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds);return this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var r=this.getCenter(),l=this._limitCenter(r,this._zoom,Nt(t));return r.equals(l)||this.panTo(l,e),this._enforcingBounds=!1,this},panInside:function(t,e){e=e||{};var r=lt(e.paddingTopLeft||e.padding||[0,0]),l=lt(e.paddingBottomRight||e.padding||[0,0]),d=this.getCenter(),y=this.project(d),C=this.project(t),q=this.getPixelBounds(),W=q.getSize().divideBy(2),$=Et([q.min.add(r),q.max.subtract(l)]);if(!$.contains(C)){this._enforcingBounds=!0;var nt=y.subtract(C),mt=lt(C.x+nt.x,C.y+nt.y);(C.x<$.min.x||C.x>$.max.x)&&(mt.x=y.x-nt.x,nt.x>0?mt.x+=W.x-r.x:mt.x-=W.x-l.x),(C.y<$.min.y||C.y>$.max.y)&&(mt.y=y.y-nt.y,nt.y>0?mt.y+=W.y-r.y:mt.y-=W.y-l.y),this.panTo(this.unproject(mt),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=s({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),l=e.divideBy(2).round(),d=r.divideBy(2).round(),y=l.subtract(d);return!y.x&&!y.y?this:(t.animate&&t.pan?this.panBy(y):(t.pan&&this._rawPanBy(y),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(p(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=s({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=p(this._handleGeolocationResponse,this),r=p(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,r=t.message||(e===1?"permission denied":e===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+r+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,r=t.coords.longitude,l=new vt(e,r),d=l.toBounds(t.coords.accuracy*2),y=this._locateOptions;if(y.setView){var C=this.getBoundsZoom(d);this.setView(l,y.maxZoom?Math.min(C,y.maxZoom):C)}var q={latlng:l,bounds:d,timestamp:t.timestamp};for(var W in t.coords)typeof t.coords[W]=="number"&&(q[W]=t.coords[W]);this.fire("locationfound",q)},addHandler:function(t,e){if(!e)return this;var r=this[t]=new e(this);return this._handlers.push(r),this.options[t]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(xt(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Xt(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var r="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),l=wt("div",r,e||this._mapPane);return t&&(this._panes[t]=l),l},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),r=this.unproject(t.getTopRight());return new Gt(e,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,r){t=Nt(t),r=lt(r||[0,0]);var l=this.getZoom()||0,d=this.getMinZoom(),y=this.getMaxZoom(),C=t.getNorthWest(),q=t.getSouthEast(),W=this.getSize().subtract(r),$=Et(this.project(q,l),this.project(C,l)).getSize(),nt=Ue?this.options.zoomSnap:1,mt=W.x/$.x,Ht=W.y/$.y,sn=e?Math.max(mt,Ht):Math.min(mt,Ht);return l=this.getScaleZoom(sn,l),nt&&(l=Math.round(l/(nt/100))*(nt/100),l=e?Math.ceil(l/nt)*nt:Math.floor(l/nt)*nt),Math.max(d,Math.min(y,l))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new st(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var r=this._getTopLeftPoint(t,e);return new kt(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var r=this.options.crs;return e=e===void 0?this._zoom:e,r.scale(t)/r.scale(e)},getScaleZoom:function(t,e){var r=this.options.crs;e=e===void 0?this._zoom:e;var l=r.zoom(t*r.scale(e));return isNaN(l)?1/0:l},project:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.latLngToPoint(At(t),e)},unproject:function(t,e){return e=e===void 0?this._zoom:e,this.options.crs.pointToLatLng(lt(t),e)},layerPointToLatLng:function(t){var e=lt(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(At(t))._round();return e._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(At(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Nt(t))},distance:function(t,e){return this.options.crs.distance(At(t),At(e))},containerPointToLayerPoint:function(t){return lt(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return lt(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(lt(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(At(t)))},mouseEventToContainerPoint:function(t){return Yr(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=rr(t);if(e){if(e._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");St(e,"scroll",this._onScroll,this),this._containerId=x(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ue,Pt(t,"leaflet-container"+(ei?" leaflet-touch":"")+(Ii?" leaflet-retina":"")+(di?" leaflet-oldie":"")+(Yi?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=wn(t,"position");e!=="absolute"&&e!=="relative"&&e!=="fixed"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),de(this._mapPane,new st(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Pt(t.markerPane,"leaflet-zoom-hide"),Pt(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){de(this._mapPane,new st(0,0));var r=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var l=this._zoom!==e;this._moveStart(l,!1)._move(t,e)._moveEnd(l),this.fire("viewreset"),r&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,r){e===void 0&&(e=this._zoom);var l=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(l||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return xt(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){de(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[x(this._container)]=this;var e=t?se:St;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Ue&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){xt(this._resizeRequest),this._resizeRequest=ct(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var r=[],l,d=e==="mouseout"||e==="mouseover",y=t.target||t.srcElement,C=!1;y;){if(l=this._targets[x(y)],l&&(e==="click"||e==="preclick")&&!t._simulated&&this._draggableMoved(l)){C=!0;break}if(l&&l.listens(e,!0)&&(d&&!Bi(y,t)||(r.push(l),d))||y===this._container)break;y=y.parentNode}return!r.length&&!C&&!d&&Bi(y,t)&&(r=[this]),r},_handleDOMEvent:function(t){if(!(!this._loaded||Xr(t))){var e=t.type;(e==="mousedown"||e==="keypress"||e==="keyup"||e==="keydown")&&Hn(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if(t.type==="click"){var l=s({},t);l.type="preclick",this._fireDOMEvent(l,l.type,r)}if(!t._stopped&&(r=(r||[]).concat(this._findEventTargets(t,e)),!!r.length)){var d=r[0];e==="contextmenu"&&d.listens(e,!0)&&Ge(t);var y={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var C=d.getLatLng&&(!d._radius||d._radius<=10);y.containerPoint=C?this.latLngToContainerPoint(d.getLatLng()):this.mouseEventToContainerPoint(t),y.layerPoint=this.containerPointToLayerPoint(y.containerPoint),y.latlng=C?d.getLatLng():this.layerPointToLatLng(y.layerPoint)}for(var q=0;q<r.length;q++)if(r[q].fire(e,y,!0),y.originalEvent._stopped||r[q].options.bubblingMouseEvents===!1&&U(this._mouseEvents,e)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Ni(this._mapPane)||new st(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){var r=t&&e!==void 0?this._getNewPixelOrigin(t,e):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var r=this.getSize()._divideBy(2);return this.project(t,e)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,r){var l=this._getNewPixelOrigin(r,e);return this.project(t,e)._subtract(l)},_latLngBoundsToNewLayerBounds:function(t,e,r){var l=this._getNewPixelOrigin(r,e);return Et([this.project(t.getSouthWest(),e)._subtract(l),this.project(t.getNorthWest(),e)._subtract(l),this.project(t.getSouthEast(),e)._subtract(l),this.project(t.getNorthEast(),e)._subtract(l)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,r){if(!r)return t;var l=this.project(t,e),d=this.getSize().divideBy(2),y=new kt(l.subtract(d),l.add(d)),C=this._getBoundsOffset(y,r,e);return C.round().equals([0,0])?t:this.unproject(l.add(C),e)},_limitOffset:function(t,e){if(!e)return t;var r=this.getPixelBounds(),l=new kt(r.min.add(t),r.max.add(t));return t.add(this._getBoundsOffset(l,e))},_getBoundsOffset:function(t,e,r){var l=Et(this.project(e.getNorthEast(),r),this.project(e.getSouthWest(),r)),d=l.min.subtract(t.min),y=l.max.subtract(t.max),C=this._rebound(d.x,-y.x),q=this._rebound(d.y,-y.y);return new st(C,q)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),r=this.getMaxZoom(),l=Ue?this.options.zoomSnap:1;return l&&(t=Math.round(t/l)*l),Math.max(e,Math.min(r,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){te(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var r=this._getCenterOffset(t)._trunc();return(e&&e.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,e),!0)},_createAnimProxy:function(){var t=this._proxy=wt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(e){var r=Zr,l=this._proxy.style[r];ni(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),l===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xt(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();ni(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var l=this.getZoomScale(e),d=this._getCenterOffset(t)._divideBy(1-1/l);return r.animate!==!0&&!this.getSize().contains(d)?!1:(ct(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,r,l){!this._mapPane||(r&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,Pt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:l}),setTimeout(p(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){!this._animatingZoom||(this._mapPane&&te(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),ct(function(){this._moveEnd(!0)},this))}});function pa(t,e){return new zt(t,e)}var li=Ut.extend({options:{position:"topright"},initialize:function(t){Z(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),r=this.getPosition(),l=t._controlCorners[r];return Pt(e,"leaflet-control"),r.indexOf("bottom")!==-1?l.insertBefore(e,l.firstChild):l.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),i=function(t){return new li(t)};zt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",r=this._controlContainer=wt("div",e+"control-container",this._container);function l(d,y){var C=e+d+" "+e+y;t[d+y]=wt("div",C,r)}l("top","left"),l("top","right"),l("bottom","left"),l("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Xt(this._controlCorners[t]);Xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var o=li.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,r,l){return r<l?-1:l<r?1:0}},initialize:function(t,e,r){Z(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var l in t)this._addLayer(t[l],l);for(l in e)this._addLayer(e[l],l,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return li.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(x(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){Pt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Pt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):te(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return te(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=wt("div",t),r=this.options.collapsed;e.setAttribute("aria-haspopup",!0),tn(e),fr(e);var l=this._section=wt("section",t+"-list");r&&(this._map.on("click",this.collapse,this),Ai||St(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var d=this._layersLink=wt("a",t+"-toggle",e);d.href="#",d.title="Layers",ei?(St(d,"click",si),St(d,"click",this.expand,this)):St(d,"focus",this.expand,this),r||this.expand(),this._baseLayersList=wt("div",t+"-base",l),this._separator=wt("div",t+"-separator",l),this._overlaysList=wt("div",t+"-overlays",l),e.appendChild(l)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&x(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,r){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:r}),this.options.sortLayers&&this._layers.sort(p(function(l,d){return this.options.sortFunction(l.layer,d.layer,l.name,d.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ji(this._baseLayersList),Ji(this._overlaysList),this._layerControlInputs=[];var t,e,r,l,d=0;for(r=0;r<this._layers.length;r++)l=this._layers[r],this._addItem(l),e=e||l.overlay,t=t||!l.overlay,d+=l.overlay?0:1;return this.options.hideSingleBase&&(t=t&&d>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(x(t.target)),r=e.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;r&&this._map.fire(r,e)},_createRadioElement:function(t,e){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",l=document.createElement("div");return l.innerHTML=r,l.firstChild},_addItem:function(t){var e=document.createElement("label"),r=this._map.hasLayer(t.layer),l;t.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="leaflet-control-layers-selector",l.defaultChecked=r):l=this._createRadioElement("leaflet-base-layers_"+x(this),r),this._layerControlInputs.push(l),l.layerId=x(t.layer),St(l,"click",this._onInputClick,this);var d=document.createElement("span");d.innerHTML=" "+t.name;var y=document.createElement("div");e.appendChild(y),y.appendChild(l),y.appendChild(d);var C=t.overlay?this._overlaysList:this._baseLayersList;return C.appendChild(e),this._checkDisabledLayers(),e},_onInputClick:function(){var t=this._layerControlInputs,e,r,l=[],d=[];this._handlingClick=!0;for(var y=t.length-1;y>=0;y--)e=t[y],r=this._getLayer(e.layerId).layer,e.checked?l.push(r):e.checked||d.push(r);for(y=0;y<d.length;y++)this._map.hasLayer(d[y])&&this._map.removeLayer(d[y]);for(y=0;y<l.length;y++)this._map.hasLayer(l[y])||this._map.addLayer(l[y]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,e,r,l=this._map.getZoom(),d=t.length-1;d>=0;d--)e=t[d],r=this._getLayer(e.layerId).layer,e.disabled=r.options.minZoom!==void 0&&l<r.options.minZoom||r.options.maxZoom!==void 0&&l>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),u=function(t,e,r){return new o(t,e,r)},c=li.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",r=wt("div",e+" leaflet-bar"),l=this.options;return this._zoomInButton=this._createButton(l.zoomInText,l.zoomInTitle,e+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(l.zoomOutText,l.zoomOutTitle,e+"-out",r,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,r,l,d){var y=wt("a",r,l);return y.innerHTML=t,y.href="#",y.title=e,y.setAttribute("role","button"),y.setAttribute("aria-label",e),tn(y),St(y,"click",si),St(y,"click",d,this),St(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";te(this._zoomInButton,e),te(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&Pt(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&Pt(this._zoomInButton,e)}});zt.mergeOptions({zoomControl:!0}),zt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new c,this.addControl(this.zoomControl))});var m=function(t){return new c(t)},_=li.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",r=wt("div",e),l=this.options;return this._addScales(l,e+"-line",r),t.on(l.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),r},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,r){t.metric&&(this._mScale=wt("div",e,r)),t.imperial&&(this._iScale=wt("div",e,r))},_update:function(){var t=this._map,e=t.getSize().y/2,r=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(r)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),r=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,r,e/t)},_updateImperial:function(t){var e=t*3.2808399,r,l,d;e>5280?(r=e/5280,l=this._getRoundNum(r),this._updateScale(this._iScale,l+" mi",l/r)):(d=this._getRoundNum(e),this._updateScale(this._iScale,d+" ft",d/e))},_updateScale:function(t,e,r){t.style.width=Math.round(this.options.maxWidth*r)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),r=t/e;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,e*r}}),v=function(t){return new _(t)},P=li.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){Z(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=wt("div","leaflet-control-attribution"),tn(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(!!this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var r=[];this.options.prefix&&r.push(this.options.prefix),t.length&&r.push(t.join(", ")),this._container.innerHTML=r.join(" | ")}}});zt.mergeOptions({attributionControl:!0}),zt.addInitHook(function(){this.options.attributionControl&&new P().addTo(this)});var S=function(t){return new P(t)};li.Layers=o,li.Zoom=c,li.Scale=_,li.Attribution=P,i.layers=u,i.zoom=m,i.scale=v,i.attribution=S;var z=Ut.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});z.addTo=function(t,e){return t.addHandler(e,this),this};var j={Events:Ct},K=ei?"touchstart mousedown":"mousedown",G={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},V={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},ot=re.extend({options:{clickTolerance:3},initialize:function(t,e,r,l){Z(this,l),this._element=t,this._dragStartTarget=e||t,this._preventOutline=r},enable:function(){this._enabled||(St(this._dragStartTarget,K,this._onDown,this),this._enabled=!0)},disable:function(){!this._enabled||(ot._dragging===this&&this.finishDrag(),se(this._dragStartTarget,K,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!(t._simulated||!this._enabled)&&(this._moved=!1,!Nn(this._element,"leaflet-zoom-anim")&&!(ot._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ot._dragging=this,this._preventOutline&&Hn(this._element),sr(),ri(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,r=Ur(this._element);this._startPoint=new st(e.clientX,e.clientY),this._parentScale=Gr(r),St(document,V[t.type],this._onMove,this),St(document,G[t.type],this._onUp,this)}},_onMove:function(t){if(!(t._simulated||!this._enabled)){if(t.touches&&t.touches.length>1){this._moved=!0;return}var e=t.touches&&t.touches.length===1?t.touches[0]:t,r=new st(e.clientX,e.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Ge(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Ni(this._element).subtract(r),Pt(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Pt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,xt(this._animRequest),this._lastEvent=t,this._animRequest=ct(this._updatePosition,this,!0))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),de(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){t._simulated||!this._enabled||this.finishDrag()},finishDrag:function(){te(document.body,"leaflet-dragging"),this._lastTarget&&(te(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in V)se(document,V[t],this._onMove,this),se(document,G[t],this._onUp,this);lr(),oi(),this._moved&&this._moving&&(xt(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,ot._dragging=!1}});function Tt(t,e){if(!e||!t.length)return t.slice();var r=e*e;return t=Kt(t,r),t=pe(t,r),t}function ut(t,e,r){return Math.sqrt(Fi(t,e,r,!0))}function _e(t,e,r){return Fi(t,e,r)}function pe(t,e){var r=t.length,l=typeof Uint8Array!=void 0+""?Uint8Array:Array,d=new l(r);d[0]=d[r-1]=1,Ae(t,d,e,0,r-1);var y,C=[];for(y=0;y<r;y++)d[y]&&C.push(t[y]);return C}function Ae(t,e,r,l,d){var y=0,C,q,W;for(q=l+1;q<=d-1;q++)W=Fi(t[q],t[l],t[d],!0),W>y&&(C=q,y=W);y>r&&(e[C]=1,Ae(t,e,r,l,C),Ae(t,e,r,C,d))}function Kt(t,e){for(var r=[t[0]],l=1,d=0,y=t.length;l<y;l++)Zn(t[l],t[d])>e&&(r.push(t[l]),d=l);return d<y-1&&r.push(t[y-1]),r}var yt;function Re(t,e,r,l,d){var y=l?yt:jt(t,r),C=jt(e,r),q,W,$;for(yt=C;;){if(!(y|C))return[t,e];if(y&C)return!1;q=y||C,W=Dt(t,e,q,r,d),$=jt(W,r),q===y?(t=W,y=$):(e=W,C=$)}}function Dt(t,e,r,l,d){var y=e.x-t.x,C=e.y-t.y,q=l.min,W=l.max,$,nt;return r&8?($=t.x+y*(W.y-t.y)/C,nt=W.y):r&4?($=t.x+y*(q.y-t.y)/C,nt=q.y):r&2?($=W.x,nt=t.y+C*(W.x-t.x)/y):r&1&&($=q.x,nt=t.y+C*(q.x-t.x)/y),new st($,nt,d)}function jt(t,e){var r=0;return t.x<e.min.x?r|=1:t.x>e.max.x&&(r|=2),t.y<e.min.y?r|=4:t.y>e.max.y&&(r|=8),r}function Zn(t,e){var r=e.x-t.x,l=e.y-t.y;return r*r+l*l}function Fi(t,e,r,l){var d=e.x,y=e.y,C=r.x-d,q=r.y-y,W=C*C+q*q,$;return W>0&&($=((t.x-d)*C+(t.y-y)*q)/W,$>1?(d=r.x,y=r.y):$>0&&(d+=C*$,y+=q*$)),C=t.x-d,q=t.y-y,l?C*C+q*q:new st(d,y)}function le(t){return!B(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]!="undefined"}function Hi(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),le(t)}var en={simplify:Tt,pointToSegmentDistance:ut,closestPointOnSegment:_e,clipSegment:Re,_getEdgeIntersection:Dt,_getBitCode:jt,_sqClosestPointOnSegment:Fi,isFlat:le,_flat:Hi};function Me(t,e,r){var l,d=[1,4,2,8],y,C,q,W,$,nt,mt,Ht;for(y=0,nt=t.length;y<nt;y++)t[y]._code=jt(t[y],e);for(q=0;q<4;q++){for(mt=d[q],l=[],y=0,nt=t.length,C=nt-1;y<nt;C=y++)W=t[y],$=t[C],W._code&mt?$._code&mt||(Ht=Dt($,W,mt,e,r),Ht._code=jt(Ht,e),l.push(Ht)):($._code&mt&&(Ht=Dt($,W,mt,e,r),Ht._code=jt(Ht,e),l.push(Ht)),l.push(W));t=l}return t}var Zi={clipPolygon:Me},Ne={project:function(t){return new st(t.lng,t.lat)},unproject:function(t){return new vt(t.y,t.x)},bounds:new kt([-180,-90],[180,90])},gi={R:6378137,R_MINOR:6356752314245179e-9,bounds:new kt([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var e=Math.PI/180,r=this.R,l=t.lat*e,d=this.R_MINOR/r,y=Math.sqrt(1-d*d),C=y*Math.sin(l),q=Math.tan(Math.PI/4-l/2)/Math.pow((1-C)/(1+C),y/2);return l=-r*Math.log(Math.max(q,1e-10)),new st(t.lng*e*r,l)},unproject:function(t){for(var e=180/Math.PI,r=this.R,l=this.R_MINOR/r,d=Math.sqrt(1-l*l),y=Math.exp(-t.y/r),C=Math.PI/2-2*Math.atan(y),q=0,W=.1,$;q<15&&Math.abs(W)>1e-7;q++)$=d*Math.sin(C),$=Math.pow((1-$)/(1+$),d/2),W=Math.PI/2-2*Math.atan(y*$)-C,C+=W;return new vt(C*e,t.x*e/r)}},Co={LonLat:Ne,Mercator:gi,SphericalMercator:fe},nn=s({},ne,{code:"EPSG:3395",projection:gi,transformation:function(){var t=.5/(Math.PI*gi.R);return xe(t,.5,-t,.5)}()}),mr=s({},ne,{code:"EPSG:4326",projection:Ne,transformation:xe(1/180,1,-1/180,.5)}),Bt=s({},ae,{projection:Ne,transformation:xe(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var r=e.lng-t.lng,l=e.lat-t.lat;return Math.sqrt(r*r+l*l)},infinite:!0});ae.Earth=ne,ae.EPSG3395=nn,ae.EPSG3857=$e,ae.EPSG900913=ye,ae.EPSG4326=mr,ae.Simple=Bt;var Te=re.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[x(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[x(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(!!e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var r=this.getEvents();e.on(r,this),this.once("remove",function(){e.off(r,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});zt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=x(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=x(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&x(t)in this._layers},eachLayer:function(t,e){for(var r in this._layers)t.call(e,this._layers[r]);return this},_addLayers:function(t){t=t?B(t)?t:[t]:[];for(var e=0,r=t.length;e<r;e++)this.addLayer(t[e])},_addZoomLimit:function(t){(isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[x(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=x(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,r=this._getZoomSpan();for(var l in this._zoomBoundLayers){var d=this._zoomBoundLayers[l].options;t=d.minZoom===void 0?t:Math.min(t,d.minZoom),e=d.maxZoom===void 0?e:Math.max(e,d.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var rn=Te.extend({initialize:function(t,e){Z(this,e),this._layers={};var r,l;if(t)for(r=0,l=t.length;r<l;r++)this.addLayer(t[r])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){if(!t)return!1;var e=typeof t=="number"?t:this.getLayerId(t);return e in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e=Array.prototype.slice.call(arguments,1),r,l;for(r in this._layers)l=this._layers[r],l[t]&&l[t].apply(l,e);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var r in this._layers)t.call(e,this._layers[r]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return x(t)}}),Kr=function(t,e){return new rn(t,e)},En=rn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),rn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),rn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new Gt;for(var e in this._layers){var r=this._layers[e];t.extend(r.getBounds?r.getBounds():r.getLatLng())}return t}}),gr=function(t,e){return new En(t,e)},Pn=Ut.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){Z(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var r=this._getIconUrl(t);if(!r){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var l=this._createImg(r,e&&e.tagName==="IMG"?e:null);return this._setIconStyles(l,t),l},_setIconStyles:function(t,e){var r=this.options,l=r[e+"Size"];typeof l=="number"&&(l=[l,l]);var d=lt(l),y=lt(e==="shadow"&&r.shadowAnchor||r.iconAnchor||d&&d.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(r.className||""),y&&(t.style.marginLeft=-y.x+"px",t.style.marginTop=-y.y+"px"),d&&(t.style.width=d.x+"px",t.style.height=d.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return Ii&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ao(t){return new Pn(t)}var qn=Pn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return qn.imagePath||(qn.imagePath=this._detectIconPath()),(this.options.imagePath||qn.imagePath)+Pn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=wt("div","leaflet-default-icon-path",document.body),e=wn(t,"background-image")||wn(t,"backgroundImage");return document.body.removeChild(t),e===null||e.indexOf("url")!==0?e="":e=e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,""),e}}),Ro=z.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ot(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Pt(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&te(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,r=e._map,l=this._marker.options.autoPanSpeed,d=this._marker.options.autoPanPadding,y=Ni(e._icon),C=r.getPixelBounds(),q=r.getPixelOrigin(),W=Et(C.min._subtract(q).add(d),C.max._subtract(q).subtract(d));if(!W.contains(y)){var $=lt((Math.max(W.max.x,y.x)-W.max.x)/(C.max.x-W.max.x)-(Math.min(W.min.x,y.x)-W.min.x)/(C.min.x-W.min.x),(Math.max(W.max.y,y.y)-W.max.y)/(C.max.y-W.max.y)-(Math.min(W.min.y,y.y)-W.min.y)/(C.min.y-W.min.y)).multiplyBy(l);r.panBy($,{animate:!1}),this._draggable._newPos._add($),this._draggable._startPos._add($),de(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=ct(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(xt(this._panRequest),this._panRequest=ct(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,r=e._shadow,l=Ni(e._icon),d=e._map.layerPointToLatLng(l);r&&de(r,l),e._latlng=d,t.latlng=d,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){xt(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),_r=Te.extend({options:{icon:new qn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){Z(this,e),this._latlng=At(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=At(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=t.icon.createIcon(this._icon),l=!1;r!==this._icon&&(this._icon&&this._removeIcon(),l=!0,t.title&&(r.title=t.title),r.tagName==="IMG"&&(r.alt=t.alt||"")),Pt(r,e),t.keyboard&&(r.tabIndex="0"),this._icon=r,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var d=t.icon.createShadow(this._shadow),y=!1;d!==this._shadow&&(this._removeShadow(),y=!0),d&&(Pt(d,e),d.alt=""),this._shadow=d,t.opacity<1&&this._updateOpacity(),l&&this.getPane().appendChild(this._icon),this._initInteraction(),d&&y&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),Xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xt(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&de(this._icon,t),this._shadow&&de(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(!!this.options.interactive&&(Pt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ro)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ro(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Xe(this._icon,t),this._shadow&&Xe(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function vr(t,e){return new _r(t,e)}var qi=Te.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return Z(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),yr=qi.extend({options:{fill:!0,radius:10},initialize:function(t,e){Z(this,e),this._latlng=At(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=At(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return qi.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,r=this._clickTolerance(),l=[t+r,e+r];this._pxBounds=new kt(this._point.subtract(l),this._point.add(l))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ma(t,e){return new yr(t,e)}var on=yr.extend({initialize:function(t,e,r){if(typeof e=="number"&&(e=s({},r,{radius:e})),Z(this,e),this._latlng=At(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new Gt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:qi.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,r=this._map,l=r.options.crs;if(l.distance===ne.distance){var d=Math.PI/180,y=this._mRadius/ne.R/d,C=r.project([e+y,t]),q=r.project([e-y,t]),W=C.add(q).divideBy(2),$=r.unproject(W).lat,nt=Math.acos((Math.cos(y*d)-Math.sin(e*d)*Math.sin($*d))/(Math.cos(e*d)*Math.cos($*d)))/d;(isNaN(nt)||nt===0)&&(nt=y/Math.cos(Math.PI/180*e)),this._point=W.subtract(r.getPixelOrigin()),this._radius=isNaN(nt)?0:W.x-r.project([$,t-nt]).x,this._radiusY=W.y-C.y}else{var mt=l.unproject(l.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(mt).x}this._updateBounds()}});function ga(t,e,r){return new on(t,e,r)}var ui=qi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){Z(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e=1/0,r=null,l=Fi,d,y,C=0,q=this._parts.length;C<q;C++)for(var W=this._parts[C],$=1,nt=W.length;$<nt;$++){d=W[$-1],y=W[$];var mt=l(t,d,y,!0);mt<e&&(e=mt,r=l(t,d,y))}return r&&(r.distance=Math.sqrt(e)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,r,l,d,y,C,q=this._rings[0],W=q.length;if(!W)return null;for(t=0,e=0;t<W-1;t++)e+=q[t].distanceTo(q[t+1])/2;if(e===0)return this._map.layerPointToLatLng(q[0]);for(t=0,l=0;t<W-1;t++)if(d=q[t],y=q[t+1],r=d.distanceTo(y),l+=r,l>e)return C=(l-e)/r,this._map.layerPointToLatLng([y.x-C*(y.x-d.x),y.y-C*(y.y-d.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=At(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new Gt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return le(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],r=le(t),l=0,d=t.length;l<d;l++)r?(e[l]=At(t[l]),this._bounds.extend(e[l])):e[l]=this._convertLatLngs(t[l]);return e},_project:function(){var t=new kt;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new st(t,t);this._pxBounds=new kt([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,r){var l=t[0]instanceof vt,d=t.length,y,C;if(l){for(C=[],y=0;y<d;y++)C[y]=this._map.latLngToLayerPoint(t[y]),r.extend(C[y]);e.push(C)}else for(y=0;y<d;y++)this._projectLatlngs(t[y],e,r)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var e=this._parts,r,l,d,y,C,q,W;for(r=0,d=0,y=this._rings.length;r<y;r++)for(W=this._rings[r],l=0,C=W.length;l<C-1;l++)q=Re(W[l],W[l+1],t,l,!0),!!q&&(e[d]=e[d]||[],e[d].push(q[0]),(q[1]!==W[l+1]||l===C-2)&&(e[d].push(q[1]),d++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,r=0,l=t.length;r<l;r++)t[r]=Tt(t[r],e)},_update:function(){!this._map||(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var r,l,d,y,C,q,W=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,y=this._parts.length;r<y;r++)for(q=this._parts[r],l=0,C=q.length,d=C-1;l<C;d=l++)if(!(!e&&l===0)&&ut(t,q[d],q[l])<=W)return!0;return!1}});function wi(t,e){return new ui(t,e)}ui._flat=Hi;var ze=ui.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,r,l,d,y,C,q,W,$=this._rings[0],nt=$.length;if(!nt)return null;for(y=C=q=0,t=0,e=nt-1;t<nt;e=t++)r=$[t],l=$[e],d=r.y*l.x-l.y*r.x,C+=(r.x+l.x)*d,q+=(r.y+l.y)*d,y+=d*3;return y===0?W=$[0]:W=[C/y,q/y],this._map.layerPointToLatLng(W)},_convertLatLngs:function(t){var e=ui.prototype._convertLatLngs.call(this,t),r=e.length;return r>=2&&e[0]instanceof vt&&e[0].equals(e[r-1])&&e.pop(),e},_setLatLngs:function(t){ui.prototype._setLatLngs.call(this,t),le(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return le(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,r=new st(e,e);if(t=new kt(t.min.subtract(r),t.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var l=0,d=this._rings.length,y;l<d;l++)y=Me(this._rings[l],t,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e=!1,r,l,d,y,C,q,W,$;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(y=0,W=this._parts.length;y<W;y++)for(r=this._parts[y],C=0,$=r.length,q=$-1;C<$;q=C++)l=r[C],d=r[q],l.y>t.y!=d.y>t.y&&t.x<(d.x-l.x)*(t.y-l.y)/(d.y-l.y)+l.x&&(e=!e);return e||ui.prototype._containsPoint.call(this,t,!0)}});function Mo(t,e){return new ze(t,e)}var _i=En.extend({initialize:function(t,e){Z(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e=B(t)?t:t.features,r,l,d;if(e){for(r=0,l=e.length;r<l;r++)d=e[r],(d.geometries||d.geometry||d.features||d.coordinates)&&this.addData(d);return this}var y=this.options;if(y.filter&&!y.filter(t))return this;var C=br(t,y);return C?(C.feature=Un(t),C.defaultOptions=C.options,this.resetStyle(C),y.onEachFeature&&y.onEachFeature(t,C),this.addLayer(C)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=s({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){t.setStyle&&(typeof e=="function"&&(e=e(t.feature)),t.setStyle(e))}});function br(t,e){var r=t.type==="Feature"?t.geometry:t,l=r?r.coordinates:null,d=[],y=e&&e.pointToLayer,C=e&&e.coordsToLatLng||Wt,q,W,$,nt;if(!l&&!r)return null;switch(r.type){case"Point":return q=C(l),Do(y,t,q,e);case"MultiPoint":for($=0,nt=l.length;$<nt;$++)q=C(l[$]),d.push(Do(y,t,q,e));return new En(d);case"LineString":case"MultiLineString":return W=an(l,r.type==="LineString"?0:1,C),new ui(W,e);case"Polygon":case"MultiPolygon":return W=an(l,r.type==="Polygon"?1:2,C),new ze(W,e);case"GeometryCollection":for($=0,nt=r.geometries.length;$<nt;$++){var mt=br({geometry:r.geometries[$],type:"Feature",properties:t.properties},e);mt&&d.push(mt)}return new En(d);default:throw new Error("Invalid GeoJSON object.")}}function Do(t,e,r,l){return t?t(e,r):new _r(r,l&&l.markersInheritOptions&&l)}function Wt(t){return new vt(t[1],t[0],t[2])}function an(t,e,r){for(var l=[],d=0,y=t.length,C;d<y;d++)C=e?an(t[d],e-1,r):(r||Wt)(t[d]),l.push(C);return l}function je(t,e){return e=typeof e=="number"?e:6,t.alt!==void 0?[A(t.lng,e),A(t.lat,e),A(t.alt,e)]:[A(t.lng,e),A(t.lat,e)]}function Be(t,e,r,l){for(var d=[],y=0,C=t.length;y<C;y++)d.push(e?Be(t[y],e-1,r,l):je(t[y],l));return!e&&r&&d.push(d[0]),d}function Ui(t,e){return t.feature?s({},t.feature,{geometry:e}):Un(e)}function Un(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var Jr={toGeoJSON:function(t){return Ui(this,{type:"Point",coordinates:je(this.getLatLng(),t)})}};_r.include(Jr),on.include(Jr),yr.include(Jr),ui.include({toGeoJSON:function(t){var e=!le(this._latlngs),r=Be(this._latlngs,e?1:0,!1,t);return Ui(this,{type:(e?"Multi":"")+"LineString",coordinates:r})}}),ze.include({toGeoJSON:function(t){var e=!le(this._latlngs),r=e&&!le(this._latlngs[0]),l=Be(this._latlngs,r?2:e?1:0,!0,t);return e||(l=[l]),Ui(this,{type:(r?"Multi":"")+"Polygon",coordinates:l})}}),rn.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(r){e.push(r.toGeoJSON(t).geometry.coordinates)}),Ui(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(e==="MultiPoint")return this.toMultiPoint(t);var r=e==="GeometryCollection",l=[];return this.eachLayer(function(d){if(d.toGeoJSON){var y=d.toGeoJSON(t);if(r)l.push(y.geometry);else{var C=Un(y);C.type==="FeatureCollection"?l.push.apply(l,C.features):l.push(C)}}}),r?Ui(this,{geometries:l,type:"GeometryCollection"}):{type:"FeatureCollection",features:l}}});function Io(t,e){return new _i(t,e)}var Oo=Io,vi=Te.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,r){this._url=t,this._bounds=Nt(e),Z(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Pt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&Tn(this._image),this},bringToBack:function(){return this._map&&Ln(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Nt(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",e=this._image=t?this._url:wt("img");if(Pt(e,"leaflet-image-layer"),this._zoomAnimated&&Pt(e,"leaflet-zoom-animated"),this.options.className&&Pt(e,this.options.className),e.onselectstart=E,e.onmousemove=E,e.onload=p(this.fire,this,"load"),e.onerror=p(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(e.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=e.src;return}e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;ni(this._image,r,e)},_reset:function(){var t=this._image,e=new kt(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=e.getSize();de(t,e.min),t.style.width=r.x+"px",t.style.height=r.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$r=function(t,e,r){return new vi(t,e,r)},to=vi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t=this._url.tagName==="VIDEO",e=this._image=t?this._url:wt("video");if(Pt(e,"leaflet-image-layer"),this._zoomAnimated&&Pt(e,"leaflet-zoom-animated"),this.options.className&&Pt(e,this.options.className),e.onselectstart=E,e.onmousemove=E,e.onloadeddata=p(this.fire,this,"load"),t){for(var r=e.getElementsByTagName("source"),l=[],d=0;d<r.length;d++)l.push(r[d].src);this._url=r.length>0?l:[e.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var y=0;y<this._url.length;y++){var C=wt("source");C.src=this._url[y],e.appendChild(C)}}});function xr(t,e,r){return new to(t,e,r)}var Gn=vi.extend({_initImage:function(){var t=this._image=this._url;Pt(t,"leaflet-image-layer"),this._zoomAnimated&&Pt(t,"leaflet-zoom-animated"),this.options.className&&Pt(t,this.options.className),t.onselectstart=E,t.onmousemove=E}});function eo(t,e,r){return new Gn(t,e,r)}var Ti=Te.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){Z(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Xe(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(p(Xt,void 0,this._container),200)):Xt(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=At(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){!this._map||(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Tn(this._container),this},bringToBack:function(){return this._map&&Ln(this._container),this},_prepareOpen:function(t,e,r){if(e instanceof Te||(r=e,e=t),e instanceof En)for(var l in t._layers){e=t._layers[l];break}if(!r)if(e.getCenter)r=e.getCenter();else if(e.getLatLng)r=e.getLatLng();else throw new Error("Unable to get source layer LatLng.");return this._source=e,this.update(),r},_updateContent:function(){if(!!this._content){var t=this._contentNode,e=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof e=="string")t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(!!this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=lt(this.options.offset),r=this._getAnchor();this._zoomAnimated?de(this._container,t.add(r)):e=e.add(t).add(r);var l=this._containerBottom=-e.y,d=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=l+"px",this._container.style.left=d+"px"}},_getAnchor:function(){return[0,0]}}),Li=Ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){Ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof qi||this._source.on("preclick",$i))},onRemove:function(t){Ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof qi||this._source.off("preclick",$i))},getEvents:function(){var t=Ti.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=wt("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=wt("div",t+"-content-wrapper",e);if(this._contentNode=wt("div",t+"-content",r),tn(e),fr(this._contentNode),St(e,"contextmenu",$i),this._tipContainer=wt("div",t+"-tip-container",e),this._tip=wt("div",t+"-tip",this._tipContainer),this.options.closeButton){var l=this._closeButton=wt("a",t+"-close-button",e);l.href="#close",l.innerHTML="&#215;",St(l,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var r=t.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),e.width=r+1+"px",e.whiteSpace="",e.height="";var l=t.offsetHeight,d=this.options.maxHeight,y="leaflet-popup-scrolled";d&&l>d?(e.height=d+"px",Pt(t,y)):te(t,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),r=this._getAnchor();de(this._container,e.add(r))},_adjustPan:function(){if(!!this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(wn(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+e,l=this._containerWidth,d=new st(this._containerLeft,-r-this._containerBottom);d._add(Ni(this._container));var y=t.layerPointToContainerPoint(d),C=lt(this.options.autoPanPadding),q=lt(this.options.autoPanPaddingTopLeft||C),W=lt(this.options.autoPanPaddingBottomRight||C),$=t.getSize(),nt=0,mt=0;y.x+l+W.x>$.x&&(nt=y.x+l-$.x+W.x),y.x-nt-q.x<0&&(nt=y.x-q.x),y.y+r+W.y>$.y&&(mt=y.y+r-$.y+W.y),y.y-mt-q.y<0&&(mt=y.y-q.y),(nt||mt)&&t.fire("autopanstart").panBy([nt,mt])}},_onCloseButtonClick:function(t){this._close(),si(t)},_getAnchor:function(){return lt(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),io=function(t,e){return new Li(t,e)};zt.mergeOptions({closePopupOnClick:!0}),zt.include({openPopup:function(t,e,r){return t instanceof Li||(t=new Li(r).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return(!t||t===this._popup)&&(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Te.include({bindPopup:function(t,e){return t instanceof Li?(Z(t,e),this._popup=t,t._source=this):((!this._popup||e)&&(this._popup=new Li(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(!!this._popup&&!!this._map){if(si(t),e instanceof qi){this.openPopup(t.layer||t.target,t.latlng);return}this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Gi=Ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){Ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){Ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=Ti.prototype.getEvents.call(this);return ei&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip",e=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=wt("div",e)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,r,l=this._map,d=this._container,y=l.latLngToContainerPoint(l.getCenter()),C=l.layerPointToContainerPoint(t),q=this.options.direction,W=d.offsetWidth,$=d.offsetHeight,nt=lt(this.options.offset),mt=this._getAnchor();q==="top"?(e=W/2,r=$):q==="bottom"?(e=W/2,r=0):q==="center"?(e=W/2,r=$/2):q==="right"?(e=0,r=$/2):q==="left"?(e=W,r=$/2):C.x<y.x?(q="right",e=0,r=$/2):(q="left",e=W+(nt.x+mt.x)*2,r=$/2),t=t.subtract(lt(e,r,!0)).add(nt).add(mt),te(d,"leaflet-tooltip-right"),te(d,"leaflet-tooltip-left"),te(d,"leaflet-tooltip-top"),te(d,"leaflet-tooltip-bottom"),Pt(d,"leaflet-tooltip-"+q),de(d,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Xe(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return lt(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),_a=function(t,e){return new Gi(t,e)};zt.include({openTooltip:function(t,e,r){return t instanceof Gi||(t=new Gi(r).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Te.include({bindTooltip:function(t,e){return t instanceof Gi?(Z(t,e),this._tooltip=t,t._source=this):((!this._tooltip||e)&&(this._tooltip=new Gi(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var e=t?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),ei&&(r.click=this._openTooltip)),this[e](r),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(Pt(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(te(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;!this._tooltip||!this._map||this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e=t.latlng,r,l;this._tooltip.options.sticky&&t.originalEvent&&(r=this._map.mouseEventToContainerPoint(t.originalEvent),l=this._map.containerPointToLayerPoint(r),e=this._map.layerPointToLatLng(l)),this._tooltip.setLatLng(e)}});var b=Pn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&t.tagName==="DIV"?t:document.createElement("div"),r=this.options;if(r.html instanceof Element?(Ji(e),e.appendChild(r.html)):e.innerHTML=r.html!==!1?r.html:"",r.bgPos){var l=lt(r.bgPos);e.style.backgroundPosition=-l.x+"px "+-l.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function k(t){return new b(t)}Pn.Default=qn;var O=Te.extend({options:{tileSize:256,opacity:1,updateWhenIdle:we,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){Z(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Xt(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Tn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ln(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=R(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof st?t:new st(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e=this.getPane().children,r=-t(-1/0,1/0),l=0,d=e.length,y;l<d;l++)y=e[l].style.zIndex,e[l]!==this._container&&y&&(r=t(r,+y));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(!!this._map&&!di){Xe(this._container,this.options.opacity);var t=+new Date,e=!1,r=!1;for(var l in this._tiles){var d=this._tiles[l];if(!(!d.current||!d.loaded)){var y=Math.min(1,(t-d.loaded)/200);Xe(d.el,y),y<1?e=!0:(d.active?r=!0:this._onOpaqueTile(d),d.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),e&&(xt(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this))}},_onOpaqueTile:E,_initContainer:function(){this._container||(this._container=wt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(t!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===t?(this._levels[r].el.style.zIndex=e-Math.abs(t-r),this._onUpdateLevel(r)):(Xt(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var l=this._levels[t],d=this._map;return l||(l=this._levels[t]={},l.el=wt("div","leaflet-tile-container leaflet-zoom-animated",this._container),l.el.style.zIndex=e,l.origin=d.project(d.unproject(d.getPixelOrigin()),t).round(),l.zoom=t,this._setZoomTransform(l,d.getCenter(),d.getZoom()),E(l.el.offsetWidth),this._onCreateLevel(l)),this._level=l,l}},_onUpdateLevel:E,_onRemoveLevel:E,_onCreateLevel:E,_pruneTiles:function(){if(!!this._map){var t,e,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var l=e.coords;this._retainParent(l.x,l.y,l.z,l.z-5)||this._retainChildren(l.x,l.y,l.z,l.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Xt(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,r,l){var d=Math.floor(t/2),y=Math.floor(e/2),C=r-1,q=new st(+d,+y);q.z=+C;var W=this._tileCoordsToKey(q),$=this._tiles[W];return $&&$.active?($.retain=!0,!0):($&&$.loaded&&($.retain=!0),C>l?this._retainParent(d,y,C,l):!1)},_retainChildren:function(t,e,r,l){for(var d=2*t;d<2*t+2;d++)for(var y=2*e;y<2*e+2;y++){var C=new st(d,y);C.z=r+1;var q=this._tileCoordsToKey(C),W=this._tiles[q];if(W&&W.active){W.retain=!0;continue}else W&&W.loaded&&(W.retain=!0);r+1<l&&this._retainChildren(d,y,r+1,l)}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return e.minNativeZoom!==void 0&&t<e.minNativeZoom?e.minNativeZoom:e.maxNativeZoom!==void 0&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,r,l){var d=Math.round(e);this.options.maxZoom!==void 0&&d>this.options.maxZoom||this.options.minZoom!==void 0&&d<this.options.minZoom?d=void 0:d=this._clampZoom(d);var y=this.options.updateWhenZooming&&d!==this._tileZoom;(!l||y)&&(this._tileZoom=d,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),d!==void 0&&this._update(t),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var r in this._levels)this._setZoomTransform(this._levels[r],t,e)},_setZoomTransform:function(t,e,r){var l=this._map.getZoomScale(r,t.zoom),d=t.origin.multiplyBy(l).subtract(this._map._getNewPixelOrigin(e,r)).round();Ue?ni(t.el,d,l):de(t.el,d)},_resetGrid:function(){var t=this._map,e=t.options.crs,r=this._tileSize=this.getTileSize(),l=this._tileZoom,d=this._map.getPixelWorldBounds(this._tileZoom);d&&(this._globalTileRange=this._pxBoundsToTileRange(d)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],l).x/r.x),Math.ceil(t.project([0,e.wrapLng[1]],l).x/r.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],l).y/r.x),Math.ceil(t.project([e.wrapLat[1],0],l).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var e=this._map,r=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),l=e.getZoomScale(r,this._tileZoom),d=e.project(t,this._tileZoom).floor(),y=e.getSize().divideBy(l*2);return new kt(d.subtract(y),d.add(y))},_update:function(t){var e=this._map;if(!!e){var r=this._clampZoom(e.getZoom());if(t===void 0&&(t=e.getCenter()),this._tileZoom!==void 0){var l=this._getTiledPixelBounds(t),d=this._pxBoundsToTileRange(l),y=d.getCenter(),C=[],q=this.options.keepBuffer,W=new kt(d.getBottomLeft().subtract([q,-q]),d.getTopRight().add([q,-q]));if(!(isFinite(d.min.x)&&isFinite(d.min.y)&&isFinite(d.max.x)&&isFinite(d.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var $ in this._tiles){var nt=this._tiles[$].coords;(nt.z!==this._tileZoom||!W.contains(new st(nt.x,nt.y)))&&(this._tiles[$].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(t,r);return}for(var mt=d.min.y;mt<=d.max.y;mt++)for(var Ht=d.min.x;Ht<=d.max.x;Ht++){var sn=new st(Ht,mt);if(sn.z=this._tileZoom,!!this._isValidTile(sn)){var jn=this._tiles[this._tileCoordsToKey(sn)];jn?jn.current=!0:C.push(sn)}}if(C.sort(function(Cn,va){return Cn.distanceTo(y)-va.distanceTo(y)}),C.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var No=document.createDocumentFragment();for(Ht=0;Ht<C.length;Ht++)this._addTile(C[Ht],No);this._level.el.appendChild(No)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var r=this._globalTileRange;if(!e.wrapLng&&(t.x<r.min.x||t.x>r.max.x)||!e.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var l=this._tileCoordsToBounds(t);return Nt(this.options.bounds).overlaps(l)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,r=this.getTileSize(),l=t.scaleBy(r),d=l.add(r),y=e.unproject(l,t.z),C=e.unproject(d,t.z);return[y,C]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),r=new Gt(e[0],e[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),r=new st(+e[0],+e[1]);return r.z=+e[2],r},_removeTile:function(t){var e=this._tiles[t];!e||(Xt(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Pt(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=E,t.onmousemove=E,di&&this.options.opacity<1&&Xe(t,this.options.opacity),Ai&&!gn&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var r=this._getTilePos(t),l=this._tileCoordsToKey(t),d=this.createTile(this._wrapCoords(t),p(this._tileReady,this,t));this._initTile(d),this.createTile.length<2&&ct(p(this._tileReady,this,t,null,d)),de(d,r),this._tiles[l]={el:d,coords:t,current:!0},e.appendChild(d),this.fire("tileloadstart",{tile:d,coords:t})},_tileReady:function(t,e,r){e&&this.fire("tileerror",{error:e,tile:r,coords:t});var l=this._tileCoordsToKey(t);r=this._tiles[l],!!r&&(r.loaded=+new Date,this._map._fadeAnimated?(Xe(r.el,0),xt(this._fadeFrame),this._fadeFrame=ct(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),e||(Pt(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),di||!this._map._fadeAnimated?ct(this._pruneTiles,this):setTimeout(p(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new st(this._wrapX?T(t.x,this._wrapX):t.x,this._wrapY?T(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new kt(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Q(t){return new O(t)}var F=O.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=Z(this,e),e.detectRetina&&Ii&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),typeof e.subdomains=="string"&&(e.subdomains=e.subdomains.split("")),Ai||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&e===void 0&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var r=document.createElement("img");return St(r,"load",p(this._tileOnLoad,this,e,r)),St(r,"error",p(this._tileOnError,this,e,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),r.alt="",r.setAttribute("role","presentation"),r.src=this.getTileUrl(t),r},getTileUrl:function(t){var e={r:Ii?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return D(this._url,s(e,this.options))},_tileOnLoad:function(t,e){di?setTimeout(p(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,r){var l=this.options.errorTileUrl;l&&e.getAttribute("src")!==l&&(e.src=l),t(r,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,r=this.options.zoomReverse,l=this.options.zoomOffset;return r&&(t=e-t),t+l},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=E,e.onerror=E,e.complete||(e.src=Y,Xt(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(!!e)return pi||e.el.setAttribute("src",Y),O.prototype._removeTile.call(this,t)},_tileReady:function(t,e,r){if(!(!this._map||r&&r.getAttribute("src")===Y))return O.prototype._tileReady.call(this,t,e,r)}});function X(t,e){return new F(t,e)}var J=F.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=s({},this.defaultWmsParams);for(var l in e)l in this.options||(r[l]=e[l]);e=Z(this,e);var d=e.detectRetina&&Ii?2:1,y=this.getTileSize();r.width=y.x*d,r.height=y.y*d,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,F.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),r=this._crs,l=Et(r.project(e[0]),r.project(e[1])),d=l.min,y=l.max,C=(this._wmsVersion>=1.3&&this._crs===mr?[d.y,d.x,y.y,y.x]:[d.x,d.y,y.x,y.y]).join(","),q=F.prototype.getTileUrl.call(this,t);return q+M(this.wmsParams,q,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+C},setParams:function(t,e){return s(this.wmsParams,t),e||this.redraw(),this}});function it(t,e){return new J(t,e)}F.WMS=J,X.wms=it;var et=Te.extend({options:{padding:.1,tolerance:0},initialize:function(t){Z(this,t),x(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&Pt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var r=this._map.getZoomScale(e,this._zoom),l=Ni(this._container),d=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,e),C=this._map.project(t,e),q=C.subtract(y),W=d.multiplyBy(-r).add(l).add(d).subtract(q);Ue?ni(this._container,W,r):de(this._container,W)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),r=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new kt(r,r.add(e.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),gt=et.extend({getEvents:function(){var t=et.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){et.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");St(t,"mousemove",this._onMouseMove,this),St(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),St(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){xt(this._redrawRequest),delete this._ctx,Xt(this._container),se(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){et.prototype._update.call(this);var t=this._bounds,e=this._container,r=t.getSize(),l=Ii?2:1;de(e,t.min),e.width=l*r.x,e.height=l*r.y,e.style.width=r.x+"px",e.style.height=r.y+"px",Ii&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){et.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[x(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,r=e.next,l=e.prev;r?r.prev=l:this._drawLast=l,l?l.next=r:this._drawFirst=r,delete t._order,delete this._layers[x(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var e=t.options.dashArray.split(/[, ]+/),r=[],l,d;for(d=0;d<e.length;d++){if(l=Number(e[d]),isNaN(l))return;r.push(l)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){!this._map||(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||ct(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new kt,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var r=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var l=this._drawFirst;l;l=l.next)t=l.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(!!this._drawing){var r,l,d,y,C=t._parts,q=C.length,W=this._ctx;if(!!q){for(W.beginPath(),r=0;r<q;r++){for(l=0,d=C[r].length;l<d;l++)y=C[r][l],W[l?"lineTo":"moveTo"](y.x,y.y);e&&W.closePath()}this._fillStroke(W,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var e=t._point,r=this._ctx,l=Math.max(Math.round(t._radius),1),d=(Math.max(Math.round(t._radiusY),1)||l)/l;d!==1&&(r.save(),r.scale(1,d)),r.beginPath(),r.arc(e.x,e.y/d,l,0,Math.PI*2,!1),d!==1&&r.restore(),this._fillStroke(r,t)}},_fillStroke:function(t,e){var r=e.options;r.fill&&(t.globalAlpha=r.fillOpacity,t.fillStyle=r.fillColor||r.color,t.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=r.opacity,t.lineWidth=r.weight,t.strokeStyle=r.color,t.lineCap=r.lineCap,t.lineJoin=r.lineJoin,t.stroke())},_onClick:function(t){for(var e=this._map.mouseEventToLayerPoint(t),r,l,d=this._drawFirst;d;d=d.next)r=d.layer,r.options.interactive&&r._containsPoint(e)&&(!(t.type==="click"||t.type!=="preclick")||!this._map._draggableMoved(r))&&(l=r);l&&(Qr(t),this._fireEvent([l],t))},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(te(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var r,l,d=this._drawFirst;d;d=d.next)r=d.layer,r.options.interactive&&r._containsPoint(e)&&(l=r);l!==this._hoveredLayer&&(this._handleMouseOut(t),l&&(Pt(this._container,"leaflet-interactive"),this._fireEvent([l],t,"mouseover"),this._hoveredLayer=l)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(p(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,e,r){this._map._fireDOMEvent(e,r||e.type,t)},_bringToFront:function(t){var e=t._order;if(!!e){var r=e.next,l=e.prev;if(r)r.prev=l;else return;l?l.next=r:r&&(this._drawFirst=r),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t)}},_bringToBack:function(t){var e=t._order;if(!!e){var r=e.next,l=e.prev;if(l)l.next=r;else return;r?r.prev=l:l&&(this._drawLast=l),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t)}}});function dt(t){return Kn?new gt(t):null}var pt=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Rt={_initContainer:function(){this._container=wt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(et.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=pt("shape");Pt(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=pt("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[x(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;Xt(e),t.removeInteractiveTarget(e),delete this._layers[x(t)]},_updateStyle:function(t){var e=t._stroke,r=t._fill,l=t.options,d=t._container;d.stroked=!!l.stroke,d.filled=!!l.fill,l.stroke?(e||(e=t._stroke=pt("stroke")),d.appendChild(e),e.weight=l.weight+"px",e.color=l.color,e.opacity=l.opacity,l.dashArray?e.dashStyle=B(l.dashArray)?l.dashArray.join(" "):l.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=l.lineCap.replace("butt","flat"),e.joinstyle=l.lineJoin):e&&(d.removeChild(e),t._stroke=null),l.fill?(r||(r=t._fill=pt("fill")),d.appendChild(r),r.color=l.fillColor||l.color,r.opacity=l.fillOpacity):r&&(d.removeChild(r),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),r=Math.round(t._radius),l=Math.round(t._radiusY||r);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+r+","+l+" 0,"+65535*360)},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){Tn(t._container)},_bringToBack:function(t){Ln(t._container)}},Ft=Jn?pt:Qe,ft=et.extend({getEvents:function(){var t=et.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Ft("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ft("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xt(this._container),se(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){et.prototype._update.call(this);var t=this._bounds,e=t.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(e))&&(this._svgSize=e,r.setAttribute("width",e.x),r.setAttribute("height",e.y)),de(r,t.min),r.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ft("path");t.options.className&&Pt(e,t.options.className),t.options.interactive&&Pt(e,"leaflet-interactive"),this._updateStyle(t),this._layers[x(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Xt(t._path),t.removeInteractiveTarget(t._path),delete this._layers[x(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,r=t.options;!e||(r.stroke?(e.setAttribute("stroke",r.color),e.setAttribute("stroke-opacity",r.opacity),e.setAttribute("stroke-width",r.weight),e.setAttribute("stroke-linecap",r.lineCap),e.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?e.setAttribute("stroke-dasharray",r.dashArray):e.removeAttribute("stroke-dasharray"),r.dashOffset?e.setAttribute("stroke-dashoffset",r.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),r.fill?(e.setAttribute("fill",r.fillColor||r.color),e.setAttribute("fill-opacity",r.fillOpacity),e.setAttribute("fill-rule",r.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,bi(t._parts,e))},_updateCircle:function(t){var e=t._point,r=Math.max(Math.round(t._radius),1),l=Math.max(Math.round(t._radiusY),1)||r,d="a"+r+","+l+" 0 1,0 ",y=t._empty()?"M0 0":"M"+(e.x-r)+","+e.y+d+r*2+",0 "+d+-r*2+",0 ";this._setPath(t,y)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){Tn(t._path)},_bringToBack:function(t){Ln(t._path)}});Jn&&ft.include(Rt);function me(t){return Xi||Jn?new ft(t):null}zt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var e=this._paneRenderers[t];return e===void 0&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&dt(t)||me(t)}});var Le=ze.extend({initialize:function(t,e){ze.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Nt(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function We(t,e){return new Le(t,e)}ft.create=Ft,ft.pointsToPath=bi,_i.geometryToLayer=br,_i.coordsToLatLng=Wt,_i.coordsToLatLngs=an,_i.latLngToCoords=je,_i.latLngsToCoords=Be,_i.getFeature=Ui,_i.asFeature=Un,zt.mergeOptions({boxZoom:!0});var ee=z.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){St(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){se(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ri(),sr(),this._startPoint=this._map.mouseEventToContainerPoint(t),St(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=wt("div","leaflet-zoom-box",this._container),Pt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new kt(this._point,this._startPoint),r=e.getSize();de(this._box,e.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(Xt(this._box),te(this._container,"leaflet-crosshair")),oi(),lr(),se(document,{contextmenu:si,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(p(this._resetState,this),0);var e=new Gt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){t.keyCode===27&&this._finish()}});zt.addInitHook("addHandler","boxZoom",ee),zt.mergeOptions({doubleClickZoom:!0});var kn=z.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,r=e.getZoom(),l=e.options.zoomDelta,d=t.originalEvent.shiftKey?r-l:r+l;e.options.doubleClickZoom==="center"?e.setZoom(d):e.setZoomAround(t.containerPoint,d)}});zt.addInitHook("addHandler","doubleClickZoom",kn),zt.mergeOptions({dragging:!0,inertia:!gn,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Sn=z.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ot(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Pt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){te(this._map._container,"leaflet-grab"),te(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=Nt(this._map.options.maxBounds);this._offsetLimit=Et(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),r=this._initialWorldOffset,l=this._draggable._newPos.x,d=(l-e+r)%t+e-r,y=(l+e+r)%t-e-r,C=Math.abs(d+r)<Math.abs(y+r)?d:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=C},_onDragEnd:function(t){var e=this._map,r=e.options,l=!r.inertia||this._times.length<2;if(e.fire("dragend",t),l)e.fire("moveend");else{this._prunePositions(+new Date);var d=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,C=r.easeLinearity,q=d.multiplyBy(C/y),W=q.distanceTo([0,0]),$=Math.min(r.inertiaMaxSpeed,W),nt=q.multiplyBy($/W),mt=$/(r.inertiaDeceleration*C),Ht=nt.multiplyBy(-mt/2).round();!Ht.x&&!Ht.y?e.fire("moveend"):(Ht=e._limitOffset(Ht,e.options.maxBounds),ct(function(){e.panBy(Ht,{duration:mt,easeLinearity:C,noMoveStart:!0,animate:!0})}))}}});zt.addInitHook("addHandler","dragging",Sn),zt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Fe=z.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),St(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),se(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,r=t.scrollTop||e.scrollTop,l=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(l,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e=this._panKeys={},r=this.keyCodes,l,d;for(l=0,d=r.left.length;l<d;l++)e[r.left[l]]=[-1*t,0];for(l=0,d=r.right.length;l<d;l++)e[r.right[l]]=[t,0];for(l=0,d=r.down.length;l<d;l++)e[r.down[l]]=[0,t];for(l=0,d=r.up.length;l<d;l++)e[r.up[l]]=[0,-1*t]},_setZoomDelta:function(t){var e=this._zoomKeys={},r=this.keyCodes,l,d;for(l=0,d=r.zoomIn.length;l<d;l++)e[r.zoomIn[l]]=t;for(l=0,d=r.zoomOut.length;l<d;l++)e[r.zoomOut[l]]=-t},_addHooks:function(){St(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){se(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e=t.keyCode,r=this._map,l;if(e in this._panKeys)(!r._panAnim||!r._panAnim._inProgress)&&(l=this._panKeys[e],t.shiftKey&&(l=lt(l).multiplyBy(3)),r.panBy(l),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(e in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[e]);else if(e===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;si(t)}}});zt.addInitHook("addHandler","keyboard",Fe),zt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ns=z.extend({addHooks:function(){St(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){se(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=dr(t),r=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var l=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(p(this._performZoom,this),l),si(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),r=this._map.options.zoomSnap||0;t._stop();var l=this._delta/(this._map.options.wheelPxPerZoomLevel*4),d=4*Math.log(2/(1+Math.exp(-Math.abs(l))))/Math.LN2,y=r?Math.ceil(d/r)*r:d,C=t._limitZoom(e+(this._delta>0?y:-y))-e;this._delta=0,this._startTime=null,!!C&&(t.options.scrollWheelZoom==="center"?t.setZoom(e+C):t.setZoomAround(this._lastMousePos,e+C))}});zt.addInitHook("addHandler","scrollWheelZoom",ns),zt.mergeOptions({tap:!0,tapTolerance:15});var rs=z.extend({addHooks:function(){St(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){se(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(!!t.touches){if(Ge(t),this._fireClick=!0,t.touches.length>1){this._fireClick=!1,clearTimeout(this._holdTimeout);return}var e=t.touches[0],r=e.target;this._startPos=this._newPos=new st(e.clientX,e.clientY),r.tagName&&r.tagName.toLowerCase()==="a"&&Pt(r,"leaflet-active"),this._holdTimeout=setTimeout(p(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),St(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),se(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],r=e.target;r&&r.tagName&&r.tagName.toLowerCase()==="a"&&te(r,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new st(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var r=document.createEvent("MouseEvents");r._simulated=!0,e.target._simulatedClick=!0,r.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}});ei&&(!ti||Yi)&&zt.addInitHook("addHandler","tap",rs),zt.mergeOptions({touchZoom:ei&&!gn,bounceAtZoomLimits:!0});var os=z.extend({addHooks:function(){Pt(this._map._container,"leaflet-touch-zoom"),St(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){te(this._map._container,"leaflet-touch-zoom"),se(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(!(!t.touches||t.touches.length!==2||e._animatingZoom||this._zooming)){var r=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),e.options.touchZoom!=="center"&&(this._pinchStartLatLng=e.containerPointToLatLng(r.add(l)._divideBy(2))),this._startDist=r.distanceTo(l),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),St(document,"touchmove",this._onTouchMove,this),St(document,"touchend",this._onTouchEnd,this),Ge(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var e=this._map,r=e.mouseEventToContainerPoint(t.touches[0]),l=e.mouseEventToContainerPoint(t.touches[1]),d=r.distanceTo(l)/this._startDist;if(this._zoom=e.getScaleZoom(d,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&d<1||this._zoom>e.getMaxZoom()&&d>1)&&(this._zoom=e._limitZoom(this._zoom)),e.options.touchZoom==="center"){if(this._center=this._startLatLng,d===1)return}else{var y=r._add(l)._divideBy(2)._subtract(this._centerPoint);if(d===1&&y.x===0&&y.y===0)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),xt(this._animRequest);var C=p(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=ct(C,this,!0),Ge(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,xt(this._animRequest),se(document,"touchmove",this._onTouchMove,this),se(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});zt.addInitHook("addHandler","touchZoom",os),zt.BoxZoom=ee,zt.DoubleClickZoom=kn,zt.Drag=Sn,zt.Keyboard=Fe,zt.ScrollWheelZoom=ns,zt.Tap=rs,zt.TouchZoom=os,a.version=n,a.Control=li,a.control=i,a.Browser=ca,a.Evented=re,a.Mixin=j,a.Util=It,a.Class=Ut,a.Handler=z,a.extend=s,a.bind=p,a.stamp=x,a.setOptions=Z,a.DomEvent=So,a.DomUtil=da,a.PosAnimation=pr,a.Draggable=ot,a.LineUtil=en,a.PolyUtil=Zi,a.Point=st,a.point=lt,a.Bounds=kt,a.bounds=Et,a.Transformation=qe,a.transformation=xe,a.Projection=Co,a.LatLng=vt,a.latLng=At,a.LatLngBounds=Gt,a.latLngBounds=Nt,a.CRS=ae,a.GeoJSON=_i,a.geoJSON=Io,a.geoJson=Oo,a.Layer=Te,a.LayerGroup=rn,a.layerGroup=Kr,a.FeatureGroup=En,a.featureGroup=gr,a.ImageOverlay=vi,a.imageOverlay=$r,a.VideoOverlay=to,a.videoOverlay=xr,a.SVGOverlay=Gn,a.svgOverlay=eo,a.DivOverlay=Ti,a.Popup=Li,a.popup=io,a.Tooltip=Gi,a.tooltip=_a,a.Icon=Pn,a.icon=Ao,a.DivIcon=b,a.divIcon=k,a.Marker=_r,a.marker=vr,a.TileLayer=F,a.tileLayer=X,a.GridLayer=O,a.gridLayer=Q,a.SVG=ft,a.svg=me,a.Renderer=et,a.Canvas=gt,a.canvas=dt,a.Path=qi,a.CircleMarker=yr,a.circleMarker=ma,a.Circle=on,a.circle=ga,a.Polyline=ui,a.polyline=wi,a.Polygon=ze,a.polygon=Mo,a.Rectangle=Le,a.rectangle=We,a.Map=zt,a.map=pa;var Fl=window.L;a.noConflict=function(){return window.L=Fl,this},window.L=a})});var Ba=Fo(($o,nl)=>{(function(a,n){typeof $o=="object"&&typeof nl!="undefined"?n($o,Ze()):typeof define=="function"&&define.amd?define(["exports","leaflet"],n):n(((a=a||self).L=a.L||{},a.L.geodesic={}),a.L)})($o,function(a,n){"use strict";var s=function(M,I){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,B){D.__proto__=B}||function(D,B){for(var U in B)B.hasOwnProperty(U)&&(D[U]=B[U])})(M,I)};function f(M,I){function D(){this.constructor=M}s(M,I),M.prototype=I===null?Object.create(I):(D.prototype=I.prototype,new D)}var p=function(){return(p=Object.assign||function(M){for(var I,D=1,B=arguments.length;D<B;D++)for(var U in I=arguments[D])Object.prototype.hasOwnProperty.call(I,U)&&(M[U]=I[U]);return M}).apply(this,arguments)};function g(){for(var M=0,I=0,D=arguments.length;I<D;I++)M+=arguments[I].length;var B=Array(M),U=0;for(I=0;I<D;I++)for(var Y=arguments[I],tt=0,h=Y.length;tt<h;tt++,U++)B[U]=Y[tt];return B}var x=function(){function M(I){this.options={wrap:!0,steps:3},this.ellipsoid={a:6378137,b:63567523142e-4,f:1/298.257223563},this.options=p(p({},this.options),I)}return M.prototype.toRadians=function(I){return I*Math.PI/180},M.prototype.toDegrees=function(I){return 180*I/Math.PI},M.prototype.mod=function(I,D){var B=I%D;return B<0?B+D:B},M.prototype.wrap360=function(I){return 0<=I&&I<360?I:this.mod(I,360)},M.prototype.wrap=function(I,D){return D===void 0&&(D=360),-D<=I&&I<=D?I:this.mod(I+D,2*D)-D},M.prototype.direct=function(I,D,B,U){U===void 0&&(U=100);var Y=this.toRadians(I.lat),tt=this.toRadians(I.lng),h=this.toRadians(D),_t=B,at=1e3*Number.EPSILON,Lt=this.ellipsoid,ct=Lt.a,xt=Lt.b,It=Lt.f,Ut=Math.sin(h),Ot=Math.cos(h),Ct=(1-It)*Math.tan(Y),re=1/Math.sqrt(1+Ct*Ct),st=Ct*re,ge=Math.atan2(Ct,Ot),lt=re*Ut,kt=1-lt*lt,Et=kt*(ct*ct-xt*xt)/(xt*xt),Gt=1+Et/16384*(4096+Et*(Et*(320-175*Et)-768)),Nt=Et/1024*(256+Et*(Et*(74-47*Et)-128)),vt=_t/(xt*Gt),At=null,ae=null,ne=null,Ce=null,fe=0;do ne=Math.cos(2*ge+vt),Ce=vt,vt=_t/(xt*Gt)+Nt*(At=Math.sin(vt))*(ne+Nt/4*((ae=Math.cos(vt))*(2*ne*ne-1)-Nt/6*ne*(4*At*At-3)*(4*ne*ne-3)));while(Math.abs(vt-Ce)>at&&++fe<U);if(fe>=U)throw new EvalError("Direct vincenty formula failed to converge after "+U+` iterations 
                (start=`+I.lat+"/"+I.lng+"; bearing="+D+"; distance="+B+")");var qe=st*At-re*ae*Ot,xe=Math.atan2(st*ae+re*At*Ot,(1-It)*Math.sqrt(lt*lt+qe*qe)),$e=It/16*kt*(4+It*(4-3*kt)),ye=tt+(Math.atan2(At*Ut,re*ae-st*At*Ot)-(1-$e)*It*lt*(vt+$e*At*(ne+$e*ae*(2*ne*ne-1)))),Qe=Math.atan2(lt,-qe);return{lat:this.toDegrees(xe),lng:this.toDegrees(ye),bearing:this.wrap360(this.toDegrees(Qe))}},M.prototype.inverse=function(I,D,B,U){B===void 0&&(B=100),U===void 0&&(U=!0);var Y=I,tt=D,h=this.toRadians(Y.lat),_t=this.toRadians(Y.lng),at=this.toRadians(tt.lat),Lt=this.toRadians(tt.lng),ct=Math.PI,xt=Number.EPSILON,It=this.ellipsoid,Ut=It.a,Ot=It.b,Ct=It.f,re=Lt-_t,st=(1-Ct)*Math.tan(h),ge=1/Math.sqrt(1+st*st),lt=st*ge,kt=(1-Ct)*Math.tan(at),Et=1/Math.sqrt(1+kt*kt),Gt=kt*Et,Nt=Math.abs(re)>ct/2||Math.abs(at-h)>ct/2,vt=re,At=null,ae=null,ne=Nt?ct:0,Ce=0,fe=Nt?-1:1,qe=null,xe=1,$e=null,ye=1,Qe=null,bi=null,ht=0;do{if(qe=Et*(At=Math.sin(vt))*(Et*At)+(ge*Gt-lt*Et*(ae=Math.cos(vt)))*(ge*Gt-lt*Et*ae),Math.abs(qe)<xt)break;if(fe=lt*Gt+ge*Et*ae,bi=vt,vt=re+(1-(Qe=Ct/16*(ye=1-($e=ge*Et*At/(Ce=Math.sqrt(qe)))*$e)*(4+Ct*(4-3*ye))))*Ct*$e*((ne=Math.atan2(Ce,fe))+Qe*Ce*((xe=ye!==0?fe-2*lt*Gt/ye:0)+Qe*fe*(2*xe*xe-1))),(Nt?Math.abs(vt)-ct:Math.abs(vt))>ct)throw new EvalError("\u03BB > \u03C0")}while(Math.abs(vt-bi)>1e-12&&++ht<B);if(ht>=B){if(U)return this.inverse(I,new n.LatLng(D.lat,D.lng-.01),B,U);throw new EvalError("Inverse vincenty formula failed to converge after "+B+` iterations 
                    (start=`+I.lat+"/"+I.lng+"; dest="+D.lat+"/"+D.lng+")")}var $t=ye*(Ut*Ut-Ot*Ot)/(Ot*Ot),di=$t/1024*(256+$t*($t*(74-47*$t)-128)),Ci=Ot*(1+$t/16384*(4096+$t*($t*(320-175*$t)-768)))*(ne-di*Ce*(xe+di/4*(fe*(2*xe*xe-1)-di/6*xe*(4*Ce*Ce-3)*(4*xe*xe-3)))),Dn=Math.abs(qe)<xt?0:Math.atan2(Et*At,ge*Gt-lt*Et*ae),Ai=Math.abs(qe)<xt?ct:Math.atan2(ge*At,-lt*Et+ge*Gt*ae);return{distance:Ci,initialBearing:Math.abs(Ci)<xt?NaN:this.wrap360(this.toDegrees(Dn)),finalBearing:Math.abs(Ci)<xt?NaN:this.wrap360(this.toDegrees(Ai))}},M.prototype.intersection=function(I,D,B,U){var Y=this.toRadians(I.lat),tt=this.toRadians(I.lng),h=this.toRadians(B.lat),_t=this.toRadians(B.lng),at=this.toRadians(D),Lt=this.toRadians(U),ct=h-Y,xt=_t-tt,It=Math.PI,Ut=Number.EPSILON,Ot=2*Math.asin(Math.sqrt(Math.sin(ct/2)*Math.sin(ct/2)+Math.cos(Y)*Math.cos(h)*Math.sin(xt/2)*Math.sin(xt/2)));if(Math.abs(Ot)<Ut)return I;var Ct=(Math.sin(h)-Math.sin(Y)*Math.cos(Ot))/(Math.sin(Ot)*Math.cos(Y)),re=(Math.sin(Y)-Math.sin(h)*Math.cos(Ot))/(Math.sin(Ot)*Math.cos(h)),st=Math.acos(Math.min(Math.max(Ct,-1),1)),ge=Math.acos(Math.min(Math.max(re,-1),1)),lt=at-(Math.sin(_t-tt)>0?st:2*It-st),kt=(Math.sin(_t-tt)>0?2*It-ge:ge)-Lt;if(Math.sin(lt)===0&&Math.sin(kt)===0||Math.sin(lt)*Math.sin(kt)<0)return null;var Et=-Math.cos(lt)*Math.cos(kt)+Math.sin(lt)*Math.sin(kt)*Math.cos(Ot),Gt=Math.atan2(Math.sin(Ot)*Math.sin(lt)*Math.sin(kt),Math.cos(kt)+Math.cos(lt)*Et),Nt=Math.asin(Math.min(Math.max(Math.sin(Y)*Math.cos(Gt)+Math.cos(Y)*Math.sin(Gt)*Math.cos(at),-1),1)),vt=tt+Math.atan2(Math.sin(at)*Math.sin(Gt)*Math.cos(Y),Math.cos(Gt)-Math.sin(Y)*Math.sin(Nt));return new n.LatLng(this.toDegrees(Nt),this.toDegrees(vt))},M.prototype.midpoint=function(I,D){var B=this.toRadians(I.lat),U=this.toRadians(I.lng),Y=this.toRadians(D.lat),tt=this.toRadians(D.lng-I.lng),h=Math.cos(B),_t=0,at=Math.sin(B),Lt={x:h+Math.cos(Y)*Math.cos(tt),y:_t+Math.cos(Y)*Math.sin(tt),z:at+Math.sin(Y)},ct=Math.atan2(Lt.z,Math.sqrt(Lt.x*Lt.x+Lt.y*Lt.y)),xt=U+Math.atan2(Lt.y,Lt.x);return new n.LatLng(this.toDegrees(ct),this.toDegrees(xt))},M}(),R=function(){function M(I){this.geodesic=new x,this.steps=I&&I.steps!==void 0?I.steps:3}return M.prototype.recursiveMidpoint=function(I,D,B){var U=[I,D],Y=this.geodesic.midpoint(I,D);return B>0?(U.splice.apply(U,g([0,1],this.recursiveMidpoint(I,Y,B-1))),U.splice.apply(U,g([U.length-2,2],this.recursiveMidpoint(Y,D,B-1)))):U.splice(1,0,Y),U},M.prototype.line=function(I,D){return this.recursiveMidpoint(I,D,Math.min(8,this.steps))},M.prototype.multiLineString=function(I){var D=this,B=[];return I.forEach(function(U){for(var Y=[],tt=1;tt<U.length;tt++)Y.splice.apply(Y,g([Y.length-1,1],D.line(U[tt-1],U[tt])));B.push(Y)}),B},M.prototype.lineString=function(I){return this.multiLineString([I])[0]},M.prototype.splitLine=function(I,D){var B={point:new n.LatLng(89.9,-180.0000001),bearing:180},U={point:new n.LatLng(89.9,180.0000001),bearing:180},Y=new n.LatLng(I.lat,I.lng),tt=new n.LatLng(D.lat,D.lng);Y.lng=this.geodesic.wrap(Y.lng,360),tt.lng=this.geodesic.wrap(tt.lng,360),tt.lng-Y.lng>180?tt.lng=tt.lng-360:tt.lng-Y.lng<-180&&(tt.lng=tt.lng+360);var h=[[new n.LatLng(Y.lat,this.geodesic.wrap(Y.lng,180)),new n.LatLng(tt.lat,this.geodesic.wrap(tt.lng,180))]];if(Y.lng>=-180&&Y.lng<=180)if(tt.lng<-180){var _t=this.geodesic.inverse(Y,tt).initialBearing;(at=this.geodesic.intersection(Y,_t,B.point,B.bearing))&&(h=[[Y,at],[new n.LatLng(at.lat,at.lng+360),new n.LatLng(tt.lat,tt.lng+360)]])}else tt.lng>180&&(_t=this.geodesic.inverse(Y,tt).initialBearing,(at=this.geodesic.intersection(Y,_t,U.point,U.bearing))&&(h=[[Y,at],[new n.LatLng(at.lat,at.lng-360),new n.LatLng(tt.lat,tt.lng-360)]]));else if(tt.lng>=-180&&tt.lng<=180){if(Y.lng<-180)_t=this.geodesic.inverse(Y,tt).initialBearing,(at=this.geodesic.intersection(Y,_t,B.point,B.bearing))&&(h=[[new n.LatLng(Y.lat,Y.lng+360),new n.LatLng(at.lat,at.lng+360)],[at,tt]]);else if(Y.lng>180){var at;_t=this.geodesic.inverse(Y,tt).initialBearing,(at=this.geodesic.intersection(Y,_t,B.point,B.bearing))&&(h=[[new n.LatLng(Y.lat,Y.lng-360),new n.LatLng(at.lat,at.lng-360)],[at,tt]])}}return h},M.prototype.splitMultiLineString=function(I){var D=this,B=[];return I.forEach(function(U){if(U.length===1)B.push(U);else{for(var Y=[],tt=1;tt<U.length;tt++){var h=D.splitLine(U[tt-1],U[tt]);Y.pop(),Y=Y.concat(h[0]),h.length>1&&(B.push(Y),Y=h[1])}B.push(Y)}}),B},M.prototype.wrapMultiLineString=function(I){var D=[];return I.forEach(function(B){var U=[],Y=null;B.forEach(function(tt){if(Y===null)U.push(tt),Y=tt;else{var h=tt.lng-Y.lng,_t=Math.sign(h/180)*Math.ceil(Math.abs(h/180));Math.abs(h)>180?U.push(new n.LatLng(tt.lat,tt.lng-180*_t)):U.push(new n.LatLng(tt.lat,tt.lng))}}),D.push(U)}),D},M.prototype.circle=function(I,D){for(var B=[],U=0;U<this.steps;U++){var Y=this.geodesic.direct(I,360/this.steps*U,D);B.push(new n.LatLng(Y.lat,Y.lng))}return B.push(new n.LatLng(B[0].lat,B[0].lng)),B},M.prototype.splitCircle=function(I){var D=[];return(D=this.splitMultiLineString([I])).length===3&&(D[2]=g(D[2],D[0]),D.shift()),D},M.prototype.distance=function(I,D){return this.geodesic.inverse(new n.LatLng(I.lat,this.geodesic.wrap(I.lng,180)),new n.LatLng(D.lat,this.geodesic.wrap(D.lng,180))).distance},M.prototype.multilineDistance=function(I){var D=this,B=[];return I.forEach(function(U){for(var Y=0,tt=1;tt<U.length;tt++)Y+=D.distance(U[tt-1],U[tt]);B.push(Y)}),B},M.prototype.updateStatistics=function(I,D){var B={};return B.distanceArray=this.multilineDistance(I),B.totalDistance=B.distanceArray.reduce(function(U,Y){return U+Y},0),B.points=0,I.forEach(function(U){B.points+=U.reduce(function(Y){return Y+1},0)}),B.vertices=0,D.forEach(function(U){B.vertices+=U.reduce(function(Y){return Y+1},0)}),B},M}();function T(M){return typeof M=="object"&&M!==null&&"lat"in M&&"lng"in M&&typeof M.lat=="number"&&typeof M.lng=="number"}function E(M){return M instanceof Array&&typeof M[0]=="number"&&typeof M[1]=="number"}function A(M){return M instanceof n.LatLng||!!E(M)||!!T(M)}function N(M){if(M instanceof n.LatLng)return M;if(E(M))return new n.LatLng(M[0],M[1]);if(T(M))return new n.LatLng(M.lat,M.lng);throw new Error("L.LatLngExpression expected. Unknown object found.")}var H=function(M){function I(D,B){var U=M.call(this,[],B)||this;return U.defaultOptions={wrap:!0,steps:3},U.statistics={},U.points=[],n.Util.setOptions(U,p(p({},U.defaultOptions),B)),U.geom=new R(U.options),D!==void 0&&U.setLatLngs(D),U}return f(I,M),I.prototype.updateGeometry=function(){var D;if(D=this.geom.multiLineString(this.points),this.statistics=this.geom.updateStatistics(this.points,D),this.options.wrap){var B=this.geom.splitMultiLineString(D);M.prototype.setLatLngs.call(this,B)}else M.prototype.setLatLngs.call(this,this.geom.wrapMultiLineString(D))},I.prototype.setLatLngs=function(D){return this.points=function(B){for(var U=[],Y=function(_t){if(A(_t)){var at=[];return B.forEach(function(ct){at.push(N(ct))}),U.push(at),"break"}if(!(_t instanceof Array))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");if(!A(_t[0]))throw new Error("L.LatLngExpression[] | L.LatLngExpression[][] expected. Unknown object found.");var Lt=[];_t.forEach(function(ct){Lt.push(N(ct))}),U.push(Lt)},tt=0,h=B;tt<h.length&&Y(h[tt])!=="break";tt++);return U}(D),this.updateGeometry(),this},I.prototype.addLatLng=function(D,B){var U=N(D);return this.points.length===0?this.points.push([U]):B===void 0?this.points[this.points.length-1].push(U):B.push(U),this.updateGeometry(),this},I.prototype.fromGeoJson=function(D){var B=[],U=[];return D.type==="FeatureCollection"?U=D.features:D.type==="Feature"?U=[D]:["MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"].includes(D.type)?U=[{type:"Feature",geometry:D,properties:{}}]:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+D.type+'" not supported.'),U.forEach(function(Y){switch(Y.geometry.type){case"MultiPoint":case"LineString":B=g(B,[n.GeoJSON.coordsToLatLngs(Y.geometry.coordinates,0)]);break;case"MultiLineString":case"Polygon":B=g(B,n.GeoJSON.coordsToLatLngs(Y.geometry.coordinates,1));break;case"MultiPolygon":Y.geometry.coordinates.forEach(function(tt){B=g(B,n.GeoJSON.coordsToLatLngs(tt,1))});break;default:console.log('[Leaflet.Geodesic] fromGeoJson() - Type "'+Y.geometry.type+'" not supported.')}}),B.length&&this.setLatLngs(B),this},I.prototype.distance=function(D,B){return this.geom.distance(N(D),N(B))},I}(n.Polyline),Z=function(M){function I(D,B){var U=M.call(this,[],B)||this;U.defaultOptions={wrap:!0,steps:24,fill:!0,noClip:!0},U.statistics={},n.Util.setOptions(U,p(p({},U.defaultOptions),B));var Y=U.options;return U.radius=Y.radius===void 0?1e6:Y.radius,U.center=D===void 0?new n.LatLng(0,0):N(D),U.geom=new R(U.options),U.update(),U}return f(I,M),I.prototype.update=function(){var D=this.geom.circle(this.center,this.radius);if(this.statistics=this.geom.updateStatistics([[this.center]],[D]),this.statistics.totalDistance=this.geom.multilineDistance([D]).reduce(function(U,Y){return U+Y},0),this.options.wrap){var B=this.geom.splitCircle(D);M.prototype.setLatLngs.call(this,B)}else M.prototype.setLatLngs.call(this,D)},I.prototype.distanceTo=function(D){var B=N(D);return this.geom.distance(this.center,B)},I.prototype.setLatLng=function(D,B){this.center=N(D),this.radius=B||this.radius,this.update()},I.prototype.setRadius=function(D,B){this.radius=D,this.center=B?N(B):this.center,this.update()},I}(n.Polyline);window.L!==void 0&&(window.L.Geodesic=H,window.L.geodesic=function(){for(var M=[],I=0;I<arguments.length;I++)M[I]=arguments[I];return new(H.bind.apply(H,g([void 0],M)))},window.L.GeodesicCircle=Z,window.L.geodesiccircle=function(){for(var M=[],I=0;I<arguments.length;I++)M[I]=arguments[I];return new(Z.bind.apply(Z,g([void 0],M)))}),a.GeodesicCircleClass=Z,a.GeodesicLine=H,Object.defineProperty(a,"__esModule",{value:!0})})});var Il=Fo((es,Dl)=>{var Tu={}.hasOwnProperty,Lu=[].slice;es.OverlappingMarkerSpiderfier=function(){var a,n,s,f,p,g,x;g=R.prototype,n=google.maps,a=n.event,p=n.MapTypeId,x=Math.PI*2,g.keepSpiderfied=!1,g.markersWontHide=!1,g.markersWontMove=!1,g.spiderfiedShadowColor="white",g.nudgeStackedMarkers=!0,g.minNudgeZoomLevel=8,g.nudgeRadius=1,g.markerCountInBaseNudgeLevel=9,g.maxNudgeCount=9,g.nudgeBucketSize=12,g.nearbyDistance=20,g.circleSpiralSwitchover=9,g.circleFootSeparation=23,g.circleStartAngle=x/12,g.spiralFootSeparation=26,g.spiralLengthStart=11,g.spiralLengthFactor=4,g.spiderfiedZIndex=1e3,g.usualLegZIndex=10,g.highlightedLegZIndex=20,g.event="click",g.minZoomLevel=!1,g.lineToCenter=!0,g.legWeight=1.5,g.legColors={usual:{},highlighted:{}},f=g.legColors.usual,s=g.legColors.highlighted,f[p.HYBRID]=f[p.SATELLITE]="#fff",s[p.HYBRID]=s[p.SATELLITE]="#f00",f[p.TERRAIN]=f[p.ROADMAP]="#444",s[p.TERRAIN]=s[p.ROADMAP]="#f00";function R(T,E){var A,N,H,Z,M,I;this.map=T,E==null&&(E={});for(H in E)!Tu.call(E,H)||(I=E[H],this[H]=I);for(this.projHelper=new this.constructor.ProjHelper(this.map),this.initMarkerArrays(),this.listeners={},M=["click","zoom_changed","maptypeid_changed"],N=0,Z=M.length;N<Z;N++)A=M[N],a.addListener(this.map,A,function(D){return function(){return D.unspiderfy()}}(this));this.nudgeStackedMarkers&&a.addListenerOnce(this.map,"idle",function(D){return function(){return a.addListener(D.map,"zoom_changed",function(){return D.mapZoomChangeListener()}),D.mapZoomChangeListener()}}(this))}return g.initMarkerArrays=function(){return this.markers=[],this.markerListenerRefs=[]},g.addMarker=function(T){var E;return T._oms!=null?this:(T._oms=!0,E=[a.addListener(T,this.event,function(A){return function(N){return A.spiderListener(T,N)}}(this))],this.markersWontHide||E.push(a.addListener(T,"visible_changed",function(A){return function(){return A.markerChangeListener(T,!1)}}(this))),this.markersWontMove||E.push(a.addListener(T,"position_changed",function(A){return function(){return A.markerChangeListener(T,!0)}}(this))),this.markerListenerRefs.push(E),this.markers.push(T),this.isNudgingActive()&&this.requestNudge(),this)},g.nudgeTimeout=null,g.requestNudge=function(){return this.nudgeTimeout&&clearTimeout(this.nudgeTimeout),this.nudgeTimeout=setTimeout(function(T){return function(){return T.nudgeAllMarkers()}}(this),10)},g.isNudgingActive=function(){return this.nudgeStackedMarkers&&!(this.minNudgeZoomLevel&&this.map.getZoom()<this.minNudgeZoomLevel)&&!this.spiderfied},g.markerChangeListener=function(T,E){if(T._omsData!=null&&T._omsData.leg&&(E||!T.getVisible())&&!(this.spiderfying!=null||this.unspiderfying!=null))return this.unspiderfy(E?T:null)},g.countsPerLevel=[1,1],g.levelsByCount=[],g.getCountPerNudgeLevel=function(T){return this.countsPerLevel[T]!=null?this.countsPerLevel[T]:(this.countsPerLevel[T]=this.getCountPerNudgeLevel(T-1)+Math.pow(2,T-2)*this.markerCountInBaseNudgeLevel,this.countsPerLevel[T])},g.getNudgeLevel=function(T){var E;if(this.levelsByCount[T]!=null)return this.levelsByCount[T];for(E=0;T>=this.countsPerLevel[E];)E+1>=this.countsPerLevel.length&&this.getCountPerNudgeLevel(E+1),E++;return this.levelsByCount[T]=E-1,this.levelsByCount[T]},g.nudgeAllMarkers=function(){var T,E,A,N,H,Z,M,I,D,B,U,Y,tt,h,_t,at,Lt,ct,xt,It,Ut,Ot,Ct;if(!!this.isNudgingActive()){for(_t={},N=[],H=[],T=1/((1+this.nudgeBucketSize)*this.nudgeRadius),M=function(re){return function(st){return Math.floor(st.x*T)+","+Math.floor(st.y*T)}}(this),at=this.markers,Ot=[],I=0,D=at.length;I<D;I++){for(B=at[I],U=!1,tt=this.llToPt((Lt=(ct=B._omsData)!=null?ct.usualPosition:void 0)!=null?Lt:B.position),Y={x:tt.x,y:tt.y},h=M(tt);_t[h]!=null&&(this.maxNudgeCount==null||_t[h]<=this.maxNudgeCount);)Z=_t[h],_t[h]+=1,N[Z]!=null?(E=N[Z],A=H[Z]):(Ct=this.getNudgeLevel(Z),N[Z]=E=Math.sin(x*Z/this.markerCountInBaseNudgeLevel/Ct)*20*this.nudgeRadius*Ct,H[Z]=A=Math.cos(x*Z/this.markerCountInBaseNudgeLevel/Ct)*20*this.nudgeRadius*Ct),tt.x=Y.x+E,tt.y=Y.y+A,this.nudged=!0,U=!0,h=M(tt);U?(B._omsData=(xt=B._omsData)!=null?xt:{},B._omsData.usualPosition=(It=(Ut=B._omsData)!=null?Ut.usualPosition:void 0)!=null?It:B.position,B.setPosition(this.ptToLl(tt))):B._omsData!=null&&B._omsData.leg==null&&(B.setPosition(B._omsData.usualPosition),delete B._omsData),h in _t?Ot.push(void 0):Ot.push(_t[h]=1)}return Ot}},g.resetNudgedMarkers=function(){var T,E,A,N;if(!!this.nudged){for(N=this.markers,T=0,E=N.length;T<E;T++)A=N[T],A._omsData!=null&&A._omsData.leg==null&&(A.setPosition(A._omsData.usualPosition),delete A._omsData);return delete this.nudged}},g.mapZoomChangeListener=function(){return this.minNudgeZoomLevel&&this.map.getZoom()<this.minNudgeZoomLevel?this.resetNudgedMarkers():this.requestNudge()},g.getMarkers=function(){return this.markers.slice(0)},g.removeMarker=function(T){var E,A,N,H,Z;if(T._omsData!=null&&this.unspiderfy(),E=this.arrIndexOf(this.markers,T),E<0)return this;for(Z=this.markerListenerRefs.splice(E,1)[0],A=0,N=Z.length;A<N;A++)H=Z[A],a.removeListener(H);return delete T._oms,this.markers.splice(E,1),this.isNudgingActive()&&this.requestNudge(),this},g.clearMarkers=function(){var T,E,A,N,H,Z,M,I,D;for(this.unspiderfy(),D=this.markers,T=E=0,N=D.length;E<N;T=++E){for(I=D[T],M=this.markerListenerRefs[T],A=0,H=M.length;A<H;A++)Z=M[A],a.removeListener(Z);delete I._oms}return this.initMarkerArrays(),this},g.addListener=function(T,E){var A;return((A=this.listeners)[T]!=null?A[T]:A[T]=[]).push(E),this},g.removeListener=function(T,E){var A;return A=this.arrIndexOf(this.listeners[T],E),A<0||this.listeners[T].splice(A,1),this},g.clearListeners=function(T){return this.listeners[T]=[],this},g.trigger=function(){var T,E,A,N,H,Z,M,I;for(E=arguments[0],T=2<=arguments.length?Lu.call(arguments,1):[],M=(Z=this.listeners[E])!=null?Z:[],I=[],N=0,H=M.length;N<H;N++)A=M[N],I.push(A.apply(null,T));return I},g.generatePtsCircle=function(T,E){var A,N,H,Z,M,I,D,B;for(H=this.circleFootSeparation*(2+T),I=H/x,N=x/T,B=[],Z=M=0,D=T;0<=D?M<D:M>D;Z=0<=D?++M:--M)A=this.circleStartAngle+Z*N,B.push(new n.Point(E.x+I*Math.cos(A),E.y+I*Math.sin(A)));return B},g.generatePtsSpiral=function(T,E){var A,N,H,Z,M,I,D;for(Z=this.spiralLengthStart,A=0,D=[],N=H=0,I=T;0<=I?H<I:H>I;N=0<=I?++H:--H)A+=this.spiralFootSeparation/Z+N*5e-4,M=new n.Point(E.x+Z*Math.cos(A),E.y+Z*Math.sin(A)),Z+=x*this.spiralLengthFactor/A,D.push(M);return D},g.spiderListener=function(T,E){var A,N,H,Z,M,I,D,B,U,Y,tt;if(I=T._omsData!=null&&T._omsData.leg!=null,I&&this.keepSpiderfied||(this.event==="mouseover"?(window.clearTimeout(g.timeout),g.timeout=setTimeout(function(h){return function(){return h.unspiderfy()}}(this),3e3)):this.unspiderfy()),I||this.map.getStreetView().getVisible()||this.map.getMapTypeId()==="GoogleEarthAPI"||this.minZoomLevel&&this.map.getZoom()<this.minZoomLevel)return this.trigger("click",T,E);for(B=[],U=[],D=this.nearbyDistance,Y=D*D,M=this.llToPt(T.position),tt=this.markers,A=0,N=tt.length;A<N;A++)H=tt[A],!!(H.map!=null&&H.getVisible())&&(Z=this.llToPt(H.position),this.ptDistanceSq(Z,M)<Y?B.push({marker:H,markerPt:Z}):U.push(H));return B.length===1?this.trigger("click",T,E):this.spiderfy(B,U)},g.markersNearMarker=function(T,E){var A,N,H,Z,M,I,D,B,U,Y,tt;if(E==null&&(E=!1),this.projHelper.getProjection()==null)throw"Must wait for 'idle' event on map before calling markersNearMarker";for(D=this.nearbyDistance,B=D*D,M=this.llToPt(T.position),I=[],U=this.markers,A=0,N=U.length;A<N&&(H=U[A],!(!(H===T||H.map==null||!H.getVisible())&&(Z=this.llToPt((Y=(tt=H._omsData)!=null?tt.usualPosition:void 0)!=null?Y:H.position),this.ptDistanceSq(Z,M)<B&&(I.push(H),E))));A++);return I},g.markersNearAnyOtherMarker=function(){var T,E,A,N,H,Z,M,I,D,B,U,Y,tt,h,_t,at,Lt,ct,xt,It,Ut;if(this.projHelper.getProjection()==null)throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(at=this.nearbyDistance,Lt=at*at,h=function(){var Ot,Ct,re,st,ge,lt;for(re=this.markers,lt=[],Ot=0,Ct=re.length;Ot<Ct;Ot++)D=re[Ot],lt.push({pt:this.llToPt((st=(ge=D._omsData)!=null?ge.usualPosition:void 0)!=null?st:D.position),willSpiderfy:!1});return lt}.call(this),ct=this.markers,E=N=0,Z=ct.length;N<Z;E=++N)if(B=ct[E],!!(B.map!=null&&B.getVisible())&&(U=h[E],!U.willSpiderfy)){for(xt=this.markers,A=H=0,M=xt.length;H<M;A=++H)if(Y=xt[A],A!==E&&!!(Y.map!=null&&Y.getVisible())&&(tt=h[A],!(A<E&&!tt.willSpiderfy)&&this.ptDistanceSq(U.pt,tt.pt)<Lt)){U.willSpiderfy=tt.willSpiderfy=!0;break}}for(It=this.markers,Ut=[],T=_t=0,I=It.length;_t<I;T=++_t)D=It[T],h[T].willSpiderfy&&Ut.push(D);return Ut},g.makeHighlightListenerFuncs=function(T){return{highlight:function(E){return function(){var A;if(T._omsData.leg.setOptions({strokeColor:E.legColors.highlighted[E.map.mapTypeId],zIndex:E.highlightedLegZIndex}),T._omsData.shadow!=null)return A=T._omsData.shadow.getIcon(),A.fillOpacity=.8,T._omsData.shadow.setOptions({icon:A})}}(this),unhighlight:function(E){return function(){var A;if(T._omsData.leg.setOptions({strokeColor:E.legColors.usual[E.map.mapTypeId],zIndex:E.usualLegZIndex}),T._omsData.shadow!=null)return A=T._omsData.shadow.getIcon(),A.fillOpacity=.3,T._omsData.shadow.setOptions({icon:A})}}(this)}},g.spiderfy=function(T,E){var A,N,H,Z,M,I,D,B,U,Y,tt,h,_t;return this.spiderfying=!0,h=T.length,A=this.ptAverage(function(){var at,Lt,ct;for(ct=[],at=0,Lt=T.length;at<Lt;at++)Y=T[at],ct.push(Y.markerPt);return ct}()),M=h>=this.circleSpiralSwitchover?this.generatePtsSpiral(h,A).reverse():this.generatePtsCircle(h,A),N=this.ptToLl(A),_t=function(){var at,Lt,ct,xt,It,Ut;for(Ut=[],at=0,Lt=M.length;at<Lt;at++)Z=M[at],H=this.ptToLl(Z),tt=this.minExtract(T,function(Ot){return function(Ct){return Ot.ptDistanceSq(Ct.markerPt,Z)}}(this)),U=tt.marker,B=this.lineToCenter?N:U.position,D=new n.Polyline({map:this.map,path:[B,H],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),U._omsData=(ct=U._omsData)!=null?ct:{},U._omsData.usualPosition=(xt=(It=U._omsData)!=null?It.usualPosition:void 0)!=null?xt:U.position,U._omsData.leg=D,this.spiderfiedShadowColor&&(U._omsData.shadow=new n.Marker({position:H,map:this.map,clickable:!1,zIndex:-2,icon:{path:google.maps.SymbolPath.CIRCLE,fillOpacity:.3,fillColor:this.spiderfiedShadowColor,strokeWeight:0,scale:20}})),this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(I=this.makeHighlightListenerFuncs(U),U._omsData.hightlightListeners={highlight:a.addListener(U,"mouseover",I.highlight),unhighlight:a.addListener(U,"mouseout",I.unhighlight)}),U.setPosition(H),U.setZIndex(Math.round(this.spiderfiedZIndex+Z.y)),Ut.push(U);return Ut}.call(this),delete this.spiderfying,this.spiderfied=!0,this.trigger("spiderfy",_t,E)},g.unspiderfy=function(T){var E,A,N,H,Z,M,I,D;if(T==null&&(T=null),!(this.spiderfied!=null||this.nudged!=null))return this;for(this.unspiderfying=!0,D=[],Z=[],M=this.markers,E=0,A=M.length;E<A;E++)H=M[E],H._omsData!=null&&H._omsData.leg!=null?(H._omsData.leg.setMap(null),(I=H._omsData.shadow)!=null&&I.setMap(null),H!==T&&H.setPosition(H._omsData.usualPosition),H.setZIndex(null),N=H._omsData.hightlightListeners,N!=null&&(a.removeListener(N.highlight),a.removeListener(N.unhighlight)),delete H._omsData,D.push(H)):Z.push(H);return delete this.unspiderfying,delete this.spiderfied,this.trigger("unspiderfy",D,Z),this.nudged&&this.requestNudge(),this},g.ptDistanceSq=function(T,E){var A,N;return A=T.x-E.x,N=T.y-E.y,A*A+N*N},g.ptAverage=function(T){var E,A,N,H,Z,M;for(Z=M=0,E=0,A=T.length;E<A;E++)H=T[E],Z+=H.x,M+=H.y;return N=T.length,new n.Point(Z/N,M/N)},g.llToPt=function(T){return this.projHelper.getProjection().fromLatLngToDivPixel(T)},g.ptToLl=function(T){return this.projHelper.getProjection().fromDivPixelToLatLng(T)},g.minExtract=function(T,E){var A,N,H,Z,M,I,D;for(H=M=0,I=T.length;M<I;H=++M)Z=T[H],D=E(Z),(typeof A=="undefined"||A===null||D<N)&&(N=D,A=H);return T.splice(A,1)[0]},g.arrIndexOf=function(T,E){var A,N,H,Z;if(T.indexOf!=null)return T.indexOf(E);for(A=N=0,H=T.length;N<H;A=++N)if(Z=T[A],Z===E)return A;return-1},R.ProjHelper=function(T){return this.setMap(T)},R.ProjHelper.prototype=new n.OverlayView,R.ProjHelper.prototype.draw=function(){},R}();Dl.exports=es.OverlappingMarkerSpiderfier});var Ho=30,ds=5,Zo=1,ba=5,ps=15*60,xa=15*60,qo=20,ln=300,no=200,wa=60;var ms="#f0f",ue=["#FF6600","#0088FF","#03DC03"],un=["#000","#FECE5A","#FFA630","#FF7315","#E40000","#FD2992","#EB26CD","#C124E0","#9627F4"],gs={VERY_RARE:"#b08cff",RARE:"#73a8ff",COMMON:"#8cffbf"};var Uo=3,Ke=15,_s="//commondatastorage.googleapis.com/ingress.com/img/default-portal-image.png",Ta="//nominatim.openstreetmap.org/search?format=json&polygon_geojson=1&q=",wr=[0,1e3,1500,2e3,2500,3e3,4e3,5e3,6e3];var ro=["E","NE","N","NW","W","SW","S","SE"],vs=["\u2192","\u2197","\u2191","\u2196","\u2190","\u2199","\u2193","\u2198"],La=75,Ea=187,Pa=750,ka=500,Go=125,jo=250,ys=65;var bs=[0,8,4,4,4,2,2,1,1],xs=300,ws=4,He=0,Yt=1,Jt=2,Ei=["none","res","enl"],Wn=["Neutral","Resistance","Enlightened"];var w={map:null,layerChooser:null,mapDataRequest:null,PREFER_CANVAS:!1,storeMapPosition:null,oms:null,refreshTimeout:void 0,timeSinceLastRefresh:null,urlPortal:null,urlPortalLL:null,selectedPortal:null,lastVisible:null,portalRangeIndicator:null,portalAccessIndicator:null,mapRunsUserAction:!1,portalsFactionLayers:null,linksFactionLayers:null,fieldsFactionLayers:null,artifact:null,portalDetail:null,latestFailedRequestTime:null,blockOutOfDateRequests:null,PLAYER:null,portals:{},links:{},fields:{},console:{},chat:null,niantic_params:{CURRENT_VERSION:null,ZOOM_TO_LEVEL:null,TILES_PER_EDGE:null},TILE_PARAMS:{ZOOM_TO_LINK_LENGTH:null,ZOOM_TO_LEVEL:null,TILES_PER_EDGE:null},overlayStatus:{}};var bt=Mt(oe()),Ls=0,oo={},Sa=0,cn=null,Es=100,Se=function(a){a=a||{};let n="dialog-"+(a.modal?"modal":a.id?a.id:"anon-"+Ls++),s="#"+n,f="";if(typeof android!="undefined"&&android&&android.dialogOpened&&android.dialogOpened(n,!0),a.text?f=Tr(a.text):a.html?f=a.html:(console.error("window.dialog: warning: no text in dialog"),f=Tr("")),a.modal&&(a.dialogClass=(a.dialogClass?a.dialogClass+" ":"")+"ui-dialog-modal",a.draggable=!1),oo[n])try{let x=(0,bt.default)(oo[n]);x.dialog("close"),x.remove()}catch(x){console.error("window.dialog: Tried to close nonexistent dialog "+n)}function p(){if(g.data("collapsed"))return;let x=g.dialog("option");g.dialog("option","height",x.height),g.dialog("option","width",x.width)}(0,bt.default)("body").append('<div id="'+n+'"></div>');let g=(0,bt.default)(s).dialog(bt.default.extend(!0,{autoOpen:!1,modal:!1,draggable:!0,closeText:"",title:"",buttons:{OK:function(){(0,bt.default)(this).dialog("close")}},open:function(){let x=(0,bt.default)(this).closest(".ui-dialog").find(".ui-dialog-titlebar");x.find(".ui-dialog-title").addClass("ui-dialog-title-active").addClass("text-overflow-ellipsis");let R=x.find(".ui-dialog-titlebar-close");if(R.removeAttr("title").addClass("ui-dialog-titlebar-button"),x.dblclick(p),!(0,bt.default)(this).dialog("option","modal")){let T=R.clone();T.addClass("ui-dialog-titlebar-button-collapse ui-dialog-titlebar-button-collapse-expanded"),T.click(bt.default.bind(function(){let E=(0,bt.default)(this).data("collapsed")===!0;(0,bt.default)(this).data("collapsed",!E),(0,bt.default)(this).data("collapseExpandCallback")?bt.default.bind((0,bt.default)(this).data("collapseExpandCallback"),this)(!E):!E&&(0,bt.default)(this).data("collapseCallback")?bt.default.bind((0,bt.default)(this).data("collapseCallback"),this)():E&&(0,bt.default)(this).data("expandCallback")&&bt.default.bind((0,bt.default)(this).data("expandCallback"),this)();let A=(0,bt.default)(this).closest(".ui-dialog"),N=A.find(".ui-dialog-content"),H=A.find(".ui-dialog-buttonpane"),Z=A.find(".ui-dialog-titlebar-button-collapse");(0,bt.default)(this).css("height",""),(0,bt.default)(N).slideToggle({duration:Es,complete:function(){(0,bt.default)(H).slideToggle({duration:Es,complete:p})}}),E?((0,bt.default)(Z).removeClass("ui-dialog-titlebar-button-collapse-collapsed"),(0,bt.default)(Z).addClass("ui-dialog-titlebar-button-collapse-expanded")):((0,bt.default)(Z).removeClass("ui-dialog-titlebar-button-collapse-expanded"),(0,bt.default)(Z).addClass("ui-dialog-titlebar-button-collapse-collapsed"))},this)),x.prepend(T),R.addClass("ui-dialog-titlebar-button-close")}oo[(0,bt.default)(this).data("id")]=this,Sa++},close:function(){(0,bt.default)(this).data("closeCallback")&&bt.default.bind((0,bt.default)(this).data("closeCallback"),this)(),cn&&(0,bt.default)(cn).data("id")===(0,bt.default)(this).data("id")&&(cn=null),delete oo[(0,bt.default)(this).data("id")],Sa--,typeof android!="undefined"&&android&&android.dialogOpened&&android.dialogOpened(n,!1),(0,bt.default)(this).dialog("destroy").remove()},focus:function(){(0,bt.default)(this).data("focusCallback")&&bt.default.bind((0,bt.default)(this).data("focusCallback"),this)(),cn&&(0,bt.default)(cn).data("id")!==(0,bt.default)(this).data("id")&&bt.default.bind(function(x,R){(0,bt.default)(this).data("blurCallback")&&bt.default.bind((0,bt.default)(this).data("blurCallback"),this)(),(0,bt.default)(this).closest(".ui-dialog").find(".ui-dialog-title").removeClass("ui-dialog-title-active").addClass("ui-dialog-title-inactive")},cn)(),cn=this,typeof android!="undefined"&&android&&android.dialogFocused&&android.dialogFocused((0,bt.default)(cn).data("id")),(0,bt.default)(this).closest(".ui-dialog").find(".ui-dialog-title").removeClass("ui-dialog-title-inactive").addClass("ui-dialog-title-active")}},a));return g.on("dialogdragstop dialogresizestop",p),g.html(f),g.data("id",n),g.data("jqID",s),g.data("closeCallback",a.closeCallback),g.data("collapseCallback",a.collapseCallback),g.data("expandCallback",a.expandCallback),g.data("collapseExpandCallback",a.collapseExpandCallback),g.data("focusCallback",a.focusCallback),g.data("blurCallback",a.blurCallback),a.modal?g.parent().addClass("ui-modal"):g.dialog().parents(".ui-dialog").draggable("option","snap",!0),g.dialog("open"),g};var Ps=function(){Ls=0,oo={},Sa=0,cn=null};var eu=Mt(oe()),Lr={},ks=0,Zt=function(a,n){if(a in Lr)return!0;let s=!1;ks++;for(let f in Lr)try{if(f===a&&Lr[f](n)===!1){s=!0;break}}catch(p){console.error("error running hook "+a+", error: "+p)}return ks--,!s},yi=function(a,n){Lr[a]?Lr[a].push(n):Lr[a]=[n]};var Pi=Mt(oe()),Yo=function(a){let n=0,s=!1;return Pi.default.each(a.resonators,function(f,p){if(!p)return!0;n+=parseInt(p.level),s=!0}),s?Math.max(1,n/8):0},Er=function(a){let n=0;return Pi.default.each(a.resonators,function(s,f){if(!f)return!0;let p=parseInt(f.level);n+=wr[p]}),n};var ao=function(a){let n=0;return Pi.default.each(a.resonators,function(s,f){if(!f)return!0;n+=parseInt(f.energy)}),n},Ca=function(a){let n=0,s=!1;a.resonators.length<8&&(s=!0),Pi.default.each(a.resonators,function(R,T){if(!T){s=!0;return}});let f=160*Math.pow(Yo(a),4),p=iu(a),g=p*f;return{base:f,boost:p,range:g,isLinkable:!s}},iu=function(a){let n=[1,.25,.125,.125],s=0,f=Rn(a,"LINK_AMPLIFIER");return f.forEach(function(p,g){s+=p.stats.LINK_RANGE_MULTIPLIER/1e3*n[g]}),f.length>0?s:1},Ss=function(a,n,s){n||(n=0);let f=0,p=bs.slice(0),g=[0,0,0,0,0,0,0,0,0];for(let B=w.PLAYER.verified_level+1;B<9;B++)p[B]=0;Pi.default.each(a.resonators,function(B,U){if(!U)return!0;f+=1;let Y=parseInt(U.level);U.owner===w.PLAYER.nickname?p[Y]>0&&(p[Y]-=1):g[Y]+=1});let x=f*La,R=s*Ea,T=n*Pa,E=x+R+T,A=ka+8*Go+jo,N=E+A,H=8-f,Z=H>0?jo:0,M=0,I=p[8];for(let B=7;B>=0;B--)M+=g[B],I<M&&(M-=M-I),I+=p[B];return{friendlyAp:H*Go+M*ys+Z,deployCount:H,upgradeCount:M,enemyAp:N,destroyAp:E,resoAp:x,captureAp:A}};var Cs=function(a){return a?(window.location.protocol==="https:"&&(a=a.replace(/^http:\/\//,"//")),a):_s},Rn=function(a,n){let s=[],p={RES_SHIELD:"MITIGATION",FORCE_AMP:"FORCE_AMPLIFIER",TURRET:"HIT_BONUS",HEATSINK:"HACK_SPEED",MULTIHACK:"BURNOUT_INSULATION",LINK_AMPLIFIER:"LINK_RANGE_MULTIPLIER",ULTRA_LINK_AMP:"OUTGOING_LINKS_BONUS"}[n];return Pi.default.each(a.mods||[],function(g,x){x&&x.stats.hasOwnProperty(p)&&s.push(x)}),s.sort(function(g,x){return x.stats[p]-g.stats[p]}),s},nu=function(a){let n=Rn(a,"RES_SHIELD"),s=0;return Pi.default.each(n,function(f,p){s+=parseInt(p.stats.MITIGATION)}),s},ru=function(a){let n=Rn(a,"ULTRA_LINK_AMP"),s=1;return Pi.default.each(n,function(f,p){s*=parseInt(p.stats.LINK_DEFENSE_BOOST)/1e3}),Math.round(10*s)/10},ou=function(a){return Math.round(400/9*Math.atan(a/Math.E))},As=function(a,n){let s=ru(a),f={shields:nu(a),links:ou(n)*s,linkDefenseBoost:s,total:null,excess:null};f.total=Math.min(95,f.shields+f.links);let p=f.shields+f.links-f.total;return f.excess=Math.round(10*p)/10,f},Rs=function(a){let n=Rn(a,"ULTRA_LINK_AMP"),s=8;return n.forEach(function(f,p){s+=parseInt(f.stats.OUTGOING_LINKS_BONUS)}),s},Ms=function(a){let n=Rn(a,"HEATSINK"),s=Rn(a,"MULTIHACK"),f=[1,.5,.5,.5],p=xs;Pi.default.each(n,function(x,R){let T=parseInt(R.stats.HACK_SPEED)/1e6;p=Math.round(p*(1-T*f[x]))});let g=ws;return Pi.default.each(s,function(x,R){let T=parseInt(R.stats.BURNOUT_INSULATION);g=g+T*f[x]}),{cooldown:p,hacks:g,burnout:p*(g-1)}},Ds=function(a){let n=parseInt(Yo(a).toString());n==0&&(n=1);let s=0;if(a.resonators)for(let x in a.resonators)a.resonators[x]&&s++;let f=Er(a),p=ao(a),g=f>0?~~(p/f*100):0;return{level:n,title:a.title,image:a.image,resCount:s,latE6:a.latE6,health:g,team:a.team,lngE6:a.lngE6,type:"portal"}},Is=function(a){let n=Rn(a,"FORCE_AMP"),s=Rn(a,"TURRET"),f=[1,.25,.125,.125],p={hit_bonus:0,force_amplifier:0,attack_frequency:0};return n.forEach(function(g,x){let R=g.stats.FORCE_AMPLIFIER/1e3;p.force_amplifier+=R*f[x]}),s.forEach(function(g,x){let R=g.stats.ATTACK_FREQUENCY/1e3;p.attack_frequency+=R*f[x],p.hit_bonus+=g.stats.HIT_BONUS/1e4}),p};var Os=function(a){return ji(a.team)},ji=function(a){var n=He;return a==="ENLIGHTENED"&&(n=Jt),a==="RESISTANCE"&&(n=Yt),a==="E"&&(n=Jt),a==="R"&&(n=Yt),n};var ci=Mt(oe()),zs=Mt(Ze()),Aa=class{constructor(){this.renderDetails=function(){this.log.log("portals: "+Object.keys(w.portals).length),this.log.log("links:   "+Object.keys(w.links).length),this.log.log("fields:  "+Object.keys(w.fields).length)};this.printStackTrace=function(){let n=new Error("dummy");return this.log.error(n.stack),n.stack};this.log=new Bs}},Bs=class{constructor(){this.show=function(){(0,ci.default)("#chat, #chatinput").show(),this.create(),(0,ci.default)("#chatinput mark").css("cssText","color: #bbb !important").text("debug:"),(0,ci.default)("#chat > div").hide(),(0,ci.default)("#debugconsole").show(),(0,ci.default)("#chatcontrols .active").removeClass("active"),(0,ci.default)("#chatcontrols a:contains('debug')").addClass("active")};this.create=function(){(0,ci.default)("#debugconsole").length||((0,ci.default)("#chatcontrols").append("<a>debug</a>"),(0,ci.default)("#chatcontrols a:last").click(this.show),(0,ci.default)("#chat").append('<div style="display: none" id="debugconsole"><table></table></div>'))};this.renderLine=function(n,s){this.create();let f="#eee";switch(s){case"error":f="#FF424D";break;case"warning":f="#FFDE42";break}if(typeof n!="string"&&typeof n!="number"){let A=[];n=JSON.stringify(n,function(N,H){if(typeof H=="object"&&H!==null){if(A.indexOf(H)!==-1)return;A.push(H)}return H}),A=null}let p=new Date,g=p.toLocaleTimeString(),x=p.toLocaleString(),R='<time title="'+x+'" data-timestamp="'+p.getTime()+'">'+g+"</time>",T='style="color:'+f+'"',E="<tr><td>"+R+"</td><td><mark "+T+">"+s+"</mark></td><td>"+n+"</td></tr>";(0,ci.default)("#debugconsole table").prepend(E)};this.overwriteNativeIfRequired=function(){(!window.console||zs.default.Browser.mobile)&&this.overwriteNative()};(0,ci.default)("#debugconsole").text()}log(n){this.renderLine(n,"notice")}warn(n){this.renderLine(n,"warning")}error(n){this.renderLine(n,"error")}overwriteNative(){this.create();let n=window.console;w.console={};function s(f){w.console[f]=function(){n[f].apply(n,arguments),console[f].apply(console,arguments)}}s("log"),s("warn"),s("error")}};var Yn=Mt(oe()),Fs="",ki=function(a){if(Fs!=a){switch(Fs=a,au(),Zt("paneChanged",a),a){case"all":case"faction":case"alerts":w.chat.show(a);break;case"debug":new Aa().log.show();break;case"map":so.mapButton.click(),(0,Yn.default)("#portal_highlight_select").show(),(0,Yn.default)("#farm_level_select").show();break;case"info":so.sideButton.click();break}typeof android!="undefined"&&android&&android.switchToPane&&android.switchToPane(a)}},au=function(){(0,Yn.default)("#chatcontrols, #chat, #chatinput, #sidebartoggle, #scrollwrapper, #updatestatus, #portal_highlight_select").hide(),(0,Yn.default)("#farm_level_select").hide(),(0,Yn.default)("#map").css({visibility:"hidden",opacity:"0"}),(0,Yn.default)(".ui-tooltip").remove()};var ie=Mt(oe());var fu=Mt(Ze());var su=Mt(Ze()),Ra=Mt(oe()),Hs=function(a){let n={in:[],out:[]};return Ra.default.each(w.links,function(s,f){let p=f.options.data;p.oGuid==a&&n.out.push(s),p.dGuid==a&&n.in.push(s)}),n};var lu=function(a){let n=[],s=0;for(let f in w.fields){let p=w.fields[f].options.data;(p.points[0].guid==a||p.points[1].guid==a||p.points[2].guid==a)&&(n.push(s),s++)}return Ra.default.each(w.fields,function(f,p){let g=p.options.data;(g.points[0].guid==a||g.points[1].guid==a||g.points[2].guid==a)&&n.push(f)}),n},Zs=function(a){return lu(a).length};var lo={},Ma=0,uu=15e3,cu=1e4;var qs=function(a,n,s){lo[n+","+s]=[a,Date.now()],Ma+=1,Ma>uu&&(Object.keys(lo).map(function(f){return[f,lo[f][1]]}).sort(function(f,p){return p[1]-f[1]}).slice(cu).forEach(function(f){delete lo[f[0]]}),Ma=Object.keys(lo).length)};var Qo=Mt(Ze());var Us=Mt(oe()),Da=null,Gs=localStorage.portal_highlighter;var Ia=function(a){Da!==null&&Da[Gs]!==void 0&&Da[Gs].highlight({portal:a})},js=function(){Us.default.each(w.portals,function(a,n){Oa(n,a===w.selectedPortal)})};var Xo=function(){let a=w.map.getZoom();return Qo.default.Browser.mobile?a>=16?1.5:a>=14?1.2:a>=11?1:a>=8?.65:.5:a>=14?1:a>=11?.8:a>=8?.65:.5},Ws=function(a,n){let s=Ys(n),f=Qo.default.extend({},n,s,{interactive:!0}),p=Qo.default.circleMarker(a,f);return Ia(p),p},Oa=function(a,n){let s=Ys(a.options);a.setStyle(s),Ia(a),n&&a.setStyle({color:ms})},Ys=function(a){let n=Xo(),s=[2,2,2,2,2,3,3,4,4],f=[7,7,7,7,8,8,9,10,11],p=Math.floor(a.level||0),g=s[p]*Math.sqrt(n),x=f[p]*n,R=null;return a.team!=He&&p==0&&(g=1,R="1,2"),{radius:x,stroke:!0,color:ue[a.team],weight:g,opacity:1,fill:!0,fillColor:ue[a.team],fillOpacity:.5,dashArray:R}};var Na=Mt(oe()),Vs=Mt(Ze()),Qs=function(a){if(!a.history)return'<div id="historydetails" class="missing">History missing</div>';let n={};return["visited","captured","scoutControlled"].forEach(function(s){n[s]=a.history[s]?'class="completed"':""}),Vs.default.Util.template('<div id="historydetails">History: <span id="visited" {visited}>visited</span> | <span id="captured" {captured}>captured</span> | <span id="scout-controlled" {scoutControlled}>scout controlled</span></div>',n)},Xs=function(a){let n=Ca(a),s="Base range:	"+ve(Math.floor(n.base))+`m
Link amp boost:	\xD7`+n.boost+`
Range:	`+ve(Math.floor(n.range))+"m";return n.isLinkable||(s+=`
Portal is missing resonators,
no new links can be made`),["range",'<a onclick="window.rangeLinkClick()"'+(n.isLinkable?"":' style="text-decoration:line-through;"')+">"+(n.range>1e3?Math.floor(n.range/1e3)+" km":Math.floor(n.range)+" m")+"</a>",s]},Ks=function(a){let n=[],s=[],f=[];Na.default.each(a.mods,function(g,x){let R="",T="",E="#000";if(x){if(R=x.name||"(unknown mod)",x.rarity&&(R=Pr(x.rarity).replace(/_/g," ")+" "+R),T=R+`
`,x.owner&&(T+="Installed by: "+x.owner+`
`),x.stats){T+="Stats:";for(let A in x.stats){if(!x.stats.hasOwnProperty(A))continue;let N=x.stats[A];A==="HACK_SPEED"||A==="HIT_BONUS"?N=N/1e4+"%":A==="ATTACK_FREQUENCY"||A==="FORCE_AMPLIFIER"||A==="LINK_RANGE_MULTIPLIER"||A==="LINK_DEFENSE_BOOST"?N=N/1e3+"x":A==="REMOVAL_STICKINESS"&&N>100&&(N=N/1e4+"%"),T+=`
+`+N+" "+A.toUpperCase().replace(/_/g," ")}}x.rarity?E=gs[x.rarity]:E="#fff"}n.push(R),s.push(T),f.push(E)});let p="";for(let g=0;g<n.length;g++)p+="<span"+(s[g].length?' title="'+s[g]+'"':"")+' style="color:'+f[g]+'">'+n[g]+"</span>";for(let g=n.length;g<4;g++)p+='<span style="color:#000"></span>';return p},Js=function(a){let n=ao(a),s=Er(a),f=n+" / "+s,p=za(n)+" / "+za(s);return["energy",p,f]},$s=function(a){let n=[],s=function(f,p){let g=0,x=0,R=null;f&&(g=parseInt(f.level),x=parseInt(f.energy),R=f.owner),n.push(hu(p,g,x,R))};if(a.resonators.length==8)Na.default.each([2,1,3,0,4,7,5,6],function(f,p){s(a.resonators[p],p)});else for(let f=0;f<8;f++)s(f<a.resonators.length?a.resonators[f]:null,null);return'<table id="resodetails">'+Jo(n)+"</table>"},hu=function(a,n,s,f){let p;ro[a]==="N"?p="meter north":p="meter";let g=wr[n],x=n>0?s/g*100:0,R=(n>0?"energy:	"+s+" / "+g+" ("+Math.round(x)+`%)
level:	`+n+`
owner:	`+f+`
`:"")+(a!==null?"octant:	"+ro[a]+" "+vs[a]:""),T=x?"width:"+x+"%; background:"+un[n]+";":"",E=n<3?"#9900FF":"#FFFFFF",A=n>0?'<span class="meter-level" style="color: '+E+';"> L '+n+" </span>":"",N='<span style="'+T+'"></span>',H='<span class="'+p+'" title="'+R+'">'+N+A+"</span>";return f=f?'<span class="nickname">'+f+"</span>":null,[H,f||""]},tl=function(a,n,s){let f=Ss(a,n,s),p=f.enemyAp,g="";return ji(w.PLAYER.team.toString())==ji(a.team)&&(p=f.friendlyAp,g+="Friendly AP:	"+f.friendlyAp+`
`,g+="  Deploy "+f.deployCount+", ",g+="Upgrade "+f.upgradeCount+`
`,g+=`
`),g+="Enemy AP:	"+f.enemyAp+`
`,g+="  Destroy AP:	"+f.destroyAp+`
`,g+="  Capture AP:	"+f.captureAp+`
`,["AP Gain",ve(p),g]},el=function(a){let n=Ms(a),s=n.hacks+" @ "+Ko(n.cooldown),f=`Hacks available every 4 hours
Hack count:	`+n.hacks+`
Cooldown time:	`+Ko(n.cooldown)+`
Burnout time:	`+Ko(n.burnout);return["hacks",s,f]},il=function(a,n){let s=As(a,n),f=s.total;s.excess&&(f+=" (+"+s.excess+")");let p="Total shielding:	"+(s.shields+s.links)+`
- active:	`+s.total+`
- excess:	`+s.excess+`
From
- shields:	`+s.shields+`
- links:	`+s.links+" ("+s.linkDefenseBoost+"x)";return["shielding",f,p]};var ce=Mt(oe()),du=Mt(Ba());var hi;(function(f){f[f.ENLIGHTENED=0]="ENLIGHTENED",f[f.RESISTANCE=1]="RESISTANCE",f[f.NONE=2]="NONE"})(hi||(hi={}));var uo=class{constructor({nickname:n,available_invites:s,energy:f,xm_capacity:p,ap:g,team:x,min_ap_for_current_level:R,min_ap_for_next_level:T,verified_level:E}){var A;this.nickname=n,this.available_invites=+s,this.energy=+f,this.xm_capacity=+p,this.ap=+g,this.team=0 .toString()===x?0:1,this.min_ap_for_next_level=+T,this.min_ap_for_current_level=+R,this.verified_level=+E,this.nickMatcher=new RegExp("\\b("+n+")\\b","ig"),this.lvlUpAp=(A=ve(this.min_ap_for_next_level-g))!=null?A:0,this.lvlApProg=Math.round((this.ap-this.min_ap_for_current_level)/(this.min_ap_for_next_level-this.min_ap_for_current_level)*100),this.xmRatio=Math.round(this.energy/this.xm_capacity*100),this.cls=this.team===0?"enl":"res"}};var co=function(){w.selectedPortal!==w.lastVisible&&(0,ce.default)("#sidebar").scrollTop(0)},Ye=a=>{if(console.log("begin to render portal details"),(0,ce.default)("#sidebar").is(":visible")&&(co(),w.lastVisible=a),console.log("begin to render portal details 2"),a&&!w.portalDetail.isFresh(a)&&(console.log("REQUEST PORTAL DETAIL"),w.portalDetail.request(a)),console.log("begin to render portal details 3"),!(a in w.portals)){console.log("not in store.portals",a),w.urlPortal=a,(0,ce.default)("#portaldetails").html(""),Ee()&&((0,ce.default)(".fullimg").remove(),(0,ce.default)("#mobileinfo").html('<div style="text-align: center"><b>tap here for info screen</b></div>'));return}console.log("begin to render portal details 4");let n=w.portals[a],s=n.options.data,f=w.portalDetail.get(a),p=Qs(s);f&&(s=Ds(f)),console.log("begin to render portal details 5");let g=f?'<div class="mods">'+Ks(f)+"</div>":"",x=f?pu(a,f):"",R=f?$s(f):"",T=f?"":'<div id="portalStatus">Loading details...</div>';console.log("begin to render portal details 6");let E=Cs(f?f.image:s.image),A=f&&f.title||s&&s.title||"null",N=s.latE6/1e6,H=s.lngE6/1e6,Z=A+`

Click to show full image.`,M=s.team==hi.NONE?0:s.level,I,D;f&&(I=Yo(f),I!=8?(I==Math.ceil(I)?D+=`
8`:D+=`
`+(Math.ceil(I)-I)*8,D+=" resonator level(s) needed for next portal level"):D+=`
fully upgraded`),D="Level "+I;let B=(0,ce.default)("<div>",{class:"linkdetails"});if(typeof android!="undefined"&&android&&android.intentPosLink){let U=(0,ce.default)("<a>").text("Share portal").on("click",()=>Fa(N,H,A));B.append((0,ce.default)("<aside>").append((0,ce.default)("<div>").append(U)))}else{let U=(0,ce.default)("<a>").attr({href:kr([N,H]),title:"Create a URL link to this portal"}).text("Portal link");B.append((0,ce.default)("<aside>").append((0,ce.default)("<div>").append(U)));let Y=(0,ce.default)("<a>").attr({title:"Link to alternative maps (Google, etc)"}).text("Map links").click(()=>Fa(N,H,A));B.append((0,ce.default)("<aside>").append((0,ce.default)("<div>").append(Y)))}(0,ce.default)("#portaldetails").html("").attr("class",Ei[ji(s.team)]).append((0,ce.default)("<h3>",{class:"title"}).text(A).prepend((0,ce.default)('<svg><use xlink:href="#ic_place_24px"/><title>Click to move to portal</title></svg>').attr({class:"material-icons icon-button",style:"float: left"}).on("click",()=>{ta(a,[s.latE6/1e6,s.lngE6/1e6]),Ee()&&ki("map")})),(0,ce.default)("<span>").attr({class:"close",title:"Close [w]",accesskey:"w"}).text("X").on("click",()=>{console.log("Infinete loop here?"),Ee()&&ki("map")}),(0,ce.default)("<div>").attr({class:"imgpreview",title:Z,style:'background-image: url("'+E+'")'}).append((0,ce.default)("<span>",{id:"level",title:I}).text(M),(0,ce.default)("<img>",{class:"hide",src:E})),g,x,R,T,B,p),f&&Zt("portalDetailsUpdated",{guid:a,portal:n,portalDetails:f,portalData:s})},pu=function(a,n){let s;if(n){let f=Hs(a),p=Rs(n),g=f.in.length+f.out.length,x={incoming:f.in.length,outgoing:f.out.length},R="at most "+p+` outgoing links
`+x.outgoing+` links out
`+x.incoming+` links in
(`+(x.outgoing+x.incoming)+" total)",T=["links",x.outgoing+" out / "+x.incoming+" in",R],E=n.owner?'<span class="nickname">'+n.owner+"</span>":"-",A=["owner",E],N=Zs(a),H=["fields",N],Z=tl(n,N,g),M=Is(n),I=[A,Xs(n),T,H,il(n,g),Js(n),Z,el(n)];if(M.attack_frequency!=0&&I.push(['<span title="attack frequency" class="text-overflow-ellipsis">attack frequency</span>',"\xD7"+M.attack_frequency]),M.hit_bonus!=0&&I.push(["hit bonus",M.hit_bonus+"%"]),M.force_amplifier!=0&&I.push(['<span title="force amplifier" class="text-overflow-ellipsis">force amplifier</span>',"\xD7"+M.force_amplifier]),s='<table id="randdetails">'+Jo(I)+"</table>",n.artifactBrief&&n.artifactBrief.target&&Object.keys(n.artifactBrief.target).length>0){let D=Object.keys(n.artifactBrief.target);s+='<div id="artifact_target">Target portal: '+D.map(function(B){return Pr(B)}).join(", ")+"</div>"}n.artifactDetail&&(s+='<div id="artifact_fragments">Shards: '+n.artifactDetail.displayName+" #"+n.artifactDetail.fragments.join(", ")+"</div>")}return s};var Ee=function(){let a=Pe("vp");return a=="m"?!0:a=="f"?!1:navigator.userAgent.match(/Android.*Mobile/)||navigator.userAgent.match(/iPhone|iPad|iPod/i)},so={mapButton:(0,ie.default)("<a>map</a>").on("click",()=>{(0,ie.default)("#map").css({visibility:"visible",opacity:"1"}),(0,ie.default)("#updatestatus").show(),(0,ie.default)("#chatcontrols a .active").removeClass("active"),(0,ie.default)("#chatcontrols a:contains('map')").addClass("active")}),sideButton:(0,ie.default)("<a>info</a>").on("click",()=>{(0,ie.default)("#scrollwrapper").show(),co(),(0,ie.default)(".active").removeClass("active"),(0,ie.default)("#chatcontrols a:contains('info')").addClass("active")})},rl=function(){if(!Ee())return;let a=document.createElement("style");a.type="text/css",a.appendChild(document.createTextNode("@include_string:smartphone.css@")),document.head.appendChild(a);let n=function(){(0,ie.default)("head").append("<style>"+["#largepreview.enl img { border:2px solid "+ue[Jt]+"; } ","#largepreview.res img { border:2px solid "+ue[Yt]+"; } ","#largepreview.none img { border:2px solid "+ue[He]+"; } "].join(`
`)+"</style>")};(0,ie.default)("#chatcontrols").append(so.mapButton).append(so.sideButton),yi("portalDetailsUpdated",function(s){let f=(0,ie.default)(".imgpreview img").removeClass("hide");if(!f.length){(0,ie.default)(".fullimg").remove();return}(0,ie.default)(".fullimg").length?(0,ie.default)(".fullimg").replaceWith(f.addClass("fullimg")):f.addClass("fullimg").appendTo("#sidebar")})},mu=function(a){let n=a.selectedPortalGuid;if(!w.portals[n]||(a=w.portals[w.selectedPortal].options.data,typeof a.title=="undefined"))return;let s=w.portalDetail.get(n),f=a.level,p;a.team==="N"||a.team==="NEUTRAL"?p='<span class="portallevel">L0</span>':p='<span class="portallevel" style="background: '+un[f]+';">L'+f+"</span>";let g=a.health;if(s){let x=Er(s);Er(s)>0&&(g=Math.floor(ao(s)/x*100))}if(p+=" "+g+"% ",p+=a.title,s){let x,R,T,E,A=[2,1,0,7,6,5,4,3];for(let N=0;N<8;N++){let H,Z;s.resonators.length==8?(H=A[N],Z=s.resonators[H]):(H=null,Z=N<s.resonators.length?s.resonators[N]:null);let M=Ei[Os(s)];H!==null&&ro[H]==="N"&&(M+=" north"),Z?(x=parseInt(Z.level),R=parseInt(Z.energy),T=wr[x],E=R/T*100):(x=0,R=0,T=0,E=0),p+='<div class="resonator '+M+'" style="border-top-color: '+un[x]+";left: "+100*N/8+'%;">',p+='<div class="filllevel" style="width:'+E+'%;"></div>',p+="</div>"}}(0,ie.default)("#mobileinfo").html(p)},ol=function(){if(!Ee())return;ki("map"),(0,ie.default)("#updatestatus").prepend(`<div id="mobileinfo" onclick="show('info')"></div>`),yi("portalSelected",mu),(0,ie.default)("#mobileinfo").html('<div style="text-align: center"><b>tap here for info screen</b></div>'),(0,ie.default)("#portaldetails").off("click",".imgpreview").on("click",".imgpreview",function(n){if(n.currentTarget===n.target){(0,ie.default)(".ui-tooltip").remove();let s=(0,ie.default)(".fullimg").position().top+(0,ie.default)("#sidebar").scrollTop();(0,ie.default)("#sidebar").animate({scrollTop:s},200)}});let a=(0,ie.default)("#chatcontrols a:visible");a.css("width",100/a.length+"%"),typeof android!="undefined"&&android&&android.spinnerEnabled&&(0,ie.default)("body").on("click","select",function(){android.spinnerEnabled(!0)}),typeof android!="undefined"&&android&&android.setPermalink&&(w.map.on("moveend",al),yi("portalSelected",al)),setTimeout(function(){w.map.invalidateSize()},.2*1e3)},al=function(){let a=w.selectedPortal&&w.portals[w.selectedPortal],n=(0,ie.default)("<a>").prop("href",kr(a&&a.getLatLng(),{includeMapView:!0})).prop("href");android.setPermalink(n)},ho=function(){return typeof android!="undefined"&&android&&android.addPane&&Ee()};var ea=Mt(Ze());var fo=Mt(oe());var Pe=function(a){let n=window.location.search.substr(1).split("&");if(n.length==0)return"";for(let s=0;s<n.length;s++){let f=n[s].split("=");if(f[0]==a)return f.length==1?"":decodeURIComponent(f[1].replace(/\+/g," "))}return""},hn=function(a){let n,s,f=document.cookie.split("; "),p={};for(s=f.length-1;s>=0;s--)n=f[s].split("="),p[n[0]]=unescape(n[1]);return p[a]},ia=function(a,n){let s=new Date(Date.now()+10*365*24*60*60*1e3).toUTCString();document.cookie=a+"="+n+"; expires="+s+"; path=/"},gu=function(a){document.cookie=a+"=; expires=Thu, 1 Jan 1970 00:00:00 GMT; path=/"},_u=function(a){let n=hn(a);n!==void 0&&(localStorage[a]===void 0&&(localStorage[a]=n),gu(a))},ve=function(a){return+(a+"").replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1&#8201;")},Sr=function(a,n){a=a.toString();let s=n-a.length;return Array(s>0?s+1:0).join("0")+a};var sl=function(a,n){if(!a)return null;let s=new Date(typeof a=="string"?parseInt(a):a);return s.getFullYear()+"-"+Sr(s.getMonth()+1,2)+"-"+Sr(s.getDate(),2)+" "+Sr(s.getHours(),2)+":"+Sr(s.getMinutes(),2)+":"+Sr(s.getSeconds(),2)+(n?"."+Sr(s.getMilliseconds(),3):"")},ll=function(a){if(!a)return null;let n=new Date(typeof a=="string"?parseInt(a):a),s=""+n.getHours();s=s.length===1?"0"+s:s;let f=""+n.getMinutes();return f=f.length===1?"0"+f:f,s+":"+f},Ko=function(a,n){let s=Math.floor(a/86400),f=Math.floor(a%86400/3600),p=Math.floor(a%3600/60),g=a%60,x=[];return s>0&&x.push(s+"d"),f>0&&x.push(f+"h"),p>0&&x.push(p+"m"),(g>0||x.length==0)&&x.push(g+"s"),n&&(x=x.slice(0,n)),x.join(" ")};var Fa=function(a,n,s){let f="undefined";if(s!==void 0&&(f=encodeURIComponent(s)),typeof android!="undefined"&&android&&android.intentPosLink)android.intentPosLink(a,n,w.map.getZoom(),s,!0);else{let p='<div id="qrcode"></div>',g="<script>$('#qrcode').qrcode({text:'GEO:"+a+","+n+"'});<\/script>",x='<a href="https://maps.google.com/maps?ll='+a+","+n+"&q="+a+","+n+"%20("+f+')">Google Maps</a>',R='<a href="https://www.bing.com/maps/?v=2&cp='+a+"~"+n+"&lvl=16&sp=Point."+a+"_"+n+"_"+f+'___">Bing Maps</a>',T='<a href="https://www.openstreetmap.org/?mlat='+a+"&mlon="+n+'&zoom=16">OpenStreetMap</a>',E="<span>"+a+","+n+"</span>";Se({html:'<div style="text-align: center;">'+p+g+x+"; "+R+"; "+T+"<br />"+E+"</div>",title:s,id:"poslinks"})}};var Vn=function(a){return typeof a=="string"&&(a=null),a.get(0).scrollHeight-a.innerHeight()-a.scrollTop()},ta=function(a,n){w.map.setView(n,Ke),w.portals[a]?Ye(a):w.urlPortal=a},ul=function(a,n){n===void 0&&a instanceof Array?(n=a[1],a=a[0]):n===void 0&&a instanceof ea.default.LatLng&&(n=a.lng,a=a.lat);for(let s in w.portals){let f=w.portals[s].getLatLng();if(f.lat==a&&f.lng==n){Ye(s);return}}w.urlPortalLL=[a,n],w.map.setView(w.urlPortalLL,Ke)},Pr=function(a){return a.charAt(0).toUpperCase()+a.slice(1).toLowerCase()};typeof String.prototype.startsWith!="function"&&(String.prototype.startsWith=function(a){return this.slice(0,a.length)===a});Math.trunc||(Math.trunc=function(a){return a<0?Math.ceil(a):Math.floor(a)});var Si=function(a){let n=document.createElement("div"),s=document.createTextNode(a);return n.appendChild(s),n.innerHTML},za=function(a){return a>1e3?Math.round(a/1e3)+" k":a},cl=function(a){return fo.default.grep(a,function(n,s){return fo.default.inArray(n,a)===s})},Jo=function(a){let n=a.map(function(s,f){if(!s)return"";let p=s[2]?' title="'+Si(s[2])+'"':"";return f%2==0?"<tr><td"+p+">"+s[1]+"</td><th"+p+">"+s[0]+"</th>":"    <th"+p+">"+s[0]+"</th><td"+p+">"+s[1]+"</td></tr>"}).join("");return n.length%2==1&&n+"",n},Tr=function(a){if(!a.match(/\t/))return a.replace(/\n/g,"<br>");let n=[],s=0;a.split(`
`).forEach((g,x)=>{n[x]=g.split("	"),n[x].length>s&&(s=n[x].length)});let p="<table>";return fo.default.each(n,function(g,x){p+="<tr>",fo.default.each(n[g],function(R,T){let E="";R===0&&n[g].length<s&&(E=' colspan="'+(s-n[g].length+1)+'"'),p+="<td"+E+">"+T+"</td>"}),p+="</tr>"}),p+="</table>",p};var Ha=function(a,n){w.overlayStatus[a]=n,localStorage["ingress.intelmap.layergroupdisplayed"]=JSON.stringify(w.overlayStatus)},fn=function(a,n){if(typeof w.overlayStatus[a]!="undefined")return w.overlayStatus[a];_u("ingress.intelmap.layergroupdisplayed");let s=localStorage["ingress.intelmap.layergroupdisplayed"];if(!s)return n;let f=JSON.parse(s);return w.overlayStatus=An(An({},f),w.overlayStatus),typeof w.overlayStatus[a]=="undefined"?n:w.overlayStatus[a]},Cr=function(a,n,s){s===void 0&&(s=!0),fn(a,s)&&w.map.addLayer(n),w.layerChooser.addOverlay(n,a)};function hl(a,n,s){return a===0?0:a>0?Math.min(a,n):Math.max(a,s)}var fl=85.051128,dl=function(a){return ea.default.latLng([hl(a.lat,fl,-fl),hl(a.lng,179.999999,-180)])},po=function(a){let n=a.getSouthWest(),s=a.getNorthEast();return ea.default.latLngBounds(dl(n),dl(s))},kr=function(a,n){n=n||{};function s(g){return Math.floor(g*1e6)/1e6}let f=[];if(!a||n.includeMapView){let g=w.map.getCenter();f.push("ll="+[s(g.lat),s(g.lng)].join(","),"z="+w.map.getZoom())}return a&&("lat"in a&&(a=[a.lat,a.lng]),f.push("pll="+a.join(","))),(n.fullURL?"@url_intel_base@":"/")+"?"+f.join("&")};var pl=Mt(Ze()),mo=class{constructor(){this.REQUEST_CACHE_FRESH_AGE=3*60;this.REQUEST_CACHE_MAX_AGE=5*60;pl.default.Browser.mobile?(this.REQUEST_CACHE_MAX_ITEMS=300,this.REQUEST_CACHE_MAX_CHARS=5e6/2):(this.REQUEST_CACHE_MAX_ITEMS=1e3,this.REQUEST_CACHE_MAX_CHARS=2e7/2),this._cache={},this._cacheCharSize=0,this._interval=void 0}store(n,s,f){this.remove(n);let p=new Date().getTime();f===void 0&&(f=this.REQUEST_CACHE_FRESH_AGE*1e3);let g=p+f,x=JSON.stringify(s);this._cacheCharSize+=x.length,this._cache[n]={time:p,expire:g,dataStr:x}}remove(n){n in this._cache&&(this._cacheCharSize-=this._cache[n].dataStr.length,delete this._cache[n])}get(n){return n in this._cache?JSON.parse(this._cache[n].dataStr):null}getTime(n){return n in this._cache?this._cache[n].time:0}isFresh(n){return n in this._cache&&this._cache[n].expire>=new Date().getTime()}startExpireInterval(n){this._interval==null&&(this._interval=setInterval(()=>{this.runExpire()},n*1e3))}stopExpireInterval(){this._interval!=null&&(clearInterval(this._interval),this._interval=null)}runExpire(){let s=new Date().getTime()-this.REQUEST_CACHE_MAX_AGE*1e3,f=Object.keys(this._cache).length;for(let p in this._cache)(f>this.REQUEST_CACHE_MAX_ITEMS||this._cacheCharSize>this.REQUEST_CACHE_MAX_CHARS||this._cache[p].time<s)&&(this._cacheCharSize-=this._cache[p].dataStr.length,delete this._cache[p],f--)}};var ml=Mt(oe()),De=class{static parseMod(n){return n?{owner:n[0],name:n[1],rarity:n[2],stats:n[3]}:null}static parseResonator(n){return n?{owner:n[0],level:n[1],energy:n[2]}:null}static parseArtifactBrief(n){if(!n)return null;let s=f=>{let p={};for(let g=0;g<f.length;g++)p[f[g][0]]=f[g].slice(1);return p};return{fragment:s(n[0]),target:s(n[1])}}static parseArtifactDetail(n){return!n||n.length===3&&n[0]===""&&n[1]===""&&n[2].length===0?null:{type:n[0],displayName:n[1],fragments:n[2]}}static parseHistoryDetail(n){return{_raw:n,visited:!!(n&1),captured:!!(n&2),scoutControlled:!!(n&4)}}static corePortalData(n){return{team:n[1],latE6:n[2],lngE6:n[3]}}static summaryPortalData(n){return{level:n[4],health:n[5],resCount:n[6],image:n[7],title:n[8],ornaments:n[9],mission:n[10],mission50plus:n[11],artifactBrief:this.parseArtifactBrief(n[12]),timestamp:n[13]}}static detailsPortalData(n){return{mods:n[this.SUMMARY_PORTAL_DATA_LENGTH+0].map(this.parseMod),resonators:n[this.SUMMARY_PORTAL_DATA_LENGTH+1].map(this.parseResonator),owner:n[this.SUMMARY_PORTAL_DATA_LENGTH+2],artifactDetail:this.parseArtifactDetail(n[this.SUMMARY_PORTAL_DATA_LENGTH+3])}}static extendedPortalData(n){return{history:this.parseHistoryDetail(n[this.DETAILED_PORTAL_DATA_LENGTH]||0)}}},Ve=De;Ve.CORE_PORTAL_DATA_LENGTH=4,Ve.SUMMARY_PORTAL_DATA_LENGTH=14,Ve.DETAILED_PORTAL_DATA_LENGTH=De.SUMMARY_PORTAL_DATA_LENGTH+4,Ve.EXTENDED_PORTAL_DATA_LENGTH=De.DETAILED_PORTAL_DATA_LENGTH+1,Ve.dataLen={core:[De.CORE_PORTAL_DATA_LENGTH],summary:[De.SUMMARY_PORTAL_DATA_LENGTH],detailed:[De.EXTENDED_PORTAL_DATA_LENGTH,De.DETAILED_PORTAL_DATA_LENGTH],extended:[De.EXTENDED_PORTAL_DATA_LENGTH,De.SUMMARY_PORTAL_DATA_LENGTH],anyknown:[De.CORE_PORTAL_DATA_LENGTH,De.SUMMARY_PORTAL_DATA_LENGTH,De.DETAILED_PORTAL_DATA_LENGTH,De.EXTENDED_PORTAL_DATA_LENGTH]},Ve.portal=function(n,s){if(!n){console.warn("Argument not specified");return}if(n[0]!=="p")throw new Error("decodeArray.portal: not a portal");if(s=s||"anyknown",De.dataLen[s].indexOf(n.length)===-1){console.warn("Unexpected portal data length: "+n.length+" ("+s+")");debugger}let p=this.corePortalData(n);if(n.length>=this.SUMMARY_PORTAL_DATA_LENGTH&&(p=An(An({},p),this.summaryPortalData(n))),n.length>=this.DETAILED_PORTAL_DATA_LENGTH){if(n[this.SUMMARY_PORTAL_DATA_LENGTH])p=An(An({},p),this.detailsPortalData(n));else if(s==="detailed"){console.warn("Portal details missing");debugger}}return(n.length>=this.EXTENDED_PORTAL_DATA_LENGTH||s==="extended"||s==="detailed")&&(ml.default.extend(p,this.extendedPortalData(n)),p.history&&p.history.captured&&!p.history.visited&&console.warn('Inconsistent history data found in portal "'+p.title+'"')),p},Ve.portalSummary=function(n){return De.portal(n,"summary")},Ve.portalDetail=function(n){return De.portal(n,"detailed")};var na=Mt(oe()),ra=0,Za=xa,gl=[],_l=10,vu=function(){let a=Je();ra+=_l,(document.hidden||document.webkitHidden||document.mozHidden||document.msHidden||!1)&&(Za=Ho),!a&&Je()};setInterval(vu,_l*1e3);var oa=function(){Je()&&(console.log("leavin idle mode"),ra=0,na.default.each(gl,function(a,n){console.log("leaving idle, running functions"),n()})),ra=0,Za=xa};var vl=-1,yl=-1,yu=function(a){let n=vl-a.clientX,s=yl-a.clientY;n*n+s*s>3*3&&(vl=a.clientX,yl=a.clientY,oa())},bl=function(){(0,na.default)("body").keypress(oa),(0,na.default)("body").mousemove(yu)},Je=function(){return ra>=Za},Mn=function(a){gl.push(a)};var xl=function(){let a=[1,1,1,40,40,80,80,320,1e3,2e3,2e3,4e3,8e3,16e3,16e3,32e3],n=[8,8,8,8,7,7,7,6,6,5,4,4,3,2,2,1,1],s=[2e5,2e5,2e5,2e5,2e5,6e4,6e4,1e4,5e3,2500,2500,800,300,0,0];w.TILE_PARAMS.ZOOM_TO_LINK_LENGTH=s,w.niantic_params.ZOOM_TO_LEVEL&&w.niantic_params.TILES_PER_EDGE?(w.TILE_PARAMS.ZOOM_TO_LEVEL=w.niantic_params.ZOOM_TO_LEVEL,w.TILE_PARAMS.TILES_PER_EDGE=w.niantic_params.TILES_PER_EDGE):(Se({title:"IITC Warning",html:"<p>IITC failed to detect the ZOOM_TO_LEVEL and/or TILES_PER_EDGE settings from the stock intel site.</p><p>IITC is now using fallback default values. However, if detection has failed it's likely the values have changed. IITC may not load the map if these default values are wrong.</p>"}),w.TILE_PARAMS.ZOOM_TO_LEVEL=n,w.TILE_PARAMS.TILES_PER_EDGE=a),w.TILE_PARAMS.ZOOM_TO_LEVEL=w.TILE_PARAMS.ZOOM_TO_LEVEL.slice(0,15)};var go=function(a){let n=w.TILE_PARAMS.TILES_PER_EDGE[w.TILE_PARAMS.TILES_PER_EDGE.length-1];return{level:w.TILE_PARAMS.ZOOM_TO_LEVEL[a]||0,tilesPerEdge:w.TILE_PARAMS.TILES_PER_EDGE[a]||n,minLinkLength:w.TILE_PARAMS.ZOOM_TO_LINK_LENGTH[a]||0,hasPortals:a>=w.TILE_PARAMS.ZOOM_TO_LINK_LENGTH.length,zoom:a}},wl=function(a){a=a!=null?a:w.map.getZoom();let n=qa(a);return go(n)},qa=function(a){a>21&&(a=21);let n=go(a);for(;a>Uo;){let s=go(a-1);if(s.tilesPerEdge!=n.tilesPerEdge||s.hasPortals!=n.hasPortals||s.hasPortals||n.hasPortals)break;a=a-1}return a},Ua=function(a,n){return Math.floor((a+180)/360*n.tilesPerEdge)},Ga=function(a,n){return Math.floor((1-Math.log(Math.tan(a*Math.PI/180)+1/Math.cos(a*Math.PI/180))/Math.PI)/2*n.tilesPerEdge)},_o=function(a,n){return a/n.tilesPerEdge*360-180},vo=function(a,n){let s=Math.PI-2*Math.PI*a/n.tilesPerEdge;return 180/Math.PI*Math.atan(.5*(Math.exp(s)-Math.exp(-s)))},Tl=function(a,n,s){return a.zoom+"_"+n+"_"+s+"_"+a.level+"_8_100"};var Ll=Mt(oe()),aa,fi=function(){let a=1,n=wl(),s='<span class="help portallevel" title="Indicates portal levels/link lengths displayed.  Zoom in to display more.">';if(n.hasPortals?s+='<span id="loadlevel">portals</span>':(Ee()||(s+="<b>links</b>: "),n.minLinkLength>0?s+='<span id="loadlevel">&gt;'+(n.minLinkLength>1e3?n.minLinkLength/1e3+"km":n.minLinkLength+"m")+"</span>":s+='<span id="loadlevel">all links</span>'),s+="</span>",s+=' <span class="map"><b>map</b>: ',w.mapDataRequest){let f=w.mapDataRequest.getStatus();f.long?s+='<span class="help" title="'+f.long+'">'+f.short+"</span>":s+="<span>"+f.short+"</span>",f.progress!==void 0&&(f.progress!==-1&&(s+=" "+Math.floor(f.progress*100)+"%"),a=f.progress)}else s+="...unknown...";s+="</span>",he.activeRequests.length>0&&(s+=" "+he.activeRequests.length+" requests"),he.failedRequestCount>0&&(s+=' <span style="color:#f66">'+he.failedRequestCount+" failed</span>"),aa&&clearTimeout(aa),aa=setTimeout(function(){aa=void 0,(0,Ll.default)("#innerstatus").html(s),a==1&&he.activeRequests.length>0&&(a=-1),typeof android!="undefined"&&android&&android.setProgress&&android.setProgress(a)},0)};var El=Mt(oe()),he={_quickRefreshPending:!1,activeRequests:[],_lastRefreshTime:0,failedRequestCount:0,statusTotalMapTiles:0,statusCachedMapTiles:0,statusSuccessMapTiles:0,statusStaleMapTiles:0,statusErrorMapTiles:0,add(a){this.activeRequests.push(a),fi()},remove(a){this.activeRequests=this.activeRequests.filter(n=>n!==a),fi()},abort(){this.activeRequests=[],this.failedRequestCount=0,w.chat.abort(),fi()},_onRefreshFunctions:[],_callOnRefreshFunctions(){if(dn(),Je()){fi();return}console.log("refreshing"),this._lastRefreshTime=new Date().getTime(),El.default.each(this._onRefreshFunctions,(a,n)=>{n()})},addRefreshFunction(a){this._onRefreshFunctions.push(a)},isLastRequest(a){return this.activeRequests.length===1}},dn=function(a){if(fi(),w.refreshTimeout&&clearTimeout(w.refreshTimeout),a==-1)return;let n=0;if(a)he._quickRefreshPending=!0,n=a,w.timeSinceLastRefresh=new Date().getTime()-he._lastRefreshTime,w.timeSinceLastRefresh<0&&(w.timeSinceLastRefresh=0),w.timeSinceLastRefresh<ba*1e3&&(n=ba*1e3-w.timeSinceLastRefresh);else{he._quickRefreshPending=!1,n=Ho*1e3;let s=ds*(18-w.map.getZoom());s>0&&(n+=s*1e3)}w.refreshTimeout=setTimeout(he._callOnRefreshFunctions,n),fi()};var Ie=(a,n)=>fs(void 0,null,function*(){let s=Math.floor(Math.random()*1e10);if(w.latestFailedRequestTime&&w.latestFailedRequestTime<Date.now()-120*1e3&&(he.failedRequestCount=0,w.latestFailedRequestTime=void 0),w.blockOutOfDateRequests){he.failedRequestCount++,w.latestFailedRequestTime=Date.now();return}he.add(s),n.v=w.niantic_params.CURRENT_VERSION;try{let f=yield fetch("/r/"+a,{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8","X-CSRFToken":hn("csrftoken")},body:JSON.stringify(n)});if(f.status>300)throw new Error("Request failed with statuscode: "+f.status);let p=yield f.json();return p.action=a,p}catch(f){console.warn("request failed with error: ",f),he.failedRequestCount++,w.latestFailedRequestTime=Date.now()}finally{he.remove(s)}});var ja=class{constructor(){this.requestQueue={};this.cache=new mo,this.cache.startExpireInterval(20)}get(n){return this.cache.get(n)}isFresh(n){return this.cache.isFresh(n)}handleResponse(n,s,f){if((!f||f.error||!f.result)&&(s=!1),s){let p=Ve.portal(f.result,"detailed");console.log("detailed portal data: ",p);let g=[n,p.timestamp,f.result];this.cache.store(n,p,null),n==w.selectedPortal&&Ye(n),Zt("portalDetailLoaded",{guid:n,success:s,details:p,ent:g})}else f&&f.error=="RETRY"||Zt("portalDetailLoaded",{guid:n,success:s})}doRequest(n){Ie("getPortalDetails",{guid:n}).then(s=>{if(console.log("portaldetails",s),s.result){let f=new Pl(s.result);console.log("results: ",f)}this.handleResponse(n,!0,s)}).catch(s=>{console.log(s),this.handleResponse(n,!1)}).finally(()=>{delete this.requestQueue[n]})}request(n){this.requestQueue[n]||this.doRequest(n)}},Pl=class{constructor(n){this.rawResults=n}};var Qa=Mt(Ze());var pn=Mt(Ze()),Wa=Mt(Ba());var Qn=Mt(Ze());var yo={OVERLAY_SIZE:60,OVERLAY_OPACITY:.6,_portals:{},_layer:Qn.default.LayerGroup,_beacons:Qn.default.LayerGroup,_frackers:Qn.default.LayerGroup,setup(){this._portals={};let a=Qn.default.layerGroup;this._layer=a(),this._beacons=a(),this._frackers=a(),Cr("Ornaments",this._layer,!0),Cr("Beacons",this._beacons,!0),Cr("Frackers",this._frackers,!0)},addPortal(a){this.removePortal(a);let n=a.options.data.ornaments;n&&n.length&&(this._portals[a.options.guid]=n.map(s=>{let f=this._layer;s.startsWith("pe")&&(f=s==="peFRACK"?this._frackers:this._beacons);let p=this.OVERLAY_SIZE;return Qn.default.marker(a.getLatLng(),{icon:Qn.default.icon({iconUrl:"//commondatastorage.googleapis.com/ingress.com/img/map_icons/marker_images/"+s+".png",iconSize:[p,p],iconAnchor:[p/2,p/2]}),interactive:!1,keyboard:!1,opacity:this.OVERLAY_OPACITY}).addTo(f)}))},removePortal(a){let n=a.options.guid;this._portals[n]&&(this._portals[n].forEach(function(s){s.options.layer.removeLayer(s)}),delete this._portals[n])}};var Ya=Mt(oe()),Va=class{constructor(){this.deleteEntity=function(n){this.deletePortalEntity(n),this.deleteLinkEntity(n),this.deleteFieldEntity(n)};this.deletePortalEntity=function(n){if(n in w.portals){let s=w.portals[n];yo.removePortal(s),this.removePortalFromMapLayer(s),delete w.portals[n],Zt("portalRemoved",{portal:s,data:s.options.data})}};this.deleteLinkEntity=function(n){if(n in w.links){let s=w.links[n];w.linksFactionLayers[s.options.team]&&w.linksFactionLayers[s.options.team].removeLayer(s),delete w.links[n],Zt("linkRemoved",{link:s,data:s.options.data})}};this.deleteFieldEntity=function(n){if(n in w.fields){let s=w.fields[n];w.fieldsFactionLayers[s.options.team].removeLayer(s),delete w.fields[n],Zt("fieldRemoved",{field:s,data:s.options.data})}};this.portalMarkerScale=void 0}startRenderPass(n,s){this.isRendering=!0,this.deletedGuid={},this.seenPortalsGuid={},this.seenLinksGuid={},this.seenFieldsGuid={},this.bounds=s,this.level=n;let f=s.pad(.1);this.clearPortalsOutsideBounds(f),this.clearLinksOutsideBounds(f),this.clearFieldsOutsideBounds(f),this.rescalePortalMarkers()}clearPortalsOutsideBounds(n){let s=0;for(let f in w.portals){let p=w.portals[f];!n.contains(p.getLatLng())&&f!==w.selectedPortal&&!w.artifact.isInterestingPortal(f)&&(this.deletePortalEntity(f),s++)}}clearLinksOutsideBounds(n){for(let s in w.links){let p=w.links[s].getLatLngs(),g=pn.default.latLngBounds(p);n.intersects(g)||this.deleteLinkEntity(s)}}clearFieldsOutsideBounds(n){let s=0;for(let f in w.fields){let g=w.fields[f].getLatLngs(),x=pn.default.latLngBounds([g[0],g[1]]).extend(g[2]);n.intersects(x)||(this.deleteFieldEntity(f),s++)}}processTileData(n){this.processDeletedGameEntityGuids(n.deletedGameEntityGuids||[]),this.processGameEntities(n.gameEntities||[])}processDeletedGameEntityGuids(n){for(let s in n){let f=n[s];f in this.deletedGuid||(this.deletedGuid[f]=!0,f==w.selectedPortal&&Ye(null),this.deleteEntity(f))}}processGameEntities(n,s){for(let f of n)f[2][0]=="r"&&!(f[0]in this.deletedGuid)&&this.createFieldEntity(f),f[2][0]=="e"&&!(f[0]in this.deletedGuid)&&this.createLinkEntity(f),f[2][0]=="p"&&!(f[0]in this.deletedGuid)&&this.createPortalEntity(f,s)}endRenderPass(){let n=0,s=0,f=0;for(let p in w.portals)!(p in this.seenPortalsGuid)&&p!==w.selectedPortal&&(this.deletePortalEntity(p),n++);for(let p in w.links)p in this.seenLinksGuid||(this.deleteLinkEntity(p),s++);for(let p in w.fields)p in this.seenFieldsGuid||(this.deleteFieldEntity(p),f++);console.log("Render: end cleanup: removed "+n+" portals, "+s+" links, "+f+" fields"),this.isRendering=!1,w.selectedPortal&&Ye(w.selectedPortal)}createPlaceholderPortalEntity(n,s,f,p){let g=[n,0,["p",p,s,f]];if(n in w.portals){let x=w.portals[n];(p!=x.options.data.team||s!=x.options.data.latE6||f!=x.options.data.lngE6)&&this.deletePortalEntity(n)}this.createPortalEntity(g,"core")}createPortalEntity(n,s){this.seenPortalsGuid[n[0]]=!0;let f,p=Ve.portal(n[2],s);if(n[0]in w.portals){let Z=w.portals[n[0]];if((!p.history||Z.options.data.history===p.history)&&Z.options.timestamp>=n[1])return;f=Z.options.data,p.history||(p.history=f.history),this.deletePortalEntity(n[0])}let g=parseInt(p.level)||0,x=ji(p.team);x==He&&(g=0);let R=pn.default.latLng(p.latE6/1e6,p.lngE6/1e6),T={level:g,team:x,ent:n,guid:n[0],timestamp:n[1],data:p};qs(n[0],p.latE6,p.lngE6);let E=Ws(R,T);function A(Z){Ye(Z.target.options.guid)}function N(Z){Ye(Z.target.options.guid),w.map.setView(Z.target.getLatLng(),Ke)}function H(Z){console.log("handler_portal_contextmenu DOES IT GET HERE?"),Ye(Z.target.options.guid),Ee()?ki("info"):(0,Ya.default)("#scrollwrapper").is(":visible")||(0,Ya.default)("#sidebartoggle").click()}E.on("click",A),E.on("dblclick",N),E.on("contextmenu",H),Zt("portalAdded",{portal:E,previousData:f}),w.portals[n[0]]=E,w.urlPortalLL&&w.urlPortalLL[0]==E.getLatLng().lat&&w.urlPortalLL[1]==E.getLatLng().lng&&(w.urlPortal=n[0],w.urlPortalLL=void 0),w.urlPortal==n[0]&&(w.selectedPortal=n[0],w.urlPortal=void 0),n[0]==w.selectedPortal&&Ye(w.selectedPortal),yo.addPortal(E),this.addPortalToMapLayer(E)}createFieldEntity(n){this.seenFieldsGuid[n[0]]=!0;let s={team:n[2][1],points:n[2][2].map(function(x){return{guid:x[0],latE6:x[1],lngE6:x[2]}})};for(let x=0;x<3;x++){let R=s.points[x];this.createPlaceholderPortalEntity(R.guid,R.latE6,R.lngE6,s.team)}if(n[0]in w.fields){if(w.fields[n[0]].options.timestamp>=n[1])return;this.deleteFieldEntity(n[0])}let f=ji(n[2][1]),p=[pn.default.latLng(s.points[0].latE6/1e6,s.points[0].lngE6/1e6),pn.default.latLng(s.points[1].latE6/1e6,s.points[1].lngE6/1e6),pn.default.latLng(s.points[2].latE6/1e6,s.points[2].lngE6/1e6)],g=new Wa.GeodesicLine(p,{fillColor:ue[f],fillOpacity:.25,stroke:!1,interactive:!1,team:f,ent:n,guid:n[0],timestamp:n[1],data:s,fill:!0});Zt("fieldAdded",{field:g}),w.fields[n[0]]=g,w.fieldsFactionLayers[f].addLayer(g)}createLinkEntity(n,s){if(new RegExp("^[0-9a-f]{32}.b_[ab][bc]$").test(n[0]))return;this.seenLinksGuid[n[0]]=!0;let p={team:n[2][1],oGuid:n[2][2],oLatE6:n[2][3],oLngE6:n[2][4],dGuid:n[2][5],dLatE6:n[2][6],dLngE6:n[2][7]};if(this.createPlaceholderPortalEntity(p.oGuid,p.oLatE6,p.oLngE6,p.team),this.createPlaceholderPortalEntity(p.dGuid,p.dLatE6,p.dLngE6,p.team),n[0]in w.links){if(w.links[n[0]].options.timestamp>=n[1])return;this.deleteLinkEntity(n[0])}let g=ji(n[2][1]),x=[pn.default.latLng(p.oLatE6/1e6,p.oLngE6/1e6),pn.default.latLng(p.dLatE6/1e6,p.dLngE6/1e6)],R=new Wa.GeodesicLine(x,{color:ue[g],opacity:1,weight:s?1:2,interactive:!1,ent:n,guid:n[0],timestamp:n[1],data:p});Zt("linkAdded",{link:R}),w.links[n[0]]=R,w.linksFactionLayers[g].addLayer(R)}rescalePortalMarkers(){(this.portalMarkerScale===void 0||this.portalMarkerScale!=Xo())&&(this.portalMarkerScale=Xo(),js())}addPortalToMapLayer(n){w.portalsFactionLayers[parseInt(n.options.level)||0][n.options.team].addLayer(n)}removePortalFromMapLayer(n){w.portalsFactionLayers[parseInt(n.options.level)||0][n.options.team].removeLayer(n)}};var Xa=class{constructor(){this.cache=new mo,this.render=new Va,this.activeRequestCount=0,this.requestedTiles={},this.renderQueue=[],this.renderQueueTimer=void 0,this.renderQueuePaused=!1,this.idle=!1,this.MAX_REQUESTS=40,this.NUM_TILES_PER_REQUEST=25,this.MAX_TILE_RETRIES=5,this.MOVE_REFRESH=3,this.STARTUP_REFRESH=3,this.IDLE_RESUME_REFRESH=5,this.DOWNLOAD_DELAY=1,this.RUN_QUEUE_DELAY=0,this.BAD_REQUEST_RUN_QUEUE_DELAY=2,this.EMPTY_RESPONSE_RUN_QUEUE_DELAY=5,this.TIMEOUT_REQUEST_RUN_QUEUE_DELAY=0,this.RENDER_BATCH_SIZE=1e9,this.RENDER_PAUSE=typeof android=="undefined"?.1:.2,this.REFRESH_CLOSE=300,this.REFRESH_FAR=900,this.FETCH_TO_REFRESH_FACTOR=2,this.setStatus("startup",void 0,-1),yi("portalDetailLoaded",n=>{console.log("map data requester portalDetailLoaded hook",n),n.success&&this.render.createPortalEntity(n.ent,"detailed")}),Mn(()=>{this.idleResume()}),w.map.on("movestart",this.mapMoveStart,this),w.map.on("moveend",this.mapMoveEnd,this),this.refreshOnTimeout(this.STARTUP_REFRESH),this.setStatus("refreshing",void 0,-1),this.cache&&this.cache.startExpireInterval(15)}mapMoveStart(){this.setStatus("paused",null,null),this.clearClassTimeout(),this.pauseRenderQueue(!0)}mapMoveEnd(){let n=po(w.map.getBounds()),s=w.map.getZoom();if(this.fetchedDataParams&&this.fetchedDataParams.mapZoom==w.map.getZoom()&&this.fetchedDataParams.bounds.contains(n)){let f=(this.timerExpectedTimeoutTime-new Date().getTime())/1e3;if(f>this.MOVE_REFRESH){this.setStatus("done","Map moved, but no data updates needed",null),this.refreshOnTimeout(f),this.pauseRenderQueue(!1);return}}this.setStatus("refreshing",void 0,-1),this.refreshOnTimeout(this.MOVE_REFRESH)}idleResume(){this.idle&&(this.idle=!1,this.setStatus("idle restart",void 0,-1),this.refreshOnTimeout(this.IDLE_RESUME_REFRESH))}clearClassTimeout(){this.timer&&(window.clearTimeout(this.timer),this.timer=void 0)}refreshOnTimeout(n){this.clearClassTimeout(),this.timer=setTimeout(()=>{this.timer=void 0,this.refresh()},n*1e3),this.timerExpectedTimeoutTime=new Date().getTime()+n*1e3}setStatus(n,s,f){this.status={short:n,long:s,progress:f},fi()}getStatus(){return this.status}refresh(){if(Je()){console.log("suspending map refresh - is idle"),this.setStatus("idle",null,null),this.idle=!0;return}this.refreshStartTime=new Date().getTime(),this.resetRenderQueue(),this.tileErrorCount={},this.queuedTiles={};let n=po(w.map.getBounds()),s=w.map.getZoom(),f=qa(s),p=go(f),g=Ua(n.getWest(),p),x=Ua(n.getEast(),p),R=Ga(n.getNorth(),p),T=Ga(n.getSouth(),p),E=Qa.default.latLngBounds([[vo(T+1,p),_o(g,p)],[vo(R,p),_o(x+1,p)]]);this.fetchedDataParams={bounds:E,mapZoom:s,dataZoom:f},Zt("mapDataRefreshStart",{bounds:n,mapZoom:s,dataZoom:f,minPortalLevel:p.level,tileBounds:E}),this.render.startRenderPass(p.level,E),Zt("mapDataEntityInject",{callback:this.render.processGameEntities.bind(this.render)}),this.render.processGameEntities(w.artifact.getArtifactEntities(),"summary");let A="requesting data tiles at zoom "+f;A+=" (L"+p.level+"+ portals",A+=", "+p.tilesPerEdge+" tiles per global edge), map zoom is "+s,this.cachedTileCount=0,this.requestedTileCount=0,this.successTileCount=0,this.failedTileCount=0,this.staleTileCount=0;let N={},H=w.map.project(w.map.getCenter(),s);for(let M=R;M<=T;M++)for(let I=g;I<=x;I++){let D=Tl(p,I,M),B=vo(M,p),U=vo(M+1,p),Y=_o(I,p),tt=_o(I+1,p);if(this.cache&&this.cache.isFresh(D))this.pushRenderQueue(D,this.cache.get(D),"cache-fresh"),this.cachedTileCount+=1;else{let h=(B+U)/2,_t=(tt+Y)/2,at=Qa.default.latLng(h,_t),Lt=w.map.project(at,s),ct=H.subtract(Lt),xt=ct.x*ct.x+ct.y*ct.y;N[D]=xt,this.requestedTileCount+=1}}let Z=Object.keys(N);Z.sort(function(M,I){return N[M]-N[I]});for(let M in Z){let I=Z[M];this.queuedTiles[I]=I}this.setStatus("loading",void 0,-1),Zt("requestFinished",{success:!0}),Object.keys(this.queuedTiles).length>0?this.delayProcessRequestQueue(this.DOWNLOAD_DELAY):this.delayProcessRequestQueue(0)}delayProcessRequestQueue(n){if(this.timer===void 0){let s=this;this.timer=setTimeout(function(){s.timer=setTimeout(function(){s.timer=void 0,s.processRequestQueue()},n*1e3)},0)}}processRequestQueue(){if(Object.keys(this.queuedTiles).length==0){this.renderQueuePaused||this.startQueueTimer(this.RENDER_PAUSE);return}let n=[];for(let x in this.queuedTiles)x in this.requestedTiles||n.push(x);let s=this.MAX_REQUESTS-this.activeRequestCount;if(n.length>0&&s>0){let x=Math.min(this.NUM_TILES_PER_REQUEST,Math.max(5,Math.ceil(n.length/s)));for(let R=0;R<s;R++){let T=Math.min(x,n.length),E=n[0],A=this.tileErrorCount[E]||0;for(let H=1;H<T;H++)if(E=n[H],A+=this.tileErrorCount[E]||0,A>this.MAX_TILE_RETRIES){T=H;break}let N=n.splice(0,T);N.length>0&&this.sendTileRequest(N)}}let f=this.requestedTileCount-(this.successTileCount+this.failedTileCount+this.staleTileCount),p="Tiles: "+this.cachedTileCount+" cached, "+this.successTileCount+" loaded, "+(this.staleTileCount?this.staleTileCount+" stale, ":"")+(this.failedTileCount?this.failedTileCount+" failed, ":"")+f+" remaining",g=this.requestedTileCount>0?(this.requestedTileCount-f)/this.requestedTileCount:void 0;this.setStatus("loading",p,g)}sendTileRequest(n){let s=n.filter(f=>(this.requestedTiles[f]=!0,f in this.queuedTiles));this.activeRequestCount+=1,Ie("getEntities",{tileKeys:s}).then(f=>this.handleResponse(f,n,!0)).catch(f=>this.handleResponse(void 0,n,!1))}requeueTile(n,s){if(n in this.queuedTiles)if(s&&(this.tileErrorCount[n]=(this.tileErrorCount[n]||0)+1,this.tileErrorCount[n]<=this.MAX_TILE_RETRIES&&(s=!1)),s){let f=this.cache?this.cache.get(n):void 0;f?(this.pushRenderQueue(n,f,"cache-stale"),this.staleTileCount+=1):this.failedTileCount+=1,delete this.queuedTiles[n]}else delete this.queuedTiles[n],this.queuedTiles[n]=n}handleResponse(n,s,f){this.activeRequestCount-=1;let p=[],g=[],x=[],R=[],T=s.slice(0);if(!f||!n||!n.result){if(console.warn("Request.handleResponse: request failed - requeuing..."+(n&&n.error?" error: "+n.error:"")),n&&n.error&&n.error=="RETRY"){for(let N in s){let H=s[N];x.push(H)}Zt("requestFinished",{success:!1})}else{for(let N in s){let H=s[N];g.push(H)}Zt("requestFinished",{success:!1})}T=[]}else{let N=n.result.map;for(let H in N){let Z=N[H];T.splice(T.indexOf(H),1),"error"in Z?Z.error=="TIMEOUT"?R.push(H):(console.warn("map data tile "+H+" failed: error=="+Z.error),g.push(H)):(p.push(H),this.cache&&this.cache.store(H,Z),H in this.queuedTiles&&(this.pushRenderQueue(H,Z,"ok"),delete this.queuedTiles[H],this.successTileCount+=1))}Zt("requestFinished",{success:!0})}let E=g.length>0?this.BAD_REQUEST_RUN_QUEUE_DELAY:T.length>0?this.EMPTY_RESPONSE_RUN_QUEUE_DELAY:R.length>0?this.TIMEOUT_REQUEST_RUN_QUEUE_DELAY:this.RUN_QUEUE_DELAY,A="getEntities status: "+s.length+" tiles: ";if(A+=p.length+" successful",x.length&&(A+=", "+x.length+" retried"),R.length&&(A+=", "+R.length+" timed out"),g.length&&(A+=", "+g.length+" failed"),T.length&&(A+=", "+T.length+" unaccounted"),A+=". delay "+E+" seconds",R.length>0)for(let N in R){let H=R[N];delete this.requestedTiles[H],this.requeueTile(H,!0)}if(x.length>0)for(let N in x){let H=x[N];delete this.requestedTiles[H],this.requeueTile(H,!1)}if(g.length>0)for(let N in g){let H=g[N];delete this.requestedTiles[H],this.requeueTile(H,!0)}if(T.length>0)for(let N in T){let H=T[N];delete this.requestedTiles[H],this.requeueTile(H,!0)}for(let N in p){let H=p[N];delete this.requestedTiles[H]}this.delayProcessRequestQueue(E)}resetRenderQueue(){this.renderQueue=[],this.renderQueueTimer&&(clearTimeout(this.renderQueueTimer),this.renderQueueTimer=void 0),this.renderQueuePaused=!1}pushRenderQueue(n,s,f){this.renderQueue.push({id:n,deleted:(s.deletedGameEntityGuids||[]).slice(0),entities:(s.gameEntities||[]).slice(0),status:f}),this.renderQueuePaused||this.startQueueTimer(this.RENDER_PAUSE)}startQueueTimer(n){if(this.renderQueueTimer===void 0){let s=this;this.renderQueueTimer=setTimeout(function(){s.renderQueueTimer=setTimeout(function(){s.renderQueueTimer=void 0,s.processRenderQueue()},(n||0)*1e3)},0)}}pauseRenderQueue(n){this.renderQueuePaused=n,n?this.renderQueueTimer&&(clearTimeout(this.renderQueueTimer),this.renderQueueTimer=void 0):this.renderQueue.length>0&&this.startQueueTimer(this.RENDER_PAUSE)}processRenderQueue(){let n=this.RENDER_BATCH_SIZE;for(;n>0&&this.renderQueue.length>0;){let s=this.renderQueue[0];if(s.deleted.length>0){let f=s.deleted.splice(0,n);n-=f.length,this.render.processDeletedGameEntityGuids(f)}if(n>0&&s.entities.length>0){let f=s.entities.splice(0,n);n-=f.length,this.render.processGameEntities(f,"extended")}s.deleted.length==0&&s.entities.length==0&&this.renderQueue.splice(0,1)}if(this.renderQueue.length>0)this.startQueueTimer(this.RENDER_PAUSE);else if(Object.keys(this.queuedTiles).length==0){this.render.endRenderPass();let f=(new Date().getTime()-this.refreshStartTime)/1e3;Zt("mapDataRefreshEnd",{});let p="Tiles: "+this.cachedTileCount+" cached, "+this.successTileCount+" loaded, "+(this.staleTileCount?this.staleTileCount+" stale, ":"")+(this.failedTileCount?this.failedTileCount+" failed, ":"")+"in "+f+" seconds",g=w.map.getZoom()>12?this.REFRESH_CLOSE:this.REFRESH_FAR,x=Math.max(g,f*this.FETCH_TO_REFRESH_FACTOR);this.refreshOnTimeout(x),this.setStatus(this.failedTileCount?"errors":this.staleTileCount?"out of date":"done",p,null)}}};var kl=function(){let a=new RegExp('"X-CSRFToken".*[a-z].v="([a-f0-9]{40})";'),n=new RegExp("^[a-zA-Z$][a-zA-Z$0-9]?$");for(let s in window)if(n.test(s)){let f=window[s];if(f&&f.prototype){for(let p in f.prototype)if(n.test(p)){let g=f.prototype[p];if(g&&typeof g=="function"){let x=g.toString(),R=a.exec(x);R&&(w.niantic_params.CURRENT_VERSION=R[1])}}}if(f&&Array.isArray&&Array.isArray(f)&&f.length>0){let p=!0;for(let g=0;g<f.length;g++)if(typeof f[g]!="number"||f[g]!=parseInt(f[g])){p=!1;break}if(p&&f.length>=12&&f.length<=18){if(f[0]==8){let g=!0;for(let x=1;x<f.length;x++)if(f[x-1]<f[x]){g=!1;break}g&&(w.niantic_params.ZOOM_TO_LEVEL=f)}if(f[f.length-1]>=9e3&&f[f.length-1]<=64e3){let g=!0;for(let x=1;x<f.length;x++)if(f[x-1]>f[x]){g=!1;break}g&&(w.niantic_params.TILES_PER_EDGE=f)}}}}if(w.niantic_params.CURRENT_VERSION===void 0)throw Se({title:"IITC Broken",html:"<p>IITC failed to extract the required parameters from the intel site</p><p>This can happen after Niantic update the standard intel site. A fix will be needed from the IITC developers.</p>"}),new Error("Error: IITC failed to extract CURRENT_VERSION string - cannot continue")};var Xn=Mt(Ze());var Ar=Mt(oe()),Ka=class{constructor(){this.portalInfo={};this.artifactTypes={};this.entities=[];this.clearData=function(){this.portalInfo={},this.artifactTypes={},this.entities=[]};this.processResult=function(n){for(let s in n){let f=n[s],p=Ve.portal(f,"summary");if(!!p.artifactBrief){this.portalInfo[s]||(this.portalInfo[s]={}),this.portalInfo[s]._data=p;for(let g in p.artifactBrief.target)this.artifactTypes[g]||(this.artifactTypes[g]={}),this.portalInfo[s][g]||(this.portalInfo[s][g]={}),this.portalInfo[s][g].target=He;for(let g in p.artifactBrief.fragment)this.artifactTypes[g]||(this.artifactTypes[g]={}),this.portalInfo[s][g]||(this.portalInfo[s][g]={}),this.portalInfo[s][g].fragments=!0;this.entities.push([s,p.timestamp,f])}}};this.getArtifactTypes=function(){return Object.keys(this.artifactTypes)};this.isArtifact=function(n){return n in this.artifactTypes};this.getArtifactEntities=function(){return this.entities};this.getInterestingPortals=function(){return Object.keys(this.portalInfo)};this.isInterestingPortal=function(n){return n in this.portalInfo};this.getPortalData=function(n,s){return this.portalInfo[n]&&this.portalInfo[n][s]};this.updateLayer=function(){this._layer.clearLayers(),Ar.default.each(this.portalInfo,function(n,s){let f=Xn.default.latLng([s._data.latE6/1e6,s._data.lngE6/1e6]);Ar.default.each(s,function(p){let g,x,R,T,E;s[p].target!==void 0?(g="//commondatastorage.googleapis.com/ingress.com/img/map_icons/marker_images/"+p+"_shard_target.png",x=100/2,R=1,T=Xn.default.icon({iconUrl:g,iconSize:[x,x],iconAnchor:[x/2,x/2]}),E=Xn.default.marker(f,{icon:T,interactive:!1,keyboard:!1,opacity:R}),this._layer.addLayer(E)):s[p].fragments&&(g="//commondatastorage.googleapis.com/ingress.com/img/map_icons/marker_images/"+p+"_shard.png",x=60/2,R=.6,T=Xn.default.icon({iconUrl:g,iconSize:[x,x],iconAnchor:[x/2,x/2]}),E=Xn.default.marker(f,{icon:T,interactive:!1,keyboard:!1,opacity:R}),this._layer.addLayer(E))})})};this.showArtifactList=function(){let n="";Object.keys(this.artifactTypes).length==0&&(n+="<i>No artifacts at this time</i>");let s=!0;Ar.default.each(this.artifactTypes,function(f){let p=Pr(f)+" shards";s||(n+="<hr>"),s=!1,n+="<div><b>"+p+"</b></div>",n+='<table class="artifact artifact-'+f+'">',n+="<tr><th>Portal</th><th>Details</th></tr>";let g=[];Ar.default.each(this.portalInfo,function(x,R){if(f in R){let T="zoomToAndShowPortal('"+x+"',["+R._data.latE6/1e6+","+R._data.lngE6/1e6+"])",E='<tr><td class="portal"><a onclick="'+T+'">'+Si(R._data.title)+"</a></td>";if(E+='<td class="info">',R[f].target!==void 0&&(R[f].target==He?E+='<span class="target">Target Portal</span> ':E+='<span class="target '+Ei[R[f].target]+'">'+(R[f].target==Yt?"Resistance":"Enlightened")+" target</span> "),R[f].fragments){R[f].target!==void 0&&(E+="<br>");let N="shard";E+='<span class="fragments'+(R[f].target?" "+Ei[R[f].target]:"")+'">'+N+": yes</span> "}E+="</td></tr>";let A=(R[f].target!==void 0?"A":"Z")+x;g.push([A,E])}}),g.length==0&&(n+='<tr><td colspan="2"><i>No portals at this time</i></td></tr>'),g.sort(function(x,R){return x[0]==R[0]?0:x[0]<R[0]?-1:1}),n+=g.map(function(x){return x[1]}).join(""),n+="</table>"}),Se({title:"Artifacts",id:"iitc-artifacts",html:n,width:400,position:{my:"right center",at:"center-60 center",of:window,collision:"fit"}})};this.REFRESH_JITTER=2*60,this.REFRESH_SUCCESS=60*60,this.REFRESH_FAILURE=2*60,this.idle=!1,this.clearData(),Mn(this.idleResume),setTimeout(this.requestData,1),this._layer=new Xn.default.LayerGroup,Cr("Artifacts",this._layer,!0),(0,Ar.default)("<a>").html("Artifacts").attr({id:"artifacts-toolbox-link",title:"Show artifact portal list"}).on("click",this.showArtifactList).appendTo("#toolbox")}requestData(){Je()?this.idle=!0:Ie("getArtifactPortals",{}).then(this.handleSuccess).catch(this.handleFailure)}idleResume(){this.idle&&(this.idle=!1,this.requestData())}handleSuccess(n){this.processData(n);let s=Date.now(),f=Math.ceil(s/(this.REFRESH_SUCCESS*1e3))*(this.REFRESH_SUCCESS*1e3)+Math.floor(Math.random()*this.REFRESH_JITTER*1e3);setTimeout(this.requestData,f-s)}handleFailure(n){setTimeout(this.requestData,this.REFRESH_FAILURE*1e3)}processData(n){if(n.error||!n.result)return;let s=this.entities;this.clearData(),this.processResult(n.result),Zt("artifactsUpdated",{old:s,new:this.entities}),this.updateLayer()}};var rt=Mt(oe()),Ja=class{constructor(){this._requestPublicRunning=!1;this._requestAlertsRunning=!1;this._oldBBox=null,this._requestFactionRunning=!1,this._public={data:{},oldestTimestamp:-1,newestTimestamp:-1,oldestGUID:null},this._alerts={data:{},oldestTimestamp:-1,newestTimestamp:-1},this._faction={data:{},oldestTimestamp:-1,newestTimestamp:-1,oldestGUID:null},window.localStorage["iitc-chat-tab"]&&this.chooseTab(window.localStorage["iitc-chat-tab"]),(0,rt.default)("#chatcontrols, #chat, #chatinput").show(),(0,rt.default)("#chatcontrols a:first").on("click",this.toggle),(0,rt.default)("#chatcontrols a").each((n,s)=>{rt.default.inArray((0,rt.default)(s).text(),["all","faction","alerts"])!==-1&&(0,rt.default)(s).on("click",f=>this.chooser(f))}),(0,rt.default)("#chatinput").on("click",()=>{(0,rt.default)("#chatinput input").focus()}),this.setupTime(),this.setupPosting(),(0,rt.default)("#chatfaction").on("scroll",()=>{let n=(0,rt.default)("#chatfaction");if(n.data("ignoreNextScroll"))return n.data("ignoreNextScroll",!1);n.scrollTop()<no&&this.requestFaction(!0,!1),Vn(n)===0&&this.requestFaction(!1,!1)}),(0,rt.default)("#chatall").on("scroll",()=>{let n=(0,rt.default)("#chatall");if(n.data("ignoreNextScroll"))return n.data("ignoreNextScroll",!1);n.scrollTop()<no&&this.requestPublic(!0,!1),Vn(n)===0&&this.requestPublic(!1,!1)}),(0,rt.default)("#chatalerts").on("scroll",()=>{let n=(0,rt.default)("#chatalerts");if(n.data("ignoreNextScroll"))return n.data("ignoreNextScroll",!1);n.scrollTop()<no&&this.renderAlerts(!0),Vn(n)===0&&this.renderAlerts(!1)}),he.addRefreshFunction(this.request),(0,rt.default)("#chatinput mark").addClass(w.PLAYER.cls),(0,rt.default)(document).on("click",".nickname",n=>this.nicknameClicked(n,(0,rt.default)("#chatinput mark").text()))}abort(){this._requestPublicRunning=!1,this._requestFactionRunning=!1}handleTabCompletion(){let n=(0,rt.default)("#chatinput input"),s=n.get(0).selectionStart,f=n.val(),p=f.slice(0,s).replace(/.*\b([a-z0-9-_])/,"$1").toLowerCase(),x=(0,rt.default)("#chat > div:visible mark").map(function(H,Z){return(0,rt.default)(Z).text()}),R=cl(x),T=null;for(let H=0;H<R.length;H++)if(!!R[H].toLowerCase().startsWith(p)){if(T&&T!==R[H])return;T=R[H]}if(!T)return;let E=s-p.length,A=f.substring(0,E);A+=(f.substring(E-1,E)==="@"?"":"@")+T+" ",A+=f.substring(s),n.val(A)}genPostData(n,s,f){if(typeof n!="string")throw new Error("API changed: isFaction flag now a channel string - all, faction, alerts");let p=po(w.map.getBounds());this._oldBBox||(this._oldBBox=p);let g=.1;p.pad(g).contains(this._oldBBox)&&this._oldBBox.pad(g).contains(p)||((0,rt.default)("#chat > div").data("needsClearing",!0),this._faction.data={},this._faction.oldestTimestamp=-1,this._faction.newestTimestamp=-1,delete this._faction.oldestGUID,delete this._faction.newestGUID,this._public.data={},this._public.oldestTimestamp=-1,this._public.newestTimestamp=-1,delete this._public.oldestGUID,delete this._public.newestGUID,this._alerts.data={},this._alerts.oldestTimestamp=-1,this._alerts.newestTimestamp=-1,delete this._alerts.oldestGUID,delete this._alerts.newestGUID,this._oldBBox=p);let x=p.getNorthEast(),R=p.getSouthWest(),T={minLatE6:Math.round(R.lat*1e6),minLngE6:Math.round(R.lng*1e6),maxLatE6:Math.round(x.lat*1e6),maxLngE6:Math.round(x.lng*1e6),minTimestampMs:-1,maxTimestampMs:-1,tab:n,plextContinuationGuid:null,ascendingTimestampOrder:!1};if(f)T=rt.default.extend(T,{maxTimestampMs:s.oldestTimestamp,plextContinuationGuid:s.oldestGUID});else{let E=s.newestTimestamp;rt.default.extend(T,{minTimestampMs:E,plextContinuationGuid:s.newestGUID}),E>-1&&rt.default.extend(T,{ascendingTimestampOrder:!0})}return T}requestFaction(n,s){if(this._requestFactionRunning&&!s)return;if(Je())return fi();this._requestFactionRunning=!0,(0,rt.default)("#chatcontrols a:contains('faction')").addClass("loading");let f=this.genPostData("faction",this._faction,n);Ie("getPlexts",f).then(p=>{this.handleFaction(p,n,null)}).catch(p=>{console.error("error in chat",p),s?this._requestFactionRunning=!1:this.requestFaction(n,!0)})}handleFaction(n,s,f){if(this._requestFactionRunning=!1,(0,rt.default)("#chatcontrols a:contains('faction')").removeClass("loading"),!n||!n.result){he.failedRequestCount++,console.warn("faction chat error. Waiting for next auto-refresh.");return}if(!n.result.length&&!(0,rt.default)("#chatfaction").data("needsClearing"))return;(0,rt.default)("#chatfaction").data("needsClearing",null);let p=this._faction.oldestGUID;this.writeDataToHash(n,this._faction,!1,s,f);let g=p!==this._faction.oldestGUID;Zt("factionChatDataAvailable",{raw:n,result:n.result,processed:this._faction.data}),this.renderFaction(g)}renderFaction(n){this.renderData(this._faction.data,"chatfaction",n)}requestPublic(n,s){if(this._requestPublicRunning&&!s)return;if(Je())return fi();this._requestPublicRunning=!0,(0,rt.default)("#chatcontrols a:contains('all')").addClass("loading");let f=this.genPostData("all",this._public,n);Ie("getPlexts",f).then(p=>this.handlePublic(p,n,f.ascendingTimestampOrder)).catch(p=>s?this._requestPublicRunning=!1:this.requestPublic(n,!0))}handlePublic(n,s,f){if(this._requestPublicRunning=!1,(0,rt.default)("#chatcontrols a:contains('all')").removeClass("loading"),!n||!n.result){he.failedRequestCount++,console.warn("public chat error. Waiting for next auto-refresh.");return}if(!n.result.length&&!(0,rt.default)("#chatall").data("needsClearing"))return;(0,rt.default)("#chatall").data("needsClearing",null);let p=this._public.oldestGUID;this.writeDataToHash(n,this._public,void 0,s,f);let g=p!==this._public.oldestGUID;Zt("publicChatDataAvailable",{raw:n,result:n.result,processed:this._public.data}),this.renderPublic(g)}renderPublic(n){this.renderData(this._public.data,"chatall",n)}requestAlerts(n,s){if(this._requestAlertsRunning&&!s)return;if(Je())return fi();this._requestAlertsRunning=!0,(0,rt.default)("#chatcontrols a:contains('alerts')").addClass("loading");let f=this.genPostData("alerts",this._alerts,n);Ie("getPlexts",f).then(p=>{this.handleAlerts(p,n,f.ascendingTimestampOrder)}).catch(p=>{s?this._requestAlertsRunning=!1:this.requestAlerts(n,!0)})}handleAlerts(n,s,f){if(this._requestAlertsRunning=!1,(0,rt.default)("#chatcontrols a:contains('alerts')").removeClass("loading"),!n||!n.result){he.failedRequestCount++;return}if(n.result.length===0)return;let p=this._alerts.oldestTimestamp;this.writeDataToHash(n,this._alerts,void 0,s,f);let g=p!==this._alerts.oldestTimestamp;this.renderAlerts(g)}renderAlerts(n){this.renderData(this._alerts.data,"chatalerts",n)}nicknameClicked(n,s){return Zt("nicknameClicked",{event:n,nickname:s})&&this.addNickname("@"+s),n.preventDefault(),n.stopPropagation(),!1}writeDataToHash(n,s,f,p,g){if(n.result.length>0){let x={guid:n.result[0][0],time:n.result[0][1]},R={guid:n.result[n.result.length-1][0],time:n.result[n.result.length-1][1]};if(g){let T=x;x=R,R=T}(s.oldestTimestamp===-1||s.oldestTimestamp>=R.time)&&(p||s.oldestTimestamp!=R.time)&&(s.oldestTimestamp=R.time,s.oldestGUID=R.guid),(s.newestTimestamp===-1||s.newestTimestamp<=x.time)&&(!p||s.newestTimestamp!=x.time)&&(s.newestTimestamp=x.time,s.newestGUID=x.guid)}rt.default.each(n.result,(x,R)=>{if(R[0]in s.data)return!0;let T=!1,E=!1,A=R[1],N=R[2].plext.team==="RESISTANCE"?Yt:Jt,H=R[2].plext.plextType!=="PLAYER_GENERATED",Z=R[2].plext.plextType==="SYSTEM_NARROWCAST",M="",I="";rt.default.each(R[2].plext.markup,(D,B)=>{switch(B[0]){case"SENDER":I=B[1].plain.slice(0,-2);break;case"PLAYER":I=B[1].plain,N=B[1].team==="RESISTANCE"?Yt:Jt,D>0&&(M+=I);break;case"TEXT":M+=(0,rt.default)("<div/>").text(B[1].plain).html();break;case"AT_PLAYER":let U=B[1].plain=="@"+w.PLAYER.nickname,Y=U?"pl_nudge_me":B[1].team+" pl_nudge_player",tt=B[1].plain.replace(/^@/,"");M+=(0,rt.default)("<div/>").html((0,rt.default)("<span/>").attr("class",Y).attr("onclick","window.chat.nicknameClicked(event, '"+tt+"')").text(B[1].plain)).html(),E=E||U;break;case"PORTAL":let h=B[1].latE6/1e6,_t=B[1].lngE6/1e6,at=kr([h,_t],null),Lt="window.selectPortalByLatLng("+h+", "+_t+");return false";M+='<a onclick="'+Lt+'" title="'+B[1].address+'" href="'+at+'" class="help">'+this.getChatPortalName(B[1])+"</a>";break;case"SECURE":T=!0;break;default:M+=(0,rt.default)("<div/>").text(B[0]+":<"+B[1].plain+">").html();break}}),!H&&f!==!1&&T&&(M='<span style="color: #f88; background-color: #500;">[faction]</span> '+M),!H&&f!==!0&&!T&&(M='<span style="color: #ff6; background-color: #550">[public]</span> '+M),s.data[R[0]]=[R[1],H,this.renderMsg(M,I,A,N,E,Z),I]})}getChatPortalName(n){let s=n.name;if(s==="US Post Office"){let f=n.address.split(",");s="USPS: "+f[0]}return s}renderData(n,s,f){console.log("render data",n);let p=(0,rt.default)("#"+s);if(p.is(":hidden"))return;let g=rt.default.map(n,function(E,A){return[E]});g=g.sort(function(E,A){return E[0]-A[0]});let x="",R=null;rt.default.each(g,(E,A)=>{let N=new Date(A[0]).toLocaleDateString();R&&R!==N&&(x+=this.renderDivider(N)),x+=A[2],R=N});let T=Vn(p);p.html("<table>"+x+"</table>"),this.keepScrollPosition(p,T,f)}renderDivider(n){let s=" \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500";return'<tr><td colspan="3" style="padding-top:3px"><summary>\u2500 '+n+s+"</summary></td></tr>"}renderMsg(n,s,f,p,g,x){let R=ll(f),T=sl(f,!0);T=(T.slice(0,19)+'<small class="milliseconds">'+T.slice(19)+"</small>").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");let E='<time title="'+T+'" data-timestamp="'+f+'">'+R+"</time>";g&&(E='<div class="pl_nudge_date">'+E+'</div><div class="pl_nudge_pointy_spacer"></div>'),x&&(n='<div class="system_narrowcast">'+n+"</div>");let A=ue[p];s===w.PLAYER.nickname&&(A="#fd6");let N='style="cursor:pointer; color:'+A+'"',H=['<span class="invisep">&lt;</span>','<span class="invisep">&gt;</span>'];return"<tr><td>"+E+"</td><td>"+H[0]+'<mark class="nickname" '+N+">"+s+"</mark>"+H[1]+"</td><td>"+n+"</td></tr>"}addNickname(n){var s=document.getElementById("chattext");s.value=[s.value.trim(),n].join(" ").trim()+" ",s.focus()}getActive(){return(0,rt.default)("#chatcontrols .active").text()}tabToChannel(n){return n=="faction"?"faction":n=="alerts"?"alerts":"all"}toggle(){let n=(0,rt.default)("#chat, #chatcontrols");if(n.hasClass("expand")){n.removeClass("expand");let s=(0,rt.default)("#chat > div:visible");s.data("ignoreNextScroll",!0),s.scrollTop(99999999),(0,rt.default)(".leaflet-control").removeClass("chat-expand")}else n.addClass("expand"),(0,rt.default)(".leaflet-control").addClass("chat-expand"),this.needMoreMessages()}backgroundChannelData(n,s,f){this.backgroundInstanceChannel||(this.backgroundInstanceChannel={}),this.backgroundInstanceChannel[n]||(this.backgroundInstanceChannel[n]={}),this.backgroundInstanceChannel[n][s]=f,this.backgroundChannels={},rt.default.each(this.backgroundInstanceChannel,(p,g)=>{rt.default.each(this.backgroundInstanceChannel[p],(x,R)=>{R&&(this.backgroundChannels[x]=!0)})})}request(){let n=this.tabToChannel(this.getActive());(n=="faction"||this.backgroundChannels&&this.backgroundChannels.faction)&&this.requestFaction(!1,!1),(n=="all"||this.backgroundChannels&&this.backgroundChannels.all)&&this.requestPublic(!1,!1),(n=="alerts"||this.backgroundChannels&&this.backgroundChannels.alerts)&&this.requestAlerts(!1,!1)}needMoreMessages(){let n=this.getActive();if(n==="debug")return;let s=(0,rt.default)("#chat > :visible");if(s.length===0)return;let f=Vn(s)!==0||s.scrollTop()!==0,p=s.scrollTop()<=no;f&&!p||(n==="faction"?this.requestFaction(!0,!1):this.requestPublic(!0,!1))}chooseTab(n){n!="all"&&n!="faction"&&n!="alerts"&&(console.warn('chat tab "'+n+'" requested - but only "all", "faction" and "alerts" are valid - assuming "all" wanted'),n="all"),console.log("choosing tab",n);let s=this.getActive();window.localStorage["iitc-chat-tab"]=n;let f=(0,rt.default)("#chatinput mark"),p=(0,rt.default)("#chatinput input");(0,rt.default)("#chatcontrols .active").removeClass("active"),(0,rt.default)("#chatcontrols a:contains('"+n+"')").addClass("active"),n!=s&&dn(.1*1e3),(0,rt.default)("#chat > div").hide();let g=(0,rt.default)("#chat"+n);switch(g.show(),n){case"faction":p.css("color",""),f.css("color",""),f.text("tell faction:"),this.renderFaction(!1);break;case"all":p.css("cssText","color: #f66 !important"),f.css("cssText","color: #f66 !important"),f.text("broadcast:"),this.renderPublic(!1);break;case"alerts":f.css("cssText","color: #bbb !important"),p.css("cssText","color: #bbb !important"),f.text("tell Jarvis:"),this.renderAlerts(!1);break;default:throw new Error("chat.chooser was asked to handle unknown button: ")}g.data("needsScrollTop")&&(g.data("ignoreNextScroll",!0),g.scrollTop(g.data("needsScrollTop")),g.data("needsScrollTop",null))}show(n){Ee()?(0,rt.default)("#updatestatus").hide():(0,rt.default)("#updatestatus").show(),(0,rt.default)("#chat, #chatinput").show(),this.chooseTab(n)}chooser(n){let f=(0,rt.default)(n.target).text();this.chooseTab(f)}keepScrollPosition(n,s,f){if(n.is(":hidden")&&!f){n.data("needsScrollTop",99999999);return}(s===0||f)&&(n.data("ignoreNextScroll",!0),n.scrollTop(n.scrollTop()+(Vn(n)-s)))}setupTime(){let n=(0,rt.default)("#chatinput time"),s=()=>{if(Je())return;let f=new Date,p=f.getHours()+"";p.length===1&&(p="0"+p);let g=f.getMinutes()+"";g.length===1&&(g="0"+g),n.text(p+":"+g),setTimeout(s,(60-f.getSeconds())*1e3+1)};s(),Mn(s)}setupPosting(){Ee()||(0,rt.default)("#chatinput input").keydown(n=>{try{let s=n.keyCode?n.keyCode:n.which;s===13?(this.postMsg(),n.preventDefault()):s===9&&(n.preventDefault(),this.handleTabCompletion())}catch(s){console.error(s)}}),(0,rt.default)("#chatinput").on("submit",n=>{n.preventDefault(),this.postMsg()})}postMsg(){let n=this.getActive();if(n=="alerts")return alert(`Jarvis: A strange game. The only winning move is not to play. How about a nice game of chess?
(You can't chat to the 'alerts' channel!)`);let s=rt.default.trim((0,rt.default)("#chatinput input").val());if(!s||s==="")return;let f=w.map.getCenter(),p={message:s,latE6:Math.round(f.lat*1e6),lngE6:Math.round(f.lng*1e6),tab:n},g=`Your message could not be delivered. You can copy&paste it here and try again if you want:

`+s;Ie("sendPlext",p).then(x=>dn(.1*1e3)).catch(x=>alert(g)),(0,rt.default)("#chatinput input").val("")}};var ke=Mt(oe());var Wi=Mt(Ze()),Vt={lastSearch:null,Query:null,doSearch:null,setup:null,timer:null};Vt.Query=function(a,n){this.term=a,this.confirmed=n,this.init()};Vt.Query.prototype.init=function(){this.results=[],this.container=(0,ke.default)("<div>").addClass("searchquery"),this.header=(0,ke.default)("<h3>").text(this.confirmed?this.term:(this.term.length>16?this.term.substr(0,8)+"\u2026"+this.term.substr(this.term.length-8,8):this.term)+" (Return to load more)").appendTo(this.container),this.list=(0,ke.default)("<ul>").appendTo(this.container).append((0,ke.default)("<li>").text(this.confirmed?"No local results, searching online...":"No local results.")),this.container.accordion({collapsible:!0,heightStyle:"content"}),Zt("search",this)};Vt.Query.prototype.show=function(){this.container.appendTo("#searchwrapper")};Vt.Query.prototype.hide=function(){this.container.remove(),this.removeSelectedResult(),this.removeHoverResult()};Vt.Query.prototype.addResult=function(a){this.results.length==0&&this.list.empty(),this.results.push(a);let n=(0,ke.default)("<li>").appendTo(this.list).attr("tabindex","0").on("click dblclick",function(f){this.onResultSelected(a,f)}.bind(this)).on("mouseover",function(f){this.onResultHoverStart(a,f)}.bind(this)).on("mouseout",function(f){this.onResultHoverEnd(a,f)}.bind(this)).keypress(function(f){if((f.keyCode||f.charCode||f.which)==32){f.preventDefault(),f.type="click",(0,ke.default)(this).trigger(f);return}if((f.keyCode||f.charCode||f.which)==13){f.preventDefault(),f.type="dblclick",(0,ke.default)(this).trigger(f);return}}),s=(0,ke.default)("<a>").append(a.title).appendTo(n);a.icon&&(s.css("background-image",'url("'+a.icon+'")'),n.css("list-style","none")),a.description&&n.append((0,ke.default)("<br>")).append((0,ke.default)("<em>").append(a.description))};Vt.Query.prototype.resultLayer=function(a){return a.layer!==null&&!a.layer&&(a.layer=Wi.default.layerGroup(),a.position&&Wi.default.marker(a.position,{icon:Wi.default.divIcon(),title:a.title}).addTo(a.layer),a.bounds&&Wi.default.rectangle(a.bounds,{interactive:!1,color:"red",fill:!1}).addTo(a.layer)),a.layer};Vt.Query.prototype.onResultSelected=function(a,n){this.removeHoverResult(),this.removeSelectedResult(),this.selectedResult=a,!(a.onSelected&&a.onSelected(a,n))&&(n.type=="dblclick"?a.position?w.map.setView(a.position,Ke):a.bounds&&w.map.fitBounds(a.bounds,{maxZoom:Ke}):a.bounds?w.map.fitBounds(a.bounds,{maxZoom:Ke}):a.position&&w.map.setView(a.position),a.layer=this.resultLayer(a),a.layer&&w.map.addLayer(a.layer),Ee()&&ki("map"))};Vt.Query.prototype.removeSelectedResult=function(){this.selectedResult&&(this.selectedResult.layer&&w.map.removeLayer(this.selectedResult.layer),this.selectedResult.onRemove&&this.selectedResult.onRemove(this.selectedResult))};Vt.Query.prototype.onResultHoverStart=function(a,n){this.removeHoverResult(),this.hoverResult=a,a!==this.selectedResult&&(a.layer=this.resultLayer(a),a.layer&&w.map.addLayer(a.layer))};Vt.Query.prototype.removeHoverResult=function(){this.hoverResult!==this.selectedResult&&this.hoverResult&&this.hoverResult.layer&&w.map.removeLayer(this.hoverResult.layer),this.hoverResult=null};Vt.Query.prototype.onResultHoverEnd=function(a,n){this.removeHoverResult()};Vt.doSearch=function(a,n){a=a.trim(),!(a.length<3&&!n)&&(Vt.lastSearch&&Vt.lastSearch.confirmed&&!n||Vt.lastSearch&&Vt.lastSearch.confirmed==n&&Vt.lastSearch.term==a||(Vt.lastSearch&&Vt.lastSearch.hide(),Vt.lastSearch=null,a!=""&&(ho()&&ki("info"),(0,ke.default)(".ui-tooltip").remove(),Vt.lastSearch=new Vt.Query(a,n),Vt.lastSearch.show())))};Vt.setup=function(){(0,ke.default)("#search").on("keypress",a=>{if((a.keyCode?a.keyCode:a.which)!=13)return;a.preventDefault();let n=(0,ke.default)(this).val();clearTimeout(Vt.timer),Vt.doSearch(n,!0)}).on("keyup keypress change paste",function(a){clearTimeout(Vt.timer),Vt.timer=setTimeout(function(){let n=(0,ke.default)(this).val();Vt.doSearch(n,!1)}.bind(this),500)}),(0,ke.default)("#buttongeolocation").on("click",function(){w.map.locate({setView:!0,maxZoom:13})})};yi("search",function(a){let n=a.term.toLowerCase(),s=["NEU","RES","ENL"];ke.default.each(w.portals,function(f,p){let g=p.options.data;if(!!g.title&&g.title.toLowerCase().indexOf(n)!==-1){let x=p.options.team,R=x==He?"#CCC":ue[x];a.addResult({title:g.title,description:s[x]+", L"+g.level+", "+g.health+"%, "+g.resCount+" Resonators",position:p.getLatLng(),icon:"data:image/svg+xml;base64,"+btoa("@include_string:images/icon-portal.svg@".replace(/%COLOR%/g,R)),onSelected:function(T,E){if(E.type=="dblclick")ta(f,p.getLatLng());else if(w.portals[f])w.map.getBounds().contains(T.position)||w.map.setView(T.position),Ye(f);else{let{lat:A,lng:N}=p.getLatLng();ul(A,N)}return!0}})}})});yi("search",function(a){let n=a.term.match(/[+-]?\d+\.\d+,[+-]?\d+\.\d+/g),s={};!n||n.forEach(function(f){let p=f.split(",").map(function(R){return parseFloat(R).toFixed(6)}),g=p.join(","),x=Wi.default.latLng(p.map(function(R){return parseFloat(R)}));s[g]||(s[g]=!0,a.addResult({title:g,description:"geo coordinates",position:x,onSelected:function(R,T){for(let E in w.portals){let A=w.portals[E].getLatLng();if(A.lat.toFixed(6)+","+A.lng.toFixed(6)==g){Ye(E);return}}w.urlPortalLL=[R.position.lat,R.position.lng]}}))})});yi("search",function(a){if(!a.confirmed)return;let n=w.map.getBounds(),s="&viewbox="+n.getSouthWest().lng+","+n.getSouthWest().lat+","+n.getNorthEast().lng+","+n.getNorthEast().lat,f=0,p={};function g(R,T){if(f+=T.length,R){if(ke.default.getJSON(Ta+encodeURIComponent(a.term)+s,g.bind(null,!1)),f===0)return}else if(f===0){a.addResult({title:"No results on OpenStreetMap",icon:"//www.openstreetmap.org/favicon.ico",onSelected:function(){return!0}});return}T.forEach(function(E){if(p[E.place_id])return;p[E.place_id]=!0;let A={title:E.display_name,description:"Type: "+E.type,position:Wi.default.latLng(parseFloat(E.lat),parseFloat(E.lon)),icon:E.icon,layer:null,bounds:null},N=E.boundingbox;if(N){let H=new Wi.default.LatLng(N[0],N[2]),Z=new Wi.default.LatLng(N[1],N[3]);A.bounds=new Wi.default.LatLngBounds(H,Z)}a.addResult(A)})}let x="&bounded=1";ke.default.getJSON(Ta+encodeURIComponent(a.term)+s+x,g.bind(null,!0))});var sa=Mt(oe()),Sl={"portal shield":"S","force amp":"FA","link amp":"LA",heatsink:"H",multihack:"M",turret:"T","unusual object":"U",resonator:"R","xmp burster":"X","power cube":"C",media:"M","ultra strike":"US"},bu={429:"You have been rate-limited by the server. Wait a bit and try again.",500:"Internal server error"},Cl=function(a){var n=a;if(a.error){Se({title:"Error: "+n,html:"<strong>"+a.error+"</strong>"});return}if(!a.rewards){Se({title:"Error: "+n,html:"<strong>An unexpected error occured</strong>"});return}a.playerData&&(w.PLAYER=new uo(a.playerData),$a());var s="long";try{s=localStorage["iitc-passcode-format"]}catch(x){}var f={short:wu,long:xu};f[s]||(s="long");var p=f[s](a.rewards),g={};Object.keys(f).forEach(function(x){x!=s&&(g[x.toUpperCase()]=function(){(0,sa.default)(this).dialog("close"),localStorage["iitc-passcode-format"]=x,Cl(a)})}),Se({title:"Passcode: "+n,html:p,buttons:g})},xu=function(a){var n='<p><strong>Passcode confirmed. Acquired items:</strong></p><ul class="redeemReward">';return a.other&&a.other.forEach(function(s){n+="<li>"+Si(s)+"</li>"}),0<a.xm&&(n+="<li>"+Si(a.xm)+" XM</li>"),0<a.ap&&(n+="<li>"+Si(a.ap)+" AP</li>"),a.inventory&&a.inventory.forEach(function(s){s.awards.forEach(function(f){n+="<li>"+f.count+"x ";var p=f.level;0<p&&(p=parseInt(p),n+='<span class="itemlevel" style="color:'+un[p]+'">L'+p+"</span> "),n+=Si(s.name)+"</li>"})}),n+="</ul>",n},wu=function(a){let n=[];return a.other&&(n=a.other.map(Si)),0<a.xm&&n.push(Si(a.xm)+" XM"),0<a.ap&&n.push(Si(a.ap)+" AP"),a.inventory&&a.inventory.forEach(function(s){s.awards.forEach(function(f){var p="";if(f.count>1&&(p+=f.count+"&nbsp;"),Sl[s.name.toLowerCase()]){var g=Sl[s.name.toLowerCase()],x=f.level;0<x?(x=parseInt(x),p+='<span class="itemlevel" style="color:'+un[x]+'">'+g+x+"</span>"):p+=g}else{var x=f.level;0<x&&(x=parseInt(x),p+='<span class="itemlevel" style="color:'+un[x]+'">L'+x+"</span> "),p+=s.name}n.push(p)})}),'<p class="redeemReward">'+n.join(", ")+"</p>"},Al=function(){(0,sa.default)("#redeem").keypress(function(a){if((a.keyCode?a.keyCode:a.which)!==13)return;let n=(0,sa.default)(this).val();n=n.replace(/[^\x20-\x7E]+/g,""),!!n&&Ie("redeemReward",{passcode:n}).then(Cl).catch(function(s){let f="";s.status?f=(bu[s.status]||"The server indicated an error.")+" (HTTP "+s.status+")":f="No status code was returned.",Se({title:"Request failed: "+n,html:"<strong>The HTTP request failed.</strong> "+f})})})};var ts=Mt(oe()),la=function(){Ie("getGameScore",{}).then(a=>{if(a&&a.result){let n=parseInt(a.result[0]),s=parseInt(a.result[1]),f=s+n,p=s/f*100,g=n/f*100;s=ve(s),n=ve(n);let x='<span class="res" style="width:'+p+'%;">'+Math.round(p)+"%&nbsp;</span>",R='<span class="enl" style="width:'+g+'%;">&nbsp;'+Math.round(g)+"%</span>";(0,ts.default)("#gamestat").html(x+R).one("click",function(){la()}),(0,ts.default)("#gamestat").attr("title","Resistance:	"+s+` MindUnits
Enlightened:	`+n+" MindUnits")}else a&&a.error?console.warn("game score failed to load: "+a.error):console.warn("game score failed to load - unknown reason")}).catch(a=>console.error(a)),window.setTimeout(()=>{la()},ps*1e3)};var Qt=Mt(Ze());var Rr=Mt(Ze());var Rl=function(){let a=w.map.getCenter();a.lat>=-90&&a.lat<=90&&ia("ingress.intelmap.lat",a.lat),a.lng>=-180&&a.lng<=180&&ia("ingress.intelmap.lng",a.lng),ia("ingress.intelmap.zoom",w.map.getZoom())},Ml=function(){if(Pe("latE6")&&Pe("lngE6")){var a=parseInt(Pe("latE6"))/1e6||0,n=parseInt(Pe("lngE6"))/1e6||0,s=parseInt(Pe("z"))||Ke;return{center:new Rr.default.LatLng(a,n),zoom:s}}if(Pe("ll")){var a=parseFloat(Pe("ll").split(",")[0])||0,n=parseFloat(Pe("ll").split(",")[1])||0,s=parseInt(Pe("z"))||Ke;return{center:new Rr.default.LatLng(a,n),zoom:s}}if(Pe("pll")){var a=parseFloat(Pe("pll").split(",")[0])||0,n=parseFloat(Pe("pll").split(",")[1])||0,s=parseInt(Pe("z"))||Ke;return{center:new Rr.default.LatLng(a,n),zoom:s}}if(hn("ingress.intelmap.lat")&&hn("ingress.intelmap.lng")){var a=parseFloat(hn("ingress.intelmap.lat"))||0,n=parseFloat(hn("ingress.intelmap.lng"))||0,s=parseInt(hn("ingress.intelmap.zoom"))||Ke;return(a<-90||a>90)&&(a=0),(n<-180||n>180)&&(n=0),{center:new Rr.default.LatLng(a,n),zoom:s}}return setTimeout(()=>{w.map.locate({setView:!0})},50),{center:new Rr.default.LatLng(0,0),zoom:1}};var Ol=Mt(Il());var qt=Mt(oe());var Mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAocSURBVHjanNRbUFN3Hgfwv9Pdzu5sZ7cP3d1eprP7sC/bPvSls9MmB5CLcg2IIAhSWwS8rFqrpbVbu3Vdd2ov04qJgGBESAJJCOR2AiFcEpKT+wkhiIiCoCJKkQhCIEgEvvsQcaoVdffhM+fMOf///3v+5/c7h8S8lk64f0wkH7/9LZGnsUSczBBREkNESRaieM9JOg6fJzUJljckPGajhMfsF6dYjolTLMV16bZMxRbnW2KehUhSGSJKtBBlvptIM+2kJt5CRIkWIkljiCSVIWS1EHEyQ6SZtrdVBe5jomRLd126dVa6ybZYn+OAbJN9qS7dOidJYy6Iki3fS3gM5/8J+bMo0VJZm2pdaHjPiaZ9XrR+dg6tn59D26FetB06h9Z/nEPzvm4ot7lRl25drI43Vzd+4PrLM4WIkpjImkRmWJHnQktxD9o+70XLJz7o9nWD3uMFvdsLeo8Xug+7oS/23b/fg4b3XBClMNfFyUx8TeIjIWtfTSPv/iGeHHj7GyLnseniJGZGs8ODtkO9aP6oG9qdXdDs8EC3x4s+5SjujMzhIn0DTfu6odnhgXZnF5o+6kbboV5odnZBlMQEaxIsuQ+FJLy+mUS/toF88vb3f5Mlu+9od3XBcPActDu7oC70QF3kgbP0Mu5cD2LOv4DFhSXM+Rcwc3MebMUQ1EUeqAs90OwMz6N3e1GTYJkVJVooSSpDalNthFTEtJKKmNbfnonruKDaxsJwsAfq7R6oClmYjl7Arb5p3J25hz7lKFo/78XsrbswHu7DOekI5qdCmLg4A/OxfqgKWai3e2D4tAfKAjeq15sHqtebf3c6ro2QmnUMqY61HJJutMPwaQ80OzzQ7/dhqGMc94KLuO68jdbPzkFVwEJ/wIfQ3CLaDvVCVcDC8GkPrjITuBdcxBXzLbQU9zwIkmU4ULHW8GX869mEnI0z//5snHlcu6sLur1euMuHMHvrLvwDAZi/7odymxvKfBbKfBa6vd0Y892B/uMeKLexYfn3d9w/jTn/ArqEw9Dt9YL+uxfCGOPE/re+e5lUxXTmSVKt0B8It+P0aBCDhh+hKmShzHdDXchCs90D7Y4welfXg3PNdg80RR405ruhKmTRr72B6dEglNvcaD7gQ22aFeI4x1ZyJsokVuQ5odvrhSLPhduDAdiOD6D9n+H3Hxibx/RoEJPDs5geDWL6ehDTo0FMXZnF9PUgAmPzmPMvwHT0Asxf9cM/GIAizwXdXi8a8pw4E2WSEGGUyakqYKHZ4YFiSzjEXX4ZjVtdGD8/DQBYureMPuUoTEf6YDx8HqYjfeiVj+De3SUAgH8wgMb33bAfH8DtwQAUW1zQbPdAVcBCGGV0E+Fa41X1/QsNueEQtnwIDVtcaP/iPEL3ix8Ym8c16wSMh/swbBzH7PhdjDj8uDe/CNO/L0CR54KjZBC3BwNoyHVBVRDuNuFa4zUiXGu8odnugTLfDflmB/yDAbjKLkOR64Qi14mhjnGMspPQfdiNUddtLC8t46Z3Cvr9PlxlJjBi80OR60R9jhO245fgHwxAvtkBZb4bmnDIDVIZ2e5uzHdDuc0NWbYD/oFwSP1mB+Q5TqiLWCwE7sHyzUU05LkwPxWCusgD4+E+hIKLoHd7Ic9xQr7ZAdsPl+AfCECW7YAyn0XjB25URrazpJwyyGTZdqiLPJBussM/GIC9ZACybDtMR/qgL/bBW3MFMzeC0O31IjA2j+b9PkwOz6K3fgRNH3aj8z8XIM92gPn6IvwDAUg3hdeTZdtRTrU2kNPR7Xuqkzqh2d4FWZYdE/0z8ImvYkA/hsW7S3CfGoIs246pa3MYNPwI/2AAg/oxzIwGUZ/jhP34AELBRQx1jMNbdQUT/TOQZdmh2dGF6qROnI5p30fKI/R/rYhqDakKWNTnOnH7cgAAMMpOoqW4B9JMO2SZdpi/6sfy0jJCwUUAgO2HS5BtskOaaYd+vw8jdj+wDExemUV9rhPqAhanogyh8gjDm6SMal5zkqNrrctkoMxn4au9hqXQEi63/whlgRvSDBvqNtohzbBhxOEHANzsnoI0w/6A8gM3LjXdxPLSMnrlI1BtY1GbweDku7qW8gj9GlIWoScCLp1TEWuAqsADaYYN+mIfxnqmEJxcgE98FfU5TtSl29C0rxvzd0IwHOxB3UYbZFl2dFVdwZx/AePnp2E42ANppg3qQg8qYw3gc+iMk5SOkBMcNSnhqF8QcOgheY4Dii1OiHkMJKkMLN/0487IHKauzcF8rB+1G6zQ7e5C3QYrOo/2YXJoFjM3grD9cAkSHgMxj4EizwX5Zgf4HLr/BFfzqxNcDSF8Skv4lJac4GiOnEnogDKfhSQtHCJJZSDLssMnuYb5qRBueCZhPNKHEYcfd6dDOF9/HYocZ3gsj4EkjYEqn4Uwvh18jvZgKdVESqkmQkojmsOopj8JKN1teY4D8mwHxCnhJxPzGIhTGKiLWAybbmH+TgjXrBPQ7OqCmGeFhGeFOIWBKIVBfY4D8s0OCLj0mICiXxZQNBFQNCHlES0P8DnaY8L4djRudYcnJjEQJTMQr0j6OVFyeJyYx6DxfTdOr2sDn0N/sbKLUqqJkJW0+14RcOlxaZYdsk121CRYIEp8upoES7idN9kg4NLXS6mmlx4K4XO1DznB0Xx5el0bFHkuiJLCCzyNKNkCRZ4LlXGtEHDo4p8GPDaEz9W+JODSo9JMG6QZdpyNM6N63erOxpkhzbSjLsMKAVc3LKDoFwWUjvwUeTS1lGoiAg79SWVsKxS5TlSvt+BsbHixn4k1ozreAkWOExUxBgi4ur1lEXryqEdrsuJFAYcelqQzqNtgQ1VMJ6pif+5MTCfq0m0Qb2DA52gvlXBUL5SEv7uHkEe3toLP1e6uiDZAnuVA9TozqqI7w2ErojtRvd4MebYDp6INKOGoi0o4KvI4pDzSsIqW3/A52osingW1qVYIo4w4E2V6QBhlRG2qFSKeGXwufZ7P1f76MfUlfK72sYX/aacVnFrbAmmGHVWxnRBGGiGMMkIYaURVbCekGXaURelRRjVvPR3ZTioj2x6LnKR0T/IrPofuqUnuhIRnRWVkB05HdaAysgMSnhU1yZ3gc7TeEo76+RMcNVkNWe09rjjBUeeWR+lRt8EGYYwRp6hWCGOMqNtgQ3mUHgKKzlr5/62GPG0An9L+UsCl2eoEE0RJFpRTBoiSLDibYMJJSuesjjf/oibBTJ6EVMd3PlFNgplURBvSSyOaIE5hUBVngjiFQVlkM757pz7t23dk5GnIqUjDs3iOz9UyZ9Z1hL+b9SZ8/26Def3rWc+tfYVHol9Ne6KnFf4BPleTWBbZDFGSBWWRehznqBJ2v3mU7HzjMNn1xr+e6Ikt/Ig1AopuK4vQQ0DRrXyudk15RAs5FWF4qtV+K6uJE1DaUPj47PP+15DnBRRdeP/4zPP+OwCV955x/18hzAAAAABJRU5ErkJggg==";var Pu=function(){(0,qt.default)("#portaldetails").on("click",".imgpreview",function(a){let n=this.querySelector("img"),s=Math.max(n.naturalWidth+24,500),f=new Image(n.width,n.height);f.src=n.src,f.style.setProperty("margin","auto"),f.style.setProperty("display","block");let p=a.delegateTarget.querySelector(".title").innerText;Se({html:f,title:p,id:"iitc-portal-image",width:s})})},ku=function(){(0,qt.default)(".leaflet-control-layers-overlays").on("click taphold","label",function(a){if(!a||!(a.metaKey||a.ctrlKey||a.shiftKey||a.altKey||a.type==="taphold"))return;let n=w.map,s=function(x){n.hasLayer(x.layer)||n.addLayer(x.layer)},f=function(x){n.hasLayer(x.layer)&&n.removeLayer(x.layer)},p=(0,qt.default)(a.target).find("input").is(":checked"),g=(0,qt.default)(".leaflet-control-layers-overlays input:checked").length;if(p&&g===1||g===0)qt.default.each(w.layerChooser._layers,function(x,R){if(!R.overlay)return!0;s(R)});else{let x=qt.default.trim((0,qt.default)(a.target).text());qt.default.each(w.layerChooser._layers,function(R,T){if(T.overlay!==!0)return!0;if(T.name===x)return s(T),!0;f(T)})}a.preventDefault()})},Su=function(){qt.default.each(w.layerChooser._layers,function(a,n){if(!n.overlay)return!0;let s=w.map.hasLayer(n.layer);Ha(n.name,s)}),w.map.on("overlayadd overlayremove",function(a){let n=a.type==="overlayadd";Ha(a.name,n)})},Cu=function(){(0,qt.default)("head").append("<style>"+["#largepreview.enl img { border:2px solid "+ue[Jt]+"; } ","#largepreview.res img { border:2px solid "+ue[Yt]+"; } ","#largepreview.none img { border:2px solid "+ue[He]+"; } ","#chatcontrols { bottom: "+(wa+22)+"px; }","#chat { height: "+wa+"px; } ",".leaflet-right { margin-right: "+(ln+1)+"px } ","#updatestatus { width:"+(ln+2)+"px;  } ","#sidebar { width:"+(ln+qo+1)+"px; display: block; } ","#sidebartoggle { right:"+(ln+1)+"px;  } ","#scrollwrapper  { width:"+(ln+2*qo)+"px; right:-"+(2*qo-2)+"px } ","#sidebar > * { width:"+(ln+1)+"px;  }"].join(`
`)+"</style>")},Au=function(){(0,qt.default)(["<svg>",'<symbol id="ic_place_24px" viewBox="0 0 24 24">','<path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5a2.5 2.5 0 0 1 0-5 2.5 2.5 0 0 1 0 5z"/>',"</symbol>","</svg>"].join("\\n")).appendTo("body")},Ru=()=>{let a={},n='&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',s="https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}.png";return a["CartoDB Dark Matter"]=Qt.default.tileLayer(s,{attribution:n}),a["CartoDB Positron"]=Qt.default.tileLayer(s,{attribution:n}),a},Mu=()=>{(0,qt.default)("#map").text(""),w.map=new Qt.default.Map("map",{center:[0,0],zoom:1,zoomControl:!0,minZoom:Uo,markerZoomAnimation:!1,bounceAtZoomLimits:!1,maxBoundsViscosity:.7,worldCopyJump:!0,preferCanvas:!0});let a=w.map.options.crs.getProjectedBounds(1).max.x;w.map.setMaxBounds([[a,360],[-a,-360]]),Qt.default.Renderer.mergeOptions({padding:.5}),Ee()||(0,qt.default)(w.map._controlCorners.bottomleft).append((0,qt.default)("<div>").width(708).height(108).addClass("leaflet-control").css({"pointer-events":"none",margin:"0"}));let n={},s=[];w.portalsFactionLayers=[];let f=[];for(let E=0;E<=8;E++){w.portalsFactionLayers[E]=[Qt.default.layerGroup(),Qt.default.layerGroup(),Qt.default.layerGroup()],f[E]=Qt.default.layerGroup(w.portalsFactionLayers[E]),w.map.addLayer(f[E]);let A=(E===0?"Unclaimed/Placeholder":"Level "+E)+" Portals";n[A]=f[E],fn(A,!0)||s.push(f[E])}w.fieldsFactionLayers=[Qt.default.layerGroup(),Qt.default.layerGroup(),Qt.default.layerGroup()];let p=Qt.default.layerGroup(w.fieldsFactionLayers);w.map.addLayer(p),n.Fields=p,fn("Fields",!0)||s.push(p),w.linksFactionLayers=[Qt.default.layerGroup(),Qt.default.layerGroup(),Qt.default.layerGroup()];let g=Qt.default.layerGroup(w.linksFactionLayers);w.map.addLayer(g),n.Links=g,fn("Links",!0)||s.push(g);let x=[Qt.default.layerGroup(),Qt.default.layerGroup(),Qt.default.layerGroup()];for(let E in x)w.map.addLayer(x[E]);let R=function(E,A){if(A){p.hasLayer(w.fieldsFactionLayers[E])||p.addLayer(w.fieldsFactionLayers[E]),g.hasLayer(w.linksFactionLayers[E])||g.addLayer(w.linksFactionLayers[E]);for(let N in f)f[N].hasLayer(w.portalsFactionLayers[N][E])||f[N].addLayer(w.portalsFactionLayers[N][E])}else{p.hasLayer(w.fieldsFactionLayers[E])&&p.removeLayer(w.fieldsFactionLayers[E]),g.hasLayer(w.linksFactionLayers[E])&&g.removeLayer(w.linksFactionLayers[E]);for(let N in f)f[N].hasLayer(w.portalsFactionLayers[N][E])&&f[N].removeLayer(w.portalsFactionLayers[N][E])}};w.PLAYER.team==hi.ENLIGHTENED?(n.Enlightened=x[Jt],n.Resistance=x[Yt]):(n.Resistance=x[Yt],n.Enlightened=x[Jt]),fn("Resistance",!0)||s.push(x[Yt]),fn("Enlightened",!0)||s.push(x[Jt]),R(He,!0),R(Yt,fn("Resistance",!0)),R(Jt,fn("Enlightened",!0)),w.map.on("overlayadd overlayremove",function(E){let A=E.type=="overlayadd";switch(E.name){case"Resistance":R(Yt,A);break;case"Enlightened":R(Jt,A);break}});let T=Ru();w.layerChooser=new Qt.default.Control.Layers(T,n),qt.default.each(s,function(E,A){w.map.removeLayer(A),(0,qt.default)("#portaldetails").html('<div class="layer_off_warning"><p><b>Warning</b>: some of the standard layers are turned off. Some portals/links/fields will not be visible.</p><a id="enable_standard_layers">Enable standard layers</a></div>'),(0,qt.default)("#enable_standard_layers").on("click",function(){qt.default.each(n,function(N,H){w.map.hasLayer(H)||w.map.addLayer(H)}),(0,qt.default)("#portaldetails").html("")})}),w.map.addControl(w.layerChooser),w.map.attributionControl.setPrefix(""),w.map.on("moveend",Rl),w.map.on("movestart",function(){w.mapRunsUserAction=!0,he.abort(),dn(-1)}),w.map.on("moveend",function(){w.mapRunsUserAction=!1,dn(Zo*1e3)}),w.map.on("moveend",oa),Mn(function(){dn(Zo*1e3)}),w.mapDataRequest=new Xa,dn(Zo*1e3)},Du=()=>{let a={},n=null;for(let p in w.layerChooser._layers){let g=w.layerChooser._layers[p];g.overlay||(a[g.name]=g.layer,n||(n=g.layer))}let s=a[window.localStorage["iitc-base-map"]]||n;w.map.addLayer(s);let f=Ml();w.map.setView(f.center,f.zoom),w.map.on("baselayerchange",function(p){for(let g in w.layerChooser._layers){let x=w.layerChooser._layers[g];if(p.layer===x.layer){window.localStorage["iitc-base-map"]=x.name;break}}w.map.setZoom(w.map.getZoom())})},$a=function(){let a="Level:	"+w.PLAYER.verified_level+`
XM:	`+w.PLAYER.energy+" / "+w.PLAYER.xm_capacity+`
AP:	`+w.PLAYER.ap+`
`+(w.PLAYER.min_ap_for_next_level>0?"level up in:	"+w.PLAYER.lvlUpAp+" AP":"Maximum level reached(!)")+`
Invites:	`+w.PLAYER.available_invites+`

Note: your player stats can only be updated by a full reload (F5)`;(0,qt.default)("#playerstat").html('<h2 title="'+a+'">'+w.PLAYER.verified_level+'&nbsp;<div id="name"><span class="'+w.PLAYER.cls+'">'+w.PLAYER.nickname+'</span><a href="https://intel.ingress.com/logout" id="signout">sign out</a></div><div id="stats"><sup>XM: '+w.PLAYER.xmRatio+"%</sup><sub>"+(w.PLAYER.min_ap_for_next_level>0?"level: "+w.PLAYER.lvlApProg+"%":"max level")+"</sub></div></h2>")},Iu=function(){(0,qt.default)("#sidebartoggle").on("click",function(){let a=(0,qt.default)("#sidebartoggle"),n=(0,qt.default)("#scrollwrapper");n.is(":visible")?(n.hide(),(0,qt.default)(".leaflet-right").css("margin-right","0"),a.html('<span class="toggle open"></span>'),a.css("right","0")):(n.show(),co(),(0,qt.default)(".leaflet-right").css("margin-right",ln+1+"px"),a.html('<span class="toggle close"></span>'),a.css("right",ln+1+"px")),(0,qt.default)(".ui-tooltip").remove()})},Ou=function(a){a=a||(0,qt.default)(document),console.log(a,a.attr("title")),window.tooltipClearerHasBeenSetup||(window.tooltipClearerHasBeenSetup=!0,(0,qt.default)(document).on("click",".ui-tooltip",function(){(0,qt.default)(this).remove()}))},Nu=function(){typeof android!="undefined"&&android&&android.setLayers&&(0,qt.default)(".leaflet-control-layers").hide(),w.layerChooser.getLayers=function(){let n=[],s=[];this._layers.forEach(function(g,x){let R=w.map.hasLayer(g.layer),T={layerId:x,name:g.name,active:R};g.overlay?s.push(T):n.push(T)});let f=JSON.stringify(s),p=JSON.stringify(n);return typeof android!="undefined"&&android&&android.setLayers&&(this.androidTimer&&clearTimeout(this.androidTimer),this.androidTimer=setTimeout(function(){this.androidTimer=null,android.setLayers(p,f)},1e3)),{baseLayers:n,overlayLayers:s}},w.layerChooser.showLayer=function(n,s){s===void 0&&(s=!0);let f=this._layers[n];if(!f)return!1;if(s){if(!this._map.hasLayer(f.layer)&&(this._map.addLayer(f.layer),!f.overlay)){for(let p in this._layers)if(p!=n){let g=this._layers[p];!g.overlay&&this._map.hasLayer(g.layer)&&this._map.removeLayer(g.layer)}}}else this._map.hasLayer(f.layer)&&this._map.removeLayer(f.layer);return f.overlay||(this._map.setZoom(this._map.getZoom()),this._map.fire("baselayerchange",{layer:f.layer})),!0};let a=w.layerChooser._update;w.layerChooser._update=function(){try{typeof android!="undefined"&&w.layerChooser.getLayers()}catch(n){console.error(n)}return a.apply(this,arguments)};try{typeof android!="undefined"&&w.layerChooser.getLayers()}catch(n){console.error(n)}},zu=function(){let a=new Image;a.src=Mr;let n=new Image;n.src=Mr;let s=new Image;s.src=Mr,Qt.default.Icon.Default.mergeOptions({iconUrl:a,iconRetinaUrl:n,shadowUrl:s}),Qt.default.Icon.Default.imagePath=" ",(0,qt.default)(["<svg>",'<symbol id="marker-icon" viewBox="0 0 25 41">','<path d="M1.36241844765,18.67488124675 A12.5,12.5 0 1,1 23.63758155235,18.67488124675 L12.5,40.5336158073 Z" style="stroke:none;" />','<path d="M1.80792170975,18.44788599685 A12,12 0 1,1 23.19207829025,18.44788599685 L12.5,39.432271175 Z" style="stroke:#000000; stroke-width:1px; stroke-opacity: 0.15; fill: none;" />','<path d="M2.921679865,17.8803978722 A10.75,10.75 0 1,1 22.078320135,17.8803978722 L12.5,36.6789095943 Z" style="stroke:#ffffff; stroke-width:1.5px; stroke-opacity: 0.35; fill: none;" />','<path d="M19.86121593215,17.25 L12.5,21.5 L5.13878406785,17.25 L5.13878406785,8.75 L12.5,4.5 L19.86121593215,8.75 Z M7.7368602792,10.25 L17.2631397208,10.25 L12.5,18.5 Z M12.5,13 L7.7368602792,10.25 M12.5,13 L17.2631397208,10.25 M12.5,13 L12.5,18.5 M19.86121593215,17.25 L16.39711431705,15.25 M5.13878406785,17.25 L8.60288568295,15.25 M12.5,4.5 L12.5,8.5" style="stroke:#ffffff; stroke-width:1.25px; stroke-opacity: 1; fill: none;" />',"</symbol>","</svg>"].join("\\n")).appendTo("body");let f=6367e3;Qt.default.CRS.Earth.R=f;let p=Qt.default.Projection.SphericalMercator;p.S2=Qt.default.Util.extend({},p,{R:f,bounds:function(){let g=f*Math.PI;return Qt.default.bounds([-g,-g],[g,g])}()}),Qt.default.CRS.S2=Qt.default.Util.extend({},Qt.default.CRS.Earth,{code:"Ingress",projection:p.S2,transformation:function(){let g=.5/(Math.PI*p.S2.R);return Qt.default.transformation(g,.5,-g,.5)}()})};function Bu(){let a={lowest:100,low:75,normal:50,high:25,highest:0,boot:-100};function n(p){let g=p&&p.priority||"normal",x=g in a?a[g]:g;return typeof x!="number"&&(x=a.normal),x}!window.script_info.script;function s(p){if(!p)return;let g=p.info;typeof g!="object"&&(g={});try{p.call(this)}catch(x){g.error=x}f.push(g)}window.bootPlugins?window.bootPlugins.sort(function(p,g){return n(p)-n(g)}):window.bootPlugins=[];let f=[];return window.bootPlugins.info=f,function(p){for(;window.bootPlugins[0]&&!(p&&n(window.bootPlugins[0])>a[p]);)s(window.bootPlugins.shift())}}var Nl=function(){rl();let a=Bu();a("boot"),zu(),kl(),bl(),Cu(),Au(),Ps(),xl(),Mu(),Fu(),Vt.setup(),Al(),Pu(),Iu(),la(),w.artifact=new Ka,yo.setup(),$a(),Ou(),w.chat=new Ja,w.portalDetail=new ja,ku(),Su();let n=Pe("pll");if(n){let s=n.split(",");w.urlPortalLL=[parseFloat(s[0])||0,parseFloat(s[1])||0]}w.urlPortal=Pe("pguid"),a(null),Du(),Nu(),ol(),Zt("iitcLoaded")},Fu=function(){w.oms=new Ol.default(w.map,{keepSpiderfied:!0,legWeight:3.5,legColors:{usual:"#FFFF00",highlighted:"#FF0000"}}),w.oms.addListener("click",function(a){w.map.closePopup(),a.fireEvent("spiderfiedclick",{target:a})}),w.oms.addListener("spiderfy",function(a){w.map.closePopup()}),w.map._container.addEventListener("keypress",function(a){a.keyCode===27&&w.oms.unspiderfy()},!1)};var mn=Mt(oe());var zl=class{constructor(n){this.hasNoTopAgents=function(){return this.topAgents.length===0};this.getAvgScore=function(n){return parseInt(this.gameScore[n===Jt?0:1])};this.getAvgScoreMax=function(){return Math.max(this.getAvgScore(Jt),this.getAvgScore(Yt),1)};this.getCPScore=function(n){return this.checkpoints[n]};this.getScoreMax=function(n){let s=n||0;for(let f=1;f<this.checkpoints.length;f++){let p=this.checkpoints[f];s=Math.max(s,p[0],p[1])}return s};this.getCPSum=function(){let n=[0,0];for(let s=1;s<this.checkpoints.length;s++)n[0]+=this.checkpoints[s][0],n[1]+=this.checkpoints[s][1];return n};this.getAvgScoreAtCP=function(n,s){let f=n===Yt?1:0,p=0,g=0,x=Math.min(s,this.checkpoints.length);for(let R=1;R<=x;R++)this.checkpoints[R]!==void 0&&(p+=this.checkpoints[R][f],g++);return g<s&&(p+=this.getScoreMedian(n)*(s-g)),Math.floor(p/s)};this.getScoreMedian=function(n){if(this.median[n]<0){let s=n===Yt?1:0,f=this.checkpoints.map(function(p){return p[s]});f=f.filter(function(p){return p!==void 0}),this.median[n]=this.findMedian(f)}return this.median[n]};this.findMedian=function(n){let s=n.length,f=Math.floor((s-1)/2);if(s===0)return 0;let p=0,g=s-1,x,R,T,E;for(;p<g;){E=n[f],R=p,T=g;do{for(;n[R]<E;)R++;for(;E<n[T];)T--;R<=T&&(x=n[R],n[R]=n[T],n[T]=x,R++,T--)}while(R<=T);T<f&&(p=R),f<R&&(g=T)}return n[f]};this.getLastCP=function(){return this.checkpoints.length===0?0:this.checkpoints.length-1};this.getCycleEnd=function(){return this.getCheckpointEnd(this.CP_COUNT)};this.getCheckpointEnd=function(n){return new Date(this.cycleStartTime.getTime()+this.CP_DURATION*n).getTime()};this.ori_data=n,this.topAgents=n.topAgents,this.regionName=n.regionName,this.gameScore=n.gameScore,this.median=[-1,-1,-1],this.CP_COUNT=35,this.CP_DURATION=5*60*60*1e3,this.CYCLE_DURATION=this.CP_DURATION*this.CP_COUNT,this.checkpoints=[];for(let s=0;s<n.scoreHistory.length;s++){let f=n.scoreHistory[s];this.checkpoints[parseInt(f[0])]=[parseInt(f[1]),parseInt(f[2])]}this.cycleStartTime=new Date(Math.floor(Date.now()/this.CYCLE_DURATION)*this.CYCLE_DURATION)}},is=class{showDialog(){let n=w.map.getCenter(),s=Math.round(n.lat*1e6),f=Math.round(n.lng*1e6);this.showRegion(s,f)}showRegion(n,s){let f="Loading regional scores...";if(ho()){let p="position: absolute; top: 0; width: 100%; max-width: 412px";this.mainDialog=(0,mn.default)("<div>",{style:p}).html(f).appendTo(document.body)}else this.mainDialog=Se({title:"Region scores",html:f,width:450,height:340,closeCallback:this.onDialogClose});Ie("getRegionScoreDetails",{latE6:n,lngE6:s}).then(this.onRequestSuccess).catch(this.onRequestFailure)}onRequestFailure(){this.mainDialog.html("Failed to load region scores - try again")}onRequestSuccess(n){if(n.result===void 0)return this.onRequestFailure();this.regionScore=new zl(n.result),this.updateDialog(),this.startTimer()}updateDialog(n){this.mainDialog.html('<div class="cellscore"><b>Region scores for '+this.regionScore.regionName+'</b><div class="historychart">'+this.createResults()+new Bl(this.regionScore,n).svgImage()+"</div><b>Checkpoint overview</b><div>"+this.createHistoryTable()+"</div><b>Top agents</b><div>"+this.createAgentTable()+"</div></div>"+this.createTimers()),this.setupToolTips();let s=this.createResultTooltip();(0,mn.default)("#overview",this.mainDialog).tooltip({content:Tr(s)}),(0,mn.default)(".cellscore",this.mainDialog).accordion({header:"b",heightStyle:"fill"}),(0,mn.default)("input.logscale",this.mainDialog).change(function(){let f=(0,mn.default)(this);this.updateDialog(f.prop("checked"))})}setupToolTips(){(0,mn.default)("g.checkpoint",this.mainDialog).each(function(n,s){s=(0,mn.default)(s);function f(x,R,T){if(!R[x])return"";let E=ve(R[x]).toString();if(T&&T[x]){let A=R[x]-T[x];E+="	(",A>0&&(E+="+"),E+=ve(A)+")"}return E}let p,g=parseInt(s.attr("data-cp"));if(g){let x=this.regionScore.getCPScore(g),R=this.regionScore.getCPScore(g-1),T=x?`
Enl:	`+f(0,x,R):"",E=x?`
Res:	`+f(1,x,R):"";p="CP:	"+g+"	-	"+this.formatDayHours(this.regionScore.getCheckpointEnd(g))+`
<hr>`+T+E}s.tooltip({content:Tr(p),position:{my:"center bottom",at:"center top-10"},tooltipClass:"checkpointtooltip",show:100})})}onDialogClose(){this.stopTimer()}createHistoryTable(){let n=w.PLAYER.team===hi.RESISTANCE;function s(R,T){return(n?[T,R]:[R,T]).join("")}let f={class:Ei[Jt],name:Wn[Jt]},p={class:Ei[Yt],name:Wn[Yt]},g='<table class="checkpoint_table"><thead><tr><th>CP</th><th>Time</th>'+s("<th>"+f.name+"</th>","<th>"+p.name+"</th>")+"</tr>",x=this.regionScore.getCPSum();g+='<tr class="cp_total"><th></th><th></th>'+s('<th class="'+f.class+'">'+ve(x[0])+"</th>",'<th class="'+p.class+'">'+ve(x[1])+"</th>")+"</tr></thead>";for(let R=this.regionScore.getLastCP();R>0;R--){let T=this.regionScore.getCPScore(R),E=T[0]>T[1]?' class="'+f.class+'"':"",A=T[1]>T[0]?' class="'+p.class+'"':"";g+="<tr><td>"+R+"</td><td>"+this.formatDayHours(this.regionScore.getCheckpointEnd(R))+"</td>"+s("<td"+E+">"+ve(T[0])+"</td>","<td"+A+">"+ve(T[1])+"</td>")+"</tr>"}return g+="</table>",g}createAgentTable(){let n="<table><tr><th>#</th><th>Agent</th></tr>";for(let s=0;s<this.regionScore.topAgents.length;s++){let f=this.regionScore.topAgents[s];n+="<tr><td>"+(s+1)+'</td><td class="nickname '+(f.team==="RESISTANCE"?"res":"enl")+'">'+f.nick+"</td></tr>"}return this.regionScore.hasNoTopAgents()&&(n+='<tr><td colspan="2"><i>no top agents</i></td></tr>'),n+="</table>",n}createResults(){let n=this.regionScore.getAvgScoreMax(),s=w.PLAYER.team===hi.ENLIGHTENED?[Jt,Yt]:[Yt,Jt],f='<table id="overview" title="">';for(let p=0;p<2;p++){let g=s[p],x=Wn[g],R=Ei[g],T=ue[g],E=Math.round(this.regionScore.getAvgScore(g)/n*100);f+='<tr><th class="'+R+'">'+x+'</th><td class="'+R+'">'+ve(this.regionScore.getAvgScore(g))+'</td><td style="width:100%"><div style="background:'+T+"; width: "+E+"%; height: 1.3ex; border: 2px outset "+T+'; margin-top: 2px"> </td><td class="'+R+'"><small>( '+ve(this.regionScore.getAvgScoreAtCP(g,35))+" )</small></td></tr>"}return f+"</table>"}createResultTooltip(){let n=this.regionScore.getAvgScoreAtCP(Yt,this.regionScore.CP_COUNT),s=this.regionScore.getAvgScoreAtCP(Jt,this.regionScore.CP_COUNT),f=n<s?Yt:Jt,p=f===Jt?[Yt,Jt]:[Jt,Yt];function g(E,A){return A===0?"50%":Math.round(E/A*1e4)/100+"%"}function x(){let E=`Current:
`,A=this.regionScore.getAvgScore(Yt)+this.regionScore.getAvgScore(Jt);for(let N=0;N<2;N++){let H=p[N],Z=this.regionScore.getAvgScore(H);E+=Wn[H]+"	"+ve(Z)+"	"+g(Z,A)+`
`}return E}function R(){let E=`<hr>Estimated:
`,A=n+s;for(let N=0;N<2;N++){let H=p[N],Z=this.regionScore.getAvgScoreAtCP(H,this.regionScore.CP_COUNT);E+=Wn[H]+"	"+ve(Z)+"	"+g(Z,A)+`
`}return E}function T(){let E="",A=Math.abs(n-s)*this.regionScore.CP_COUNT+1;return E+=`<hr>
`,E+=Wn[f]+" requires:	"+ve(Math.ceil(A))+` 
`,E+="Checkpoint(s) left:	"+(this.regionScore.CP_COUNT-this.regionScore.getLastCP())+` 
`,E}return x()+R()+T()}createTimers(){let n=this.regionScore.getCheckpointEnd(this.regionScore.getLastCP()+1),s=this.regionScore.getCycleEnd();return'<div class="checkpoint_timers"><table><tr><td>Next CP at: '+this.formatHours(n)+' (in <span id="cycletimer"></span>)</td><td>Cycle ends: '+this.formatDayHours(s)+"</td></tr></table></div>"}startTimer(){this.stopTimer(),this.timer=window.setInterval(this.onTimer,1e3),this.onTimer()}stopTimer(){this.timer&&(window.clearInterval(this.timer),this.timer=void 0)}onTimer(){let n=this.regionScore.getCheckpointEnd(+this.regionScore.getLastCP()+1)-new Date().getTime()}formatMinutes(n){let s=Math.floor(n/3600),f=Math.floor(n%3600/60);n=n%60;let p="";return p+=s+":",f<10&&(p+="0"),p+=f,p+=":",n<10&&(p+="0"),p+=n,p}formatHours(n){return("0"+n.getHours()).slice(-2)+":00"}formatDayHours(n){return("0"+n.getDate()).slice(-2)+"."+("0"+(n.getMonth()+1)).slice(-2)+" "+("0"+n.getHours()).slice(-2)+":00"}setup(){ho()?(android.addPane("regionScoreboard","Region scores","ic_action_view_as_list"),yi("paneChanged",function(n){n==="regionScoreboard"?this.showDialog():this.mainDialog&&this.mainDialog.remove()})):(0,mn.default)("<a>").html("Region scores").attr("title","View regional scoreboard").click(this.showDialog).appendTo("#toolbox")}},Bl=class{constructor(n,s){this.regionScore=n;let f=this.regionScore.getScoreMax(10);f*=1.09,this.setScaleType(f,s),this.svgTickText=[],this.svg='<div><svg width="400" height="133" style="margin-left: 10px;">'+this.svgBackground()+this.svgAxis(f)+this.svgAveragePath()+this.svgFactionPath()+this.svgCheckPointMarkers()+this.svgTickText.join("")+'<foreignObject height="18" width="60" y="113" x="0" class="node"><label title="Logarithmic scale"><input type="checkbox" class="logscale"'+(s?" checked":"")+"/>log</label></foreignObject></svg></div>"}svgImage(){return this.svg}svgFactionPath(){let n="";for(let s=0;s<2;s++){let f=this.getFactionColor(s),p=[];for(let g=1;g<=this.regionScore.getLastCP();g++){let x=this.regionScore.getCPScore(g);if(x!==void 0){let R=g*10+40;p.push(R+","+this.scaleFct(x[s]))}}p.length>0&&(n+='<polyline points="'+p.join(" ")+'" stroke="'+f+'" fill="none" />')}return n}svgCheckPointMarkers(){let n="",s=this.getFactionColor(0),f=this.getFactionColor(1);for(let p=1;p<=this.regionScore.CP_COUNT;p++){let g=this.regionScore.getCPScore(p);n+='<g title="dummy" class="checkpoint" data-cp="'+p+'"><rect x="'+(p*10+35)+'" y="10" width="10" height="100" fill="black" fill-opacity="0" />',g&&(n+='<circle cx="'+(p*10+40)+'" cy="'+this.scaleFct(g[0])+'" r="3" stroke-width="1" stroke="'+s+'" fill="'+s+'" fill-opacity="0.5" /><circle cx="'+(p*10+40)+'" cy="'+this.scaleFct(g[1])+'" r="3" stroke-width="1" stroke="'+f+'" fill="'+f+'" fill-opacity="0.5" />'),n+="</g>"}return n}svgBackground(){return'<rect x="0" y="1" width="400" height="132" stroke="#FFCE00" fill="#08304E" />'}svgAxis(n){return'<path d="M40,110 L40,10 M40,110 L390,110" stroke="#fff" />'+this.createTicks(n)}createTicks(n){let s=this.createTicksHorz();function f(g){let x=this.scaleFct(g);s.push("M40,"+x+" L390,"+x),this.svgTickText.push('<text x="35" y="'+x+'" font-size="12" font-family="Roboto, Helvetica, sans-serif" text-anchor="end" fill="#fff">'+this.formatNumber(g)+"</text>")}let p=Math.pow(10,Math.floor(Math.log10(n)));if(this.logscale)for(let g=0;g<4;g++)f(p),p/=10;else{p<n/5?p*=2:p>n/2&&(p/=2);for(let g=p;g<=n;g+=p)f(g)}return'<path d="'+s.join(" ")+'" stroke="#fff" opacity="0.3" />'}createTicksHorz(){let n=[];for(let s=5;s<=35;s+=5){let f=s*10+40;n.push("M"+f+",10 L"+f+",110"),this.svgTickText.push('<text x="'+f+'" y="125" font-size="12" font-family="Roboto, Helvetica, sans-serif" text-anchor="middle" fill="#fff">'+s+"</text>")}return n}svgAveragePath(){let n="";for(let s=1;s<3;s++){let f=ue[s],p=[];for(let g=1;g<=this.regionScore.CP_COUNT;g++){let x=this.regionScore.getAvgScoreAtCP(s,g),R=g*10+40,T=this.scaleFct(x);p.push(R+","+T)}n+='<polyline points="'+p.join(" ")+'" stroke="'+f+'" stroke-dasharray="3,2" opacity="0.8" fill="none"/>'}return n}setScaleType(n,s){this.logscale=s,s?(Math.log10||(Math.log10=function(f){return Math.log(f)/Math.LN10}),this.scaleFct=function(f){return Math.round(10-Math.log10(Math.max(.001,f/n))/3*100)}):this.scaleFct=function(f){return Math.round(110-f/n*100)}}getFactionColor(n){return n===0?ue[Jt]:ue[Yt]}formatNumber(n){return n>=1e9?n/1e9+"B":n>=1e6?n/1e6+"M":n>=1e3?n/1e3+"k":n}};if(document.documentElement.getAttribute("itemscope")!==null)throw new Error("Ingress Intel Website is down, not a userscript issue.");window.iitcBuildDate="2021-07-16-195801";window.onload=function(){};document.body.onload=function(){};if(!window.PLAYER||!PLAYER.nickname)throw document.getElementById("header_email")?new Error("Logged in but page doesn't have player data"):(ua=document.createElement("style"),ua.type="text/css",ua.appendChild(document.createTextNode("    html, body {        background: #0b303e;    }        #dashboard_container {        display: flex;        flex-direction: column;        min-width: 245px;        min-height: 365px;    }        .button {        margin: 5px 10%;        padding: 0;    }        #dashboard_container a {        display: block;        padding: 10px 15px;    }    ")),document.head.appendChild(ua),new Error("Couldn't retrieve player data. Are you logged in?"));var ua;w.PLAYER=new uo(window.PLAYER);document.head.innerHTML=`<title>Ingress Intel Map</title><style>    /* general rules ******************************************************/        /* for printing directly from the browser, hide all UI components     * NOTE: @media needs to be first?     */    @media print {      .leaflet-control-container { display: none !important; }      #chatcontrols, #chat, #chatinput { display: none !important; }      #sidebartoggle, #sidebar { display: block !important; }      #updatestatus { display: none !important; }      #portal_highlight_select { display: none !important; }    }        .text-overflow-ellipsis {      display: inline-block;      overflow: hidden;      white-space: nowrap;      text-overflow: ellipsis;      vertical-align: text-bottom;      width: 100%;    }            html, body {      height: 100%;      width: 100%;      overflow: hidden; /* workaround for #373 */      background: #0e3d4e;    }        #map {      overflow: visible;      height: 100%;      width: 100%;    }            body {      font-size: 14px;      font-family: Roboto, "Helvetica Neue", Helvetica, sans-serif;      margin: 0;    }        /* Material Icons */    .material-icons {      width: 24px;      height: 24px;    }        .icon-button {      cursor: pointer;    }        i.tiny { font-size: 1rem; }    i.small { font-size: 2rem; }    i.medium { font-size: 4rem; }    i.large { font-size: 6rem; }        #scrollwrapper {      overflow-x: hidden;      overflow-y: auto;      position: fixed;      right: -38px;      top: 0;      width: 340px;      bottom: 45px;      z-index: 3001;      pointer-events: none;    }        #sidebar {      display: block;      background-color: rgba(8, 48, 78, 0.9);      border-left: 1px solid #20A8B1;      color: #888;      position: relative;      left: 0;      top: 0;      max-height: 100%;      overflow-y:scroll;      overflow-x:hidden;      pointer-events: auto;    }        #sidebartoggle {      display: block;      padding: 20px 5px;      margin-top: -31px; /* -(toggle height / 2) */      line-height: 10px;      position: absolute;      top: 108px;      z-index: 3002;      background-color: rgba(8, 48, 78, 0.9);      color: #FFCE00;      border: 1px solid #20A8B1;      border-right: none;      border-radius: 5px 0 0 5px;      text-decoration: none;      right: -50px; /* overwritten later by the script with SIDEBAR_WIDTH */    }        .enl {      color: #03fe03 !important;    }        .res {      color: #00c5ff !important;    }        .none {      color: #fff;    }        .nickname {      cursor: pointer !important;    }        a {      color: #ffce00;      cursor: pointer;      text-decoration: none;    }        a:hover {      text-decoration: underline;    }        .leaflet-control-layers-overlays label.disabled {      text-decoration: line-through;      cursor: help;    }        /* base layer selection - first column */    .leaflet-control-layers-base {      float: left;      overflow-y: auto;      max-height: 600px;    }        /* overlays layer selection - 2nd column */    .leaflet-control-layers-overlays {      float: left;      margin-left: 8px;      border-left: 1px solid #DDDDDD;      padding-left: 8px;      overflow-y: auto;      max-height: 600px;    }        /* hide the usual separator */    .leaflet-control-layers-separator {      display: none;    }            /* shift controls when chat is expanded */    .leaflet-left .leaflet-control.chat-expand {      margin-left: 720px;    }        .help {      cursor: help;    }        .toggle {      display: block;      height: 0;      width: 0;    }        /* field mu count */    .fieldmu {      color: #FFCE00;      font-size: 13px;      font-family: Roboto, "Helvetica Neue", Helvetica, sans-serif; /*override leaflet-container */      text-align: center;      text-shadow: 0 0 0.2em black, 0 0 0.2em black, 0 0 0.2em black;      pointer-events: none;    }            /* chat ***************************************************************/        #chatcontrols {      color: #FFCE00;      background: rgba(8, 48, 78, 0.9);      position: absolute;      left: 0;      z-index: 3000;      height: 26px;      padding-left:1px;    }        #chatcontrols.expand {      top: 0;      bottom: auto;    }        #chatcontrols a {      margin-left: -1px;      display: inline-block;      width: 94px;      text-align: center;      height: 24px;      line-height: 24px;      border: 1px solid #20A8B1;      vertical-align: top;    }        #chatcontrols a:first-child {      letter-spacing:-1px;      text-decoration: none !important;    }        #chatcontrols a.active {      border-color: #FFCE00;      border-bottom-width:0px;      font-weight:bold;      background: rgb(8, 48, 78);    }        #chatcontrols a.active + a {      border-left-color: #FFCE00    }            #chatcontrols .toggle {      border-left: 10px solid transparent;      border-right: 10px solid transparent;      border-bottom: 10px solid #FFCE00;      margin: 6px auto auto;    }        #chatcontrols.expand .toggle {      border-top: 10px solid #FFCE00;      border-bottom: none;    }        #chatcontrols .loading {      background-color: rgba(255,0,0,0.3);      -webkit-animation: chatloading 1.2s infinite linear;      -moz-animation: chatloading 1.2s infinite linear;      animation: chatloading 1.2s infinite linear;    }        @-webkit-keyframes chatloading {        0% { background-color: rgba(255,0,0,0.4) }       50% { background-color: rgba(255,0,0,0.1) }      100% { background-color: rgba(255,0,0,0.4) }    }        @-moz-keyframes chatloading {        0% { background-color: rgba(255,0,0,0.4) }       50% { background-color: rgba(255,0,0,0.1) }      100% { background-color: rgba(255,0,0,0.4) }    }        @keyframes chatloading {        0% { background-color: rgba(255,0,0,0.4) }       50% { background-color: rgba(255,0,0,0.1) }      100% { background-color: rgba(255,0,0,0.4) }    }                #chat {      position: absolute;      width: 708px;      bottom: 23px;      left: 0;      z-index: 3000;      background: rgba(8, 48, 78, 0.9);      line-height: 15px;      color: #eee;      border: 1px solid #20A8B1;      border-bottom: 0;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;    }        em {      color: red;      font-style: normal;    }        #chat.expand {      height:auto;      top: 25px;    }            #chat > div {      overflow-x:hidden;      overflow-y:scroll;      height: 100%;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;      padding: 2px;      position:relative;    }        #chat table, #chatinput table {      width: 100%;      table-layout: fixed;      border-spacing: 0;      border-collapse: collapse;    }        #chatinput table {      height: 100%;    }        #chat td, #chatinput td {      font-size: 13px;      vertical-align: top;      padding-bottom: 3px;    }        /* time */    #chat td:first-child, #chatinput td:first-child {      width: 44px;      overflow: hidden;      padding-left: 2px;      color: #bbb;      white-space: nowrap;    }        #chat time {      cursor: help;    }        /* nick */    #chat td:nth-child(2), #chatinput td:nth-child(2) {      width: 91px;      overflow: hidden;      padding-left: 2px;      white-space: nowrap;    }        #chat td .system_narrowcast {      color: #f66 !important;    }        mark {      background: transparent;    }        .invisep {      display: inline-block;      width: 1px;      height: 1px;      overflow:hidden;      color: transparent;    }        /* divider */    summary {      color: #bbb;      display: inline-block;      height: 16px;      overflow: hidden;      padding: 0 2px;      white-space: nowrap;      width: 100%;    }        #chatinput {      position: absolute;      bottom: 0;      left: 0;      padding: 0 2px;      background: rgba(8, 48, 78, 0.9);      width: 708px;      height: 23px;      border: 1px solid #20A8B1;      z-index: 3001;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;    }        #chatinput td {      padding-bottom: 1px;      vertical-align: middle;    }            #chatinput input {      background: transparent;      color: #EEEEEE;      width: 100%;      height: 100%;      padding:3px 4px 1px 4px;    }                /* sidebar ************************************************************/        #sidebar > * {      border-bottom: 1px solid #20A8B1;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;    }                #sidebartoggle .toggle {      border-bottom: 10px solid transparent;      border-top: 10px solid transparent;    }        #sidebartoggle .open {      border-right: 10px solid #FFCE00;    }        #sidebartoggle .close {      border-left: 10px solid #FFCE00;    }        /* player stats */    #playerstat {      height: 30px;    }        h2 {      color: #ffce00;      font-size: 21px;      padding: 0 4px;      margin: 0;      cursor:help;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;      width: 100%;    }        h2 #name {      font-weight: 300;      display: inline-block;      overflow: hidden;      text-overflow: ellipsis;      vertical-align: top;      white-space: nowrap;      width: 205px;      position: relative;    }        h2 #stats {      float: right;      height: 100%;      overflow: hidden;    }        #signout {      font-size: 12px;      font-weight: normal;      line-height: 29px;      padding: 0 4px;      position: absolute;      top: 0;      right: 0;      background-color: rgba(8, 48, 78, 0.5);      display: none; /* starts hidden */    }    #name:hover #signout {      display: block;    }        h2 sup, h2 sub {      display: block;      font-size: 11px;      margin-bottom: -2px;    }            /* gamestats */    #gamestat {      height: 22px;    }        #gamestat span {      display: block;      float: left;      font-weight: bold;      cursor:help;      height: 21px;      line-height: 22px;    }        #gamestat .res {      background: #005684;      text-align: right;    }        #gamestat .enl {      background: #017f01;    }            /* search input, and others */    input:not([type]), .input,    input[type="text"], input[type="password"],    input[type="number"], input[type="email"],    input[type="search"], input[type="url"] {      background-color: rgba(0, 0, 0, 0.3);      color: #ffce00;      height: 24px;      padding:0px 4px 0px 4px;      font-size: 12px;      border:0;      font-family:inherit;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;    }        #searchwrapper {      position: relative;    }    #search {      width: 100%;      padding-right: 24px;    }    #buttongeolocation {      position: absolute;      right: 0;      top: 0;      margin: 0;      border: 0 none transparent;      padding: 0 2px 0 0;      height: 24px;      background-color: transparent;    }    #buttongeolocation:focus {      outline: 1px dotted #ffce00;    }    #buttongeolocation img {      display: block;    }    #searchwrapper h3 {      font-size: 1em;      height: auto;      cursor: pointer;    }    .searchquery {      max-height: 25em;      overflow-y: auto;    }    #searchwrapper .ui-accordion-header::before {      font-size: 18px;      margin-right: 2px;      font-weight: normal;      line-height: 1em;      content: "\u229E";    }    #searchwrapper .ui-accordion-header-active::before {      content: "\u229F";    }    #searchwrapper .ui-accordion-content {      margin: 0;      overflow: hidden;    }    #searchwrapper ul {      padding-left: 14px;    }    #searchwrapper li {      cursor: pointer;    }    #searchwrapper li a {      margin-left: -14px;      padding-left: 14px;      background-position: 1px center;      background-repeat: no-repeat;      background-size: 12px 12px;    }    #searchwrapper li:focus a, #searchwrapper li:hover a {      text-decoration: underline;    }    #searchwrapper li em {      color: #ccc;      font-size: 0.9em;    }        ::-webkit-input-placeholder {      font-style: italic;    }        :-moz-placeholder {      font-style: italic;    }        ::-moz-placeholder {      font-style: italic;    }        .leaflet-control-layers input {      height: auto;      padding: 0;    }            /* portal title and image */    h3.title {      padding-right: 17px; /* to not overlap with close button */      margin: 2px 0;      line-height: 24px;      overflow: hidden;      text-overflow: ellipsis;      white-space: nowrap;    }        .imgpreview {      height: 190px;      background: no-repeat center center;      background-size: contain;      cursor: help;      overflow: hidden;      position: relative;    }        .imgpreview img.hide {      display: none;    }        .imgpreview .portalDetails {      display: none;    }        #level {      font-size: 40px;      text-shadow: -1px -1px #000, 1px -1px #000, -1px 1px #000, 1px 1px #000, 0 0 5px #fff;      display: block;      margin-right: 15px;      text-align:right;      float: right;    }        /* portal mods */    .mods {      margin: 3px auto 1px auto;      width: 296px;      height: 67px;      text-align: center;    }        .mods span {      background-color: rgba(0, 0, 0, 0.3);      /* can\u2019t use inline-block because Webkit's implementation is buggy and       * introduces additional margins in random cases. No clear necessary,       * as that\u2019s solved by setting height on .mods. */      display: block;      float:left;      height: 63px;      margin: 0 2px;      overflow: hidden;      padding: 2px;      text-align: center;      width: 63px;      cursor:help;      border: 1px solid #666;    }        .mods span:not([title]) {      cursor: auto;    }        .res .mods span, .res .meter {      border: 1px solid #0076b6;    }    .enl .mods span, .enl .meter {      border: 1px solid #017f01;    }        /* random details, resonator details */    #randdetails, #resodetails {      width: 100%;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;      padding: 0 4px;      table-layout: fixed;      border-spacing: 0m;      border-collapse: collapse;    }        #randdetails td, #resodetails td {      overflow: hidden;      text-overflow: ellipsis;      vertical-align: top;      white-space: nowrap;      width: 50%;    }        #randdetails th, #resodetails th {      font-weight: normal;      text-align: right;      width: 62px;      padding:0px;      padding-right:4px;      padding-left:4px;    }        #randdetails th + th, #resodetails th + th {      text-align: left;      padding-right: 4px;      padding-left: 4px;    }        #randdetails td:first-child, #resodetails td:first-child {      text-align: right;      padding-left: 2px;    }        #randdetails td:last-child, #resodetails td:last-child {      text-align: left;      padding-right: 2px;    }            #randdetails {      margin-top: 4px;      margin-bottom: 5px;    }            #randdetails tt {      font-family: inherit;      cursor: help;    }        #artifact_target, #artifact_fragments {      margin-top: 4px;      margin-bottom: 4px;          margin-left: 8px;      margin-right: 8px;    }            /* resonators */    #resodetails {      margin-bottom: 0px;    }        .meter {      background: #000;      cursor: help;      display: inline-block;      height: 18px;      padding: 1px;      width: 100%;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;      position: relative;      left: 0;      top: 0;    }        .meter.north {      overflow: hidden;    }    .meter.north:before {      content: "";      background-color: red;      border: 1px solid #000000;      border-radius: 100%;      display: block;      height: 6px;      width: 6px;      left: 50%;      top: -3px;      margin-left: -4px;      position: absolute;    }        .meter span {      display: block;      height: 14px;    }        .meter-level {      position: absolute;      left: 0;      right: 0;      top: -2px;      text-shadow: 0.0em 0.0em 0.3em #808080;      text-align: center;      word-spacing: 4px; /* to leave some space for the north indicator */    }        /* links below resos */        .linkdetails {      margin-bottom: 0px;      text-align: center;    }        .linkdetails aside {      display: inline-block;      white-space: nowrap;      margin-left: 5px;      margin-right: 5px;    }        #toolbox {      text-align: left;    /* centre didn't look as nice here as it did above in .linkdetails */    }        #toolbox > a {      margin-left: 5px;      margin-right: 5px;      white-space: nowrap;      display: inline-block;    }        /* a common portal display takes this much space (prevents moving     * content when first selecting a portal) */        #portaldetails {      min-height: 63px;      position: relative; /* so the below '#portaldetails .close' is relative to this */    }        #portaldetails .close {      position: absolute;      top: -2px;      right: 2px;      cursor: pointer;      color: #FFCE00;      font-size: 16px;    }        /* history details */    #historydetails {      text-align: center;      color: #ffce00;    }        #historydetails .missing {    }        #historydetails span {      color: #ff4a4a;    }        #historydetails span.completed {      color: #03fe03;    }        /* update status */    #updatestatus {      background-color: rgba(8, 48, 78, 0.9);      border-bottom: 0;      border-top: 1px solid #20A8B1;      border-left: 1px solid #20A8B1;      bottom: 0;      color: #ffce00;      font-size:13px;      padding: 4px;      position: fixed;      right: 0;      z-index: 3002;      -webkit-box-sizing: border-box;      -moz-box-sizing: border-box;      box-sizing: border-box;    }        #updatestatus .map {      margin-left: 8px;    }        #loadlevel {      background: #FFF;      color: #000000;      display: inline-block;      min-width: 1.8em;      border: 1px solid #20A8B1;      border-width: 0 1px;      margin: -4px 0;      padding: 4px 0.2em;    }        /* Dialogs     */    .ui-tooltip, .ui-dialog {      position: absolute;      z-index: 9500;      background-color: rgba(8, 48, 78, 0.9);      border: 1px solid #20A8B1;      color: #eee;      font-size: 13px;      line-height: 15px;      padding: 2px 4px;    }        .ui-tooltip {      max-width: 300px;    }        .ui-widget-overlay {      height: 100%;      left: 0;      position: fixed;      top: 0;      width: 100%;      z-index: 10000;      background:  #444;      opacity: 0.6;    }        .ui-modal {      z-index: 10001 !important;    }        .ui-tooltip {      z-index: 10002 !important;    }        .ui-tooltip, .ui-dialog a {      color: #FFCE00;    }        .ui-dialog {      padding: 0;      border-radius: 2px;    }        .ui-dialog-modal .ui-dialog-titlebar-close {      display: none;    }        .ui-dialog-titlebar {      font-size: 13px;      line-height: 15px;      text-align: center;      padding: 4px;      background-color: rgba(8, 60, 78, 0.9);    }        .ui-dialog-title {      font-weight: bold;      margin-left: 8px;      margin-right: 45px;      width: calc(100% - 45px);    }        .ui-dialog-title-active {      color: #ffce00;    }        .ui-dialog-title-inactive {      color: #ffffff;    }        .ui-dialog-titlebar-button {      position: absolute;      display: table-cell;      vertical-align: middle;      text-align: center;      width: 17px;      height: 17px;      top: 3px;      cursor: pointer;      border: 1px solid rgb(32, 168, 177);      background-color: rgba(0, 0, 0, 0);      padding: 0;    }        .ui-dialog-titlebar-button:active {      background-color: rgb(32, 168, 177);    }        .ui-dialog-titlebar-button-close {      right: 4px;    }        .ui-dialog-titlebar-button-collapse {      right: 25px;    }        .ui-dialog-titlebar-button-collapse-expanded {      /* For future changes */    }        .ui-dialog-titlebar-button-collapse-collapsed {      background-color: rgb(32, 168, 177);    }        .ui-dialog-titlebar-button-collapse::after,    .ui-dialog-titlebar-button-close::after,    .ui-dialog-titlebar-button-close::before {      content: "";      position: absolute;      top: 3px;      left: 50%;      width: 11px;      margin-left: -6px;      height: 0;      border-top: 2px solid rgb(32, 168, 177);    }    .ui-dialog-titlebar-button-close::after {      transform: translateY(3.5px) rotate(45deg);      -webkit-transform: translateY(3.5px) rotate(45deg);    }    .ui-dialog-titlebar-button-close::before {      transform: translateY(3.5px) rotate(-45deg);      -webkit-transform: translateY(3.5px) rotate(-45deg);    }    .ui-dialog-titlebar-button.ui-state-active::after,    .ui-dialog-titlebar-button.ui-state-active::before,    .ui-dialog-titlebar-button.ui-dialog-titlebar-button-collapse-collapsed::after,    .ui-dialog-titlebar-button.ui-dialog-titlebar-button-collapse-collapsed::before,    .ui-dialog-titlebar-button:active::after,    .ui-dialog-titlebar-button:active::before {      border-top-color: rgba(8, 60, 78, 0.9);    }        .ui-dialog-content {      padding: 12px;      overflow: auto;      position: relative;          /* Limiting the height of dialog content on small screens */      /* 57px \u2013 height .ui-dialog-titlebar + .ui-dialog-buttonpane */      /* 24px \u2013 padding 12px * 2 */      /*  2px \u2013 border 1px * 2 */      max-height: calc(100vh - 57px - 24px - 2px) !important;    }        .ui-dialog {      max-width: calc(100vw - 2px);    }        @media (min-width: 700px) {      .ui-dialog {        max-width: 600px;      }    }        .ui-dialog-content-hidden {      display: none !important;    }        .ui-dialog-buttonpane {      padding: 6px;      border-top: 1px solid #20A8B1;    }        .ui-dialog-buttonset {      text-align: right;    }        .ui-dialog-buttonset button,    .ui-dialog-content button {      padding: 2px;      min-width: 40px;      color: #FFCE00;      border: 1px solid #FFCE00;      background-color: rgba(8, 48, 78, 0.9);    }        .ui-dialog-buttonset button:hover {      text-decoration: underline;    }        td {      padding: 0;      vertical-align: top;    }        td + td {      padding-left: 4px;    }        #qrcode > canvas {      border: 8px solid white;    }        /* redeem results *****************************************************/    .redeemReward {      font-family: Inconsolata, Consolas, Menlo, "Courier New", monospace;      list-style-type: none;      padding: 0;      font-size: 14px;    }    .redeemReward .itemlevel {      font-weight: bold;      text-shadow: 0 0 1px #000; /* L8 is hard to read on blue background */    }    /*    .redeem-result-table {      font-size: 14px;      table-layout: fixed;    }        .redeem-result tr > td:first-child {      width: 50px;      text-align: right;    }        .redeem-result-html {      font-family: Inconsolata, Consolas, Menlo, "Courier New", monospace;    }    */        .pl_nudge_date {      background-color: #724510;      border-left: 1px solid #ffd652;      border-bottom: 1px solid #ffd652;      border-top: 1px solid #ffd652;      color: #ffd652;      display: inline-block;      float: left;      height: 18px;      text-align: center;    }        .pl_nudge_pointy_spacer {      background: no-repeat url(//commondatastorage.googleapis.com/ingress.com/img/nudge_pointy.png);      display: inline-block;      float: left;      height: 20px;      left: 47px;      width: 5px;    }        .pl_nudge_player {      cursor: pointer;    }        .pl_nudge_me {      color: #ffd652;    }        .RESISTANCE {      color: #00c2ff;    }        .ALIENS, .ENLIGHTENED {      color: #28f428;    }        #portal_highlight_select {      position: absolute;      top:5px;      left:10px;      z-index: 2500;      font-size:11px;      background-color:#0E3C46;      color:#ffce00;        }                .portal_details th, .portal_details td {      vertical-align: top;      text-align: left;    }        .portal_details th {      white-space: nowrap;      padding-right: 1em;    }        .portal_details tr.padding-top th, .portal_details tr.padding-top td {      padding-top: 0.7em;    }        #play_button {      display: none;    }            /** artifact dialog *****************/    table.artifact tr > * {      background: rgba(8, 48, 78, 0.9);    }        table.artifact td.info {      min-width: 110px; /* min-width for info column, to ensure really long portal names don't crowd things out */    }        table.artifact .portal {      min-width: 200px; /* min-width for portal names, to ensure really long lists of artifacts don't crowd names out */    }            /* leaflet popups - restyle to match the theme of IITC */    #map .leaflet-popup {      pointer-events: none;    }        #map .leaflet-popup-content-wrapper {      border-radius: 0px;      -webkit-border-radius: 0px;      border: 1px solid #20A8B1;      background: #0e3d4e;      pointer-events: auto;    }        #map .leaflet-popup-content {      color: #ffce00;      margin: 5px 8px;    }        #map .leaflet-popup-close-button {      padding: 2px 1px 0 0;      font-size: 12px;      line-height: 8px;      width: 10px;      height: 10px;      pointer-events: auto;    }            #map .leaflet-popup-tip {      /* change the tip from an arrow to a simple line */      background: #20A8B1;      width: 1px;      height: 20px;      padding: 0;      margin: 0 0 0 20px;      -webkit-transform: none;      -moz-transform: none;      -ms-transform: none;      -o-transform: none;      transform: none;    }            /* misc */    .layer_off_warning {      color: #FFCE00;      margin: 8px;      text-align: center;    }        /* region scores */    .cellscore .ui-accordion-header, .cellscore .ui-accordion-content {        border: 1px solid #20a8b1;        margin-top: -1px;        display: block;    }    .cellscore .ui-accordion-header {        color: #ffce00;        outline: none    }    .cellscore .ui-accordion-header:before {        font-size: 18px;        margin-right: 2px;        content: "\u229E";    }    .cellscore .ui-accordion-header-active:before {        content: "\u229F";    }    .cellscore table {        width: 90%;        max-width: 360px; /* prevent width change on scrollbar appearance (after animation) */    }        /* prevent nonfunctional horizontal scrollbar in Chrome (perhaps jQuery issue) */    .cellscore .historychart > div {      overflow: auto;    }        .cellscore .logscale {      vertical-align: middle;      margin-top: 0;    }        @-moz-document url-prefix() {     .cellscore .logscale {        transform: scale(0.8);      }          /* prevent nonfunctional vertical scrollbar in Firefox (perhaps jQuery issue) */      .cellscore > .historychart {        overflow-y: hidden !important;      }    }        g.checkpoint:hover circle {      fill-opacity: 1;      stroke-width: 2px;    }        .cellscore th, .cellscore td {        text-align: left;        padding-left: 5px;    }    .checkpoint_table {        border-collapse: collapse;    }    .checkpoint_table th, .checkpoint_table td {        text-align: right;    }        .cellscore #overview {      width: 100%;    }        .cellscore #overview td {      white-space: nowrap;      width: 1%;      text-align: right;    }        .cellscore #overview th {      white-space: nowrap;      width: 1%;      text-align: left;      padding-left: 4px;    }        .checkpointtooltip {      min-width: 180px;    }        .checkpoint_timers table {      padding-top: 4px;      width: 100%;    }        /* tabs */    .ui-tabs-nav {        display: block;        border-bottom: 1px solid #20a8b1;        border-top: 1px solid transparent;        margin: 3px 0 0;        padding: 0;    }    .ui-tabs-nav::after {        content: '';        clear: left;        display: block;        height: 0;        width: 0;    }    .ui-tabs-nav li {        list-style: none;        display: block;        float:left;        margin: 0 0 -1px;        border: 1px solid #20a8b1;    }    .ui-tabs-nav li.ui-tabs-active {        border-bottom-color: #0F2C3F;        background: #0F2C3F;        border-width: 2px 2px 1px;        font-weight: bold;        margin: -1px 1px;    }    .ui-tabs-nav a {        display: inline-block;        padding: 0.2em 0.7em;    }    .ui-tabs-nav .ui-icon {        display: inline-block;        font-size: 0;        height: 22px;        overflow: hidden;        position: relative;        vertical-align: top;        width: 16px;    }    .ui-tabs-nav .ui-icon-close::before {        content: "\xD7";        font-size: 16px;        height: 16px;        position: absolute;        text-align: center;        top: 2px;        vertical-align: baseline;        width: 16px;        cursor: pointer;    }        svg.icon-button {        fill: currentColor;    }        .leaflet-marker-icon > svg {        height: inherit;        width: inherit;    }    </style><style>    /* required styles */        .leaflet-pane,    .leaflet-tile,    .leaflet-marker-icon,    .leaflet-marker-shadow,    .leaflet-tile-container,    .leaflet-pane > svg,    .leaflet-pane > canvas,    .leaflet-zoom-box,    .leaflet-image-layer,    .leaflet-layer {        position: absolute;        left: 0;        top: 0;        }    .leaflet-container {        overflow: hidden;        }    .leaflet-tile,    .leaflet-marker-icon,    .leaflet-marker-shadow {        -webkit-user-select: none;           -moz-user-select: none;                user-select: none;          -webkit-user-drag: none;        }    /* Prevents IE11 from highlighting tiles in blue */    .leaflet-tile::selection {        background: transparent;    }    /* Safari renders non-retina tile on retina better with this, but Chrome is worse */    .leaflet-safari .leaflet-tile {        image-rendering: -webkit-optimize-contrast;        }    /* hack that prevents hw layers "stretching" when loading new tiles */    .leaflet-safari .leaflet-tile-container {        width: 1600px;        height: 1600px;        -webkit-transform-origin: 0 0;        }    .leaflet-marker-icon,    .leaflet-marker-shadow {        display: block;        }    /* .leaflet-container svg: reset svg max-width decleration shipped in Joomla! (joomla.org) 3.x */    /* .leaflet-container img: map is broken in FF if you have max-width: 100% on tiles */    .leaflet-container .leaflet-overlay-pane svg,    .leaflet-container .leaflet-marker-pane img,    .leaflet-container .leaflet-shadow-pane img,    .leaflet-container .leaflet-tile-pane img,    .leaflet-container img.leaflet-image-layer,    .leaflet-container .leaflet-tile {        max-width: none !important;        max-height: none !important;        }        .leaflet-container.leaflet-touch-zoom {        -ms-touch-action: pan-x pan-y;        touch-action: pan-x pan-y;        }    .leaflet-container.leaflet-touch-drag {        -ms-touch-action: pinch-zoom;        /* Fallback for FF which doesn't support pinch-zoom */        touch-action: none;        touch-action: pinch-zoom;    }    .leaflet-container.leaflet-touch-drag.leaflet-touch-zoom {        -ms-touch-action: none;        touch-action: none;    }    .leaflet-container {        -webkit-tap-highlight-color: transparent;    }    .leaflet-container a {        -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);    }    .leaflet-tile {        filter: inherit;        visibility: hidden;        }    .leaflet-tile-loaded {        visibility: inherit;        }    .leaflet-zoom-box {        width: 0;        height: 0;        -moz-box-sizing: border-box;             box-sizing: border-box;        z-index: 800;        }    /* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */    .leaflet-overlay-pane svg {        -moz-user-select: none;        }        .leaflet-pane         { z-index: 400; }        .leaflet-tile-pane    { z-index: 200; }    .leaflet-overlay-pane { z-index: 400; }    .leaflet-shadow-pane  { z-index: 500; }    .leaflet-marker-pane  { z-index: 600; }    .leaflet-tooltip-pane   { z-index: 650; }    .leaflet-popup-pane   { z-index: 700; }        .leaflet-map-pane canvas { z-index: 100; }    .leaflet-map-pane svg    { z-index: 200; }        .leaflet-vml-shape {        width: 1px;        height: 1px;        }    .lvml {        behavior: url(#default#VML);        display: inline-block;        position: absolute;        }            /* control positioning */        .leaflet-control {        position: relative;        z-index: 800;        pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */        pointer-events: auto;        }    .leaflet-top,    .leaflet-bottom {        position: absolute;        z-index: 1000;        pointer-events: none;        }    .leaflet-top {        top: 0;        }    .leaflet-right {        right: 0;        }    .leaflet-bottom {        bottom: 0;        }    .leaflet-left {        left: 0;        }    .leaflet-control {        float: left;        clear: both;        }    .leaflet-right .leaflet-control {        float: right;        }    .leaflet-top .leaflet-control {        margin-top: 10px;        }    .leaflet-bottom .leaflet-control {        margin-bottom: 10px;        }    .leaflet-left .leaflet-control {        margin-left: 10px;        }    .leaflet-right .leaflet-control {        margin-right: 10px;        }            /* zoom and fade animations */        .leaflet-fade-anim .leaflet-tile {        will-change: opacity;        }    .leaflet-fade-anim .leaflet-popup {        opacity: 0;        -webkit-transition: opacity 0.2s linear;           -moz-transition: opacity 0.2s linear;                transition: opacity 0.2s linear;        }    .leaflet-fade-anim .leaflet-map-pane .leaflet-popup {        opacity: 1;        }    .leaflet-zoom-animated {        -webkit-transform-origin: 0 0;            -ms-transform-origin: 0 0;                transform-origin: 0 0;        }    .leaflet-zoom-anim .leaflet-zoom-animated {        will-change: transform;        }    .leaflet-zoom-anim .leaflet-zoom-animated {        -webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);           -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);                transition:         transform 0.25s cubic-bezier(0,0,0.25,1);        }    .leaflet-zoom-anim .leaflet-tile,    .leaflet-pan-anim .leaflet-tile {        -webkit-transition: none;           -moz-transition: none;                transition: none;        }        .leaflet-zoom-anim .leaflet-zoom-hide {        visibility: hidden;        }            /* cursors */        .leaflet-interactive {        cursor: pointer;        }    .leaflet-grab {        cursor: -webkit-grab;        cursor:    -moz-grab;        cursor:         grab;        }    .leaflet-crosshair,    .leaflet-crosshair .leaflet-interactive {        cursor: crosshair;        }    .leaflet-popup-pane,    .leaflet-control {        cursor: auto;        }    .leaflet-dragging .leaflet-grab,    .leaflet-dragging .leaflet-grab .leaflet-interactive,    .leaflet-dragging .leaflet-marker-draggable {        cursor: move;        cursor: -webkit-grabbing;        cursor:    -moz-grabbing;        cursor:         grabbing;        }        /* marker & overlays interactivity */    .leaflet-marker-icon,    .leaflet-marker-shadow,    .leaflet-image-layer,    .leaflet-pane > svg path,    .leaflet-tile-container {        pointer-events: none;        }        .leaflet-marker-icon.leaflet-interactive,    .leaflet-image-layer.leaflet-interactive,    .leaflet-pane > svg path.leaflet-interactive,    svg.leaflet-image-layer.leaflet-interactive path {        pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */        pointer-events: auto;        }        /* visual tweaks */        .leaflet-container {        background: #ddd;        outline: 0;        }    .leaflet-container a {        color: #0078A8;        }    .leaflet-container a.leaflet-active {        outline: 2px solid orange;        }    .leaflet-zoom-box {        border: 2px dotted #38f;        background: rgba(255,255,255,0.5);        }            /* general typography */    .leaflet-container {        font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;        }            /* general toolbar styles */        .leaflet-bar {        box-shadow: 0 1px 5px rgba(0,0,0,0.65);        border-radius: 4px;        }    .leaflet-bar a,    .leaflet-bar a:hover {        background-color: #fff;        border-bottom: 1px solid #ccc;        width: 26px;        height: 26px;        line-height: 26px;        display: block;        text-align: center;        text-decoration: none;        color: black;        }    .leaflet-bar a,    .leaflet-control-layers-toggle {        background-position: 50% 50%;        background-repeat: no-repeat;        display: block;        }    .leaflet-bar a:hover {        background-color: #f4f4f4;        }    .leaflet-bar a:first-child {        border-top-left-radius: 4px;        border-top-right-radius: 4px;        }    .leaflet-bar a:last-child {        border-bottom-left-radius: 4px;        border-bottom-right-radius: 4px;        border-bottom: none;        }    .leaflet-bar a.leaflet-disabled {        cursor: default;        background-color: #f4f4f4;        color: #bbb;        }        .leaflet-touch .leaflet-bar a {        width: 30px;        height: 30px;        line-height: 30px;        }    .leaflet-touch .leaflet-bar a:first-child {        border-top-left-radius: 2px;        border-top-right-radius: 2px;        }    .leaflet-touch .leaflet-bar a:last-child {        border-bottom-left-radius: 2px;        border-bottom-right-radius: 2px;        }        /* zoom control */        .leaflet-control-zoom-in,    .leaflet-control-zoom-out {        font: bold 18px 'Lucida Console', Monaco, monospace;        text-indent: 1px;        }        .leaflet-touch .leaflet-control-zoom-in, .leaflet-touch .leaflet-control-zoom-out  {        font-size: 22px;        }            /* layers control */        .leaflet-control-layers {        box-shadow: 0 1px 5px rgba(0,0,0,0.4);        background: #fff;        border-radius: 5px;        }    .leaflet-control-layers-toggle {        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAQAAAADQ4RFAAACf0lEQVR4AY1UM3gkARTePdvdoTxXKc+qTl3aU5U6b2Kbkz3Gtq3Zw6ziLGNPzrYx7946Tr6/ee/XeCQ4D3ykPtL5tHno4n0d/h3+xfuWHGLX81cn7r0iTNzjr7LrlxCqPtkbTQEHeqOrTy4Yyt3VCi/IOB0v7rVC7q45Q3Gr5K6jt+3Gl5nCoDD4MtO+j96Wu8atmhGqcNGHObuf8OM/x3AMx38+4Z2sPqzCxRFK2aF2e5Jol56XTLyggAMTL56XOMoS1W4pOyjUcGGQdZxU6qRh7B9Zp+PfpOFlqt0zyDZckPi1ttmIp03jX8gyJ8a/PG2yutpS/Vol7peZIbZcKBAEEheEIAgFbDkz5H6Zrkm2hVWGiXKiF4Ycw0RWKdtC16Q7qe3X4iOMxruonzegJzWaXFrU9utOSsLUmrc0YjeWYjCW4PDMADElpJSSQ0vQvA1Tm6/JlKnqFs1EGyZiFCqnRZTEJJJiKRYzVYzJck2Rm6P4iH+cmSY0YzimYa8l0EtTODFWhcMIMVqdsI2uiTvKmTisIDHJ3od5GILVhBCarCfVRmo4uTjkhrhzkiBV7SsaqS+TzrzM1qpGGUFt28pIySQHR6h7F6KSwGWm97ay+Z+ZqMcEjEWebE7wxCSQwpkhJqoZA5ivCdZDjJepuJ9IQjGGUmuXJdBFUygxVqVsxFsLMbDe8ZbDYVCGKxs+W080max1hFCarCfV+C1KATwcnvE9gRRuMP2prdbWGowm1KB1y+zwMMENkM755cJ2yPDtqhTI6ED1M/82yIDtC/4j4BijjeObflpO9I9MwXTCsSX8jWAFeHr05WoLTJ5G8IQVS/7vwR6ohirYM7f6HzYpogfS3R2OAAAAAElFTkSuQmCC);        width: 36px;        height: 36px;        }    .leaflet-retina .leaflet-control-layers-toggle {        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAA0CAQAAABvcdNgAAAEsklEQVR4AWL4TydIhpZK1kpWOlg0w3ZXP6D2soBtG42jeI6ZmQTHzAxiTbSJsYLjO9HhP+WOmcuhciVnmHVQcJnp7DFvScowZorad/+V/fVzMdMT2g9Cv9guXGv/7pYOrXh2U+RRR3dSd9JRx6bIFc/ekqHI29JC6pJ5ZEh1yWkhkbcFeSjxgx3L2m1cb1C7bceyxA+CNjT/Ifff+/kDk2u/w/33/IeCMOSaWZ4glosqT3DNnNZQ7Cs58/3Ce5HL78iZH/vKVIaYlqzfdLu8Vi7dnvUbEza5Idt36tquZFldl6N5Z/POLof0XLK61mZCmJSWjVF9tEjUluu74IUXvgttuVIHE7YxSkaYhJZam7yiM9Pv82JYfl9nptxZaxMJE4YSPty+vF0+Y2up9d3wwijfjZbabqm/3bZ9ecKHsiGmRflnn1MW4pjHf9oLufyn2z3y1D6n8g8TZhxyzipLNPnAUpsOiuWimg52psrTZYnOWYNDTMuWBWa0tJb4rgq1UvmutpaYEbZlwU3CLJm/ayYjHW5/h7xWLn9Hh1vepDkyf7dE7MtT5LR4e7yYpHrkhOUpEfssBLq2pPhAqoSWKUkk7EDqkmK6RrCEzqDjhNDWNE+XSMvkJRDWlZTmCW0l0PHQGRZY5t1L83kT0Y3l2SItk5JAWHl2dCOBm+fPu3fo5/3v61RMCO9Jx2EEYYhb0rmNQMX/vm7gqOEJLcXTGw3CAuRNeyaPWwjR8PRqKQ1PDA/dpv+on9Shox52WFnx0KY8onHayrJzm87i5h9xGw/tfkev0jGsQizqezUKjk12hBMKJ4kbCqGPVNXudyyrShovGw5CgxsRICxF6aRmSjlBnHRzg7Gx8fKqEubI2rahQYdR1YgDIRQO7JvQyD52hoIQx0mxa0ODtW2Iozn1le2iIRdzwWewedyZzewidueOGqlsn1MvcnQpuVwLGG3/IR1hIKxCjelIDZ8ldqWz25jWAsnldEnK0Zxro19TGVb2ffIZEsIO89EIEDvKMPrzmBOQcKQ+rroye6NgRRxqR4U8EAkz0CL6uSGOm6KQCdWjvjRiSP1BPalCRS5iQYiEIvxuBMJEWgzSoHADcVMuN7IuqqTeyUPq22qFimFtxDyBBJEwNyt6TM88blFHao/6tWWhuuOM4SAK4EI4QmFHA+SEyWlp4EQoJ13cYGzMu7yszEIBOm2rVmHUNqwAIQabISNMRstmdhNWcFLsSm+0tjJH1MdRxO5Nx0WDMhCtgD6OKgZeljJqJKc9po8juskR9XN0Y1lZ3mWjLR9JCO1jRDMd0fpYC2VnvjBSEFg7wBENc0R9HFlb0xvF1+TBEpF68d+DHR6IOWVv2BECtxo46hOFUBd/APU57WIoEwJhIi2CdpyZX0m93BZicktMj1AS9dClteUFAUNUIEygRZCtik5zSxI9MubTBH1GOiHsiLJ3OCoSZkILa9PxiN0EbvhsAo8tdAf9Seepd36lGWHmtNANTv5Jd0z4QYyeo/UEJqxKRpg5LZx6btLPsOaEmdMyxYdlc8LMaJnikDlhclqmPiQnTEpLUIZEwkRagjYkEibQErwhkTAKCLQEbUgkzJQWc/0PstHHcfEdQ+UAAAAASUVORK5CYII=);        background-size: 26px 26px;        }    .leaflet-touch .leaflet-control-layers-toggle {        width: 44px;        height: 44px;        }    .leaflet-control-layers .leaflet-control-layers-list,    .leaflet-control-layers-expanded .leaflet-control-layers-toggle {        display: none;        }    .leaflet-control-layers-expanded .leaflet-control-layers-list {        display: block;        position: relative;        }    .leaflet-control-layers-expanded {        padding: 6px 10px 6px 6px;        color: #333;        background: #fff;        }    .leaflet-control-layers-scrollbar {        overflow-y: scroll;        overflow-x: hidden;        padding-right: 5px;        }    .leaflet-control-layers-selector {        margin-top: 2px;        position: relative;        top: 1px;        }    .leaflet-control-layers label {        display: block;        }    .leaflet-control-layers-separator {        height: 0;        border-top: 1px solid #ddd;        margin: 5px -10px 5px -6px;        }        /* Default icon URLs */    .leaflet-default-icon-path {        background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAApCAYAAADAk4LOAAAFgUlEQVR4Aa1XA5BjWRTN2oW17d3YaZtr2962HUzbDNpjszW24mRt28p47v7zq/bXZtrp/lWnXr337j3nPCe85NcypgSFdugCpW5YoDAMRaIMqRi6aKq5E3YqDQO3qAwjVWrD8Ncq/RBpykd8oZUb/kaJutow8r1aP9II0WmLKLIsJyv1w/kqw9Ch2MYdB++12Onxee/QMwvf4/Dk/Lfp/i4nxTXtOoQ4pW5Aj7wpici1A9erdAN2OH64x8OSP9j3Ft3b7aWkTg/Fm91siTra0f9on5sQr9INejH6CUUUpavjFNq1B+Oadhxmnfa8RfEmN8VNAsQhPqF55xHkMzz3jSmChWU6f7/XZKNH+9+hBLOHYozuKQPxyMPUKkrX/K0uWnfFaJGS1QPRtZsOPtr3NsW0uyh6NNCOkU3Yz+bXbT3I8G3xE5EXLXtCXbbqwCO9zPQYPRTZ5vIDXD7U+w7rFDEoUUf7ibHIR4y6bLVPXrz8JVZEql13trxwue/uDivd3fkWRbS6/IA2bID4uk0UpF1N8qLlbBlXs4Ee7HLTfV1j54APvODnSfOWBqtKVvjgLKzF5YdEk5ewRkGlK0i33Eofffc7HT56jD7/6U+qH3Cx7SBLNntH5YIPvODnyfIXZYRVDPqgHtLs5ABHD3YzLuespb7t79FY34DjMwrVrcTuwlT55YMPvOBnRrJ4VXTdNnYug5ucHLBjEpt30701A3Ts+HEa73u6dT3FNWwflY86eMHPk+Yu+i6pzUpRrW7SNDg5JHR4KapmM5Wv2E8Tfcb1HoqqHMHU+uWDD7zg54mz5/2BSnizi9T1Dg4QQXLToGNCkb6tb1NU+QAlGr1++eADrzhn/u8Q2YZhQVlZ5+CAOtqfbhmaUCS1ezNFVm2imDbPmPng5wmz+gwh+oHDce0eUtQ6OGDIyR0uUhUsoO3vfDmmgOezH0mZN59x7MBi++WDL1g/eEiU3avlidO671bkLfwbw5XV2P8Pzo0ydy4t2/0eu33xYSOMOD8hTf4CrBtGMSoXfPLchX+J0ruSePw3LZeK0juPJbYzrhkH0io7B3k164hiGvawhOKMLkrQLyVpZg8rHFW7E2uHOL888IBPlNZ1FPzstSJM694fWr6RwpvcJK60+0HCILTBzZLFNdtAzJaohze60T8qBzyh5ZuOg5e7uwQppofEmf2++DYvmySqGBuKaicF1blQjhuHdvCIMvp8whTTfZzI7RldpwtSzL+F1+wkdZ2TBOW2gIF88PBTzD/gpeREAMEbxnJcaJHNHrpzji0gQCS6hdkEeYt9DF/2qPcEC8RM28Hwmr3sdNyht00byAut2k3gufWNtgtOEOFGUwcXWNDbdNbpgBGxEvKkOQsxivJx33iow0Vw5S6SVTrpVq11ysA2Rp7gTfPfktc6zhtXBBC+adRLshf6sG2RfHPZ5EAc4sVZ83yCN00Fk/4kggu40ZTvIEm5g24qtU4KjBrx/BTTH8ifVASAG7gKrnWxJDcU7x8X6Ecczhm3o6YicvsLXWfh3Ch1W0k8x0nXF+0fFxgt4phz8QvypiwCCFKMqXCnqXExjq10beH+UUA7+nG6mdG/Pu0f3LgFcGrl2s0kNNjpmoJ9o4B29CMO8dMT4Q5ox8uitF6fqsrJOr8qnwNbRzv6hSnG5wP+64C7h9lp30hKNtKdWjtdkbuPA19nJ7Tz3zR/ibgARbhb4AlhavcBebmTHcFl2fvYEnW0ox9xMxKBS8btJ+KiEbq9zA4RthQXDhPa0T9TEe69gWupwc6uBUphquXgf+/FrIjweHQS4/pduMe5ERUMHUd9xv8ZR98CxkS4F2n3EUrUZ10EYNw7BWm9x1GiPssi3GgiGRDKWRYZfXlON+dfNbM+GgIwYdwAAAAASUVORK5CYII=);        }            /* attribution and scale controls */        .leaflet-container .leaflet-control-attribution {        background: #fff;        background: rgba(255, 255, 255, 0.7);        margin: 0;        }    .leaflet-control-attribution,    .leaflet-control-scale-line {        padding: 0 5px;        color: #333;        }    .leaflet-control-attribution a {        text-decoration: none;        }    .leaflet-control-attribution a:hover {        text-decoration: underline;        }    .leaflet-container .leaflet-control-attribution,    .leaflet-container .leaflet-control-scale {        font-size: 11px;        }    .leaflet-left .leaflet-control-scale {        margin-left: 5px;        }    .leaflet-bottom .leaflet-control-scale {        margin-bottom: 5px;        }    .leaflet-control-scale-line {        border: 2px solid #777;        border-top: none;        line-height: 1.1;        padding: 2px 5px 1px;        font-size: 11px;        white-space: nowrap;        overflow: hidden;        -moz-box-sizing: border-box;             box-sizing: border-box;            background: #fff;        background: rgba(255, 255, 255, 0.5);        }    .leaflet-control-scale-line:not(:first-child) {        border-top: 2px solid #777;        border-bottom: none;        margin-top: -2px;        }    .leaflet-control-scale-line:not(:first-child):not(:last-child) {        border-bottom: 2px solid #777;        }        .leaflet-touch .leaflet-control-attribution,    .leaflet-touch .leaflet-control-layers,    .leaflet-touch .leaflet-bar {        box-shadow: none;        }    .leaflet-touch .leaflet-control-layers,    .leaflet-touch .leaflet-bar {        border: 2px solid rgba(0,0,0,0.2);        background-clip: padding-box;        }            /* popup */        .leaflet-popup {        position: absolute;        text-align: center;        margin-bottom: 20px;        }    .leaflet-popup-content-wrapper {        padding: 1px;        text-align: left;        border-radius: 12px;        }    .leaflet-popup-content {        margin: 13px 19px;        line-height: 1.4;        }    .leaflet-popup-content p {        margin: 18px 0;        }    .leaflet-popup-tip-container {        width: 40px;        height: 20px;        position: absolute;        left: 50%;        margin-left: -20px;        overflow: hidden;        pointer-events: none;        }    .leaflet-popup-tip {        width: 17px;        height: 17px;        padding: 1px;            margin: -10px auto 0;            -webkit-transform: rotate(45deg);           -moz-transform: rotate(45deg);            -ms-transform: rotate(45deg);                transform: rotate(45deg);        }    .leaflet-popup-content-wrapper,    .leaflet-popup-tip {        background: white;        color: #333;        box-shadow: 0 3px 14px rgba(0,0,0,0.4);        }    .leaflet-container a.leaflet-popup-close-button {        position: absolute;        top: 0;        right: 0;        padding: 4px 4px 0 0;        border: none;        text-align: center;        width: 18px;        height: 14px;        font: 16px/14px Tahoma, Verdana, sans-serif;        color: #c3c3c3;        text-decoration: none;        font-weight: bold;        background: transparent;        }    .leaflet-container a.leaflet-popup-close-button:hover {        color: #999;        }    .leaflet-popup-scrolled {        overflow: auto;        border-bottom: 1px solid #ddd;        border-top: 1px solid #ddd;        }        .leaflet-oldie .leaflet-popup-content-wrapper {        -ms-zoom: 1;        }    .leaflet-oldie .leaflet-popup-tip {        width: 24px;        margin: 0 auto;            -ms-filter: "progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)";        filter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);        }    .leaflet-oldie .leaflet-popup-tip-container {        margin-top: -1px;        }        .leaflet-oldie .leaflet-control-zoom,    .leaflet-oldie .leaflet-control-layers,    .leaflet-oldie .leaflet-popup-content-wrapper,    .leaflet-oldie .leaflet-popup-tip {        border: 1px solid #999;        }            /* div icon */        .leaflet-div-icon {        background: #fff;        border: 1px solid #666;        }            /* Tooltip */    /* Base styles for the element that has a tooltip */    .leaflet-tooltip {        position: absolute;        padding: 6px;        background-color: #fff;        border: 1px solid #fff;        border-radius: 3px;        color: #222;        white-space: nowrap;        -webkit-user-select: none;        -moz-user-select: none;        -ms-user-select: none;        user-select: none;        pointer-events: none;        box-shadow: 0 1px 3px rgba(0,0,0,0.4);        }    .leaflet-tooltip.leaflet-clickable {        cursor: pointer;        pointer-events: auto;        }    .leaflet-tooltip-top:before,    .leaflet-tooltip-bottom:before,    .leaflet-tooltip-left:before,    .leaflet-tooltip-right:before {        position: absolute;        pointer-events: none;        border: 6px solid transparent;        background: transparent;        content: "";        }        /* Directions */        .leaflet-tooltip-bottom {        margin-top: 6px;    }    .leaflet-tooltip-top {        margin-top: -6px;    }    .leaflet-tooltip-bottom:before,    .leaflet-tooltip-top:before {        left: 50%;        margin-left: -6px;        }    .leaflet-tooltip-top:before {        bottom: 0;        margin-bottom: -12px;        border-top-color: #fff;        }    .leaflet-tooltip-bottom:before {        top: 0;        margin-top: -12px;        margin-left: -6px;        border-bottom-color: #fff;        }    .leaflet-tooltip-left {        margin-left: -6px;    }    .leaflet-tooltip-right {        margin-left: 6px;    }    .leaflet-tooltip-left:before,    .leaflet-tooltip-right:before {        top: 50%;        margin-top: -6px;        }    .leaflet-tooltip-left:before {        right: 0;        margin-right: -12px;        border-left-color: #fff;        }    .leaflet-tooltip-right:before {        left: 0;        margin-left: -12px;        border-right-color: #fff;        }    </style><link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Roboto:100,100italic,300,300italic,400,400italic,500,500italic,700,700italic&subset=latin,cyrillic-ext,greek-ext,greek,vietnamese,latin-ext,cyrillic"/>`;document.body=document.createElement("body");document.body.innerHTML='<div id="map">Loading, please wait</div><div id="chatcontrols" style="display:none"><a accesskey="0" title="[0]"><span class="toggle"></span></a><a accesskey="1" title="[1]">all</a><a accesskey="2" title="[2]" class="active">faction</a><a accesskey="3" title="[3]">alerts</a></div><div id="chat" style="display:none">  <div id="chatfaction"></div>  <div id="chatall"></div>  <div id="chatalerts"></div></div><form id="chatinput" style="display:none"><table><tr>  <td><time></time></td>  <td><mark>tell faction:</mark></td>  <td><input id="chattext" type="text" maxlength="256" accesskey="c" title="[c]" /></td></tr></table></form><a id="sidebartoggle" accesskey="i" title="Toggle sidebar [i]"><span class="toggle close"></span></a><div id="scrollwrapper">  <div id="sidebar" style="display: block">    <div id="playerstat">t</div>    <div id="gamestat">&nbsp;loading global control stats</div>    <div id="searchwrapper">      <button title="Current location" id="buttongeolocation"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYxIDY0LjE0MDk0OSwgMjAxMC8xMi8wNy0xMDo1NzowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNS4xIE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxNjM1OTRFNUE0RTIxMUUxODNBMUZBQ0ZFQkJDNkRBQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxNjM1OTRFNkE0RTIxMUUxODNBMUZBQ0ZFQkJDNkRBQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjE2MzU5NEUzQTRFMjExRTE4M0ExRkFDRkVCQkM2REFCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjE2MzU5NEU0QTRFMjExRTE4M0ExRkFDRkVCQkM2REFCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+kxvtEgAAAWVJREFUeNqsVctRwzAUlDTccQlxB3RA0kHSQXLxNXEFgQrsHO1L6AA6cKgAd4BLEBXAU2YfszY2oMCb2Rlbelqv3s+2qiozYjPBVjAX3Az2WsFJcBB0WZb1Nt0IWSF4FexGyAzWdvAp6rpOpgjDxgucg3lBKViRzz3WPN6Db8OkjsgaUvQgSAW54IkI77CWwkcVN0PCPZFtAG+mzZPfmVRUhlAZK0mZIR6qbGPi7ChY4zl1yKZ+NTfxltNttg6loep8LJuUjad4zh3F7s1cbs8ayxDD9xEH+0uiL2ed+WdjwhWU2YjzVmJoUfCfhC2eb/8g7Fr73KHRDWopiWVC22kdnhymhrZfcYG6goQcAmGHhleV64lsjlUD+5cSz85RtbfUSscfrp+Qn87Ic2KuyGlBEyd8dYkO4IJfInkc70C2QMf0CD1I95hzCc1GtcfBe7hm/l1he5p3JYVh+AsoaV727EOAAQAWgF3ledLuQAAAAABJRU5ErkJggg==" alt="Current location"/></button>      <input id="search" placeholder="Search location\u2026" type="search" accesskey="f" title="Search for a place [f]"/>    </div>    <div id="portaldetails"></div>    <input id="redeem" placeholder="Redeem code\u2026" type="text"/>    <div id="toolbox">      <a onmouseover="setPermaLink(this)" onclick="setPermaLink(this);return androidPermalink()" title="URL link to this map view">Permalink</a>      <a onclick="window.aboutIITC()" style="cursor: help">About IITC</a>    </div>  </div></div><div id="updatestatus"><div id="innerstatus"></div></div><div id="play_button"></div><div id="header"><div id="nav"></div></div>';typeof window.plugin!="function"&&(window.plugin=function(){});window.addEventListener("load",a=>{Nl(),new is().setup()});})();
/* @preserve
 * Leaflet 1.7.1, a JS library for interactive maps. http://leafletjs.com
 * (c) 2010-2019 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */
/*!
 * jQuery JavaScript Library v3.6.0
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2021-03-02T17:08Z
 */
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
/*! Leaflet.Geodesic 2.5.5-0 - (c) Henry Thasler - https://github.com/henrythasler/Leaflet.Geodesic */
/** @preserve OverlappingMarkerSpiderfier
https://github.com/jawj/OverlappingMarkerSpiderfier
Copyright (c) 2011 - 2013 George MacKerron
Released under the MIT licence: http://opensource.org/licenses/mit-license
Note: The Google Maps API v3 must be included *before* this code
 */

} // wrapper end
// inject code into site context
var script = document.createElement('script');
var info = {};
if (typeof GM_info !== 'undefined' && GM_info && GM_info.script) info.script = { version: GM_info.script.version, name: GM_info.script.name, description: GM_info.script.description };
script.appendChild(document.createTextNode('(' + wrapper + ')(' + JSON.stringify(info) + ');'));
(document.body || document.head || document.documentElement).appendChild(script);